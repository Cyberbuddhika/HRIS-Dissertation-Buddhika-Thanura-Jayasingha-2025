(()=>{var ji=Object.create;var Nr=Object.defineProperty;var Ri=Object.getOwnPropertyDescriptor;var Ui=Object.getOwnPropertyNames;var $i=Object.getPrototypeOf,Wi=Object.prototype.hasOwnProperty;var zi=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports);var Hi=(n,r,i,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let l of Ui(r))!Wi.call(n,l)&&l!==i&&Nr(n,l,{get:()=>r[l],enumerable:!(a=Ri(r,l))||a.enumerable});return n};var Nt=(n,r,i)=>(i=n!=null?ji($i(n)):{},Hi(r||!n||!n.__esModule?Nr(i,"default",{value:n,enumerable:!0}):i,n));var mt=zi((dt,vn)=>{var Ar,ct;Ar=dt,ct=()=>(()=>{var n={d:(m,w)=>{for(var x in w)n.o(w,x)&&!n.o(m,x)&&Object.defineProperty(m,x,{enumerable:!0,get:w[x]})},o:(m,w)=>Object.prototype.hasOwnProperty.call(m,w)},r={};n.d(r,{default:()=>_i});var i={allowedTagList:["b","caption","cite","code","const","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","input","ins","kdb","label","li","option","output","p","q","s","sample","span","strong","td","th","u"]};Object.freeze(i.allowedTagList),Object.defineProperty(i,"allowedTagList",{configurable:!1,writable:!1}),i.fromCharCodeKeyCode={0:"LaunchCalculator",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",92:"OSRight",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",173:"-",182:"MyComputer",183:"MyCalculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph"},Object.freeze(i.fromCharCodeKeyCode),Object.defineProperty(i,"fromCharCodeKeyCode",{configurable:!1,writable:!1}),i.keyName={Unidentified:"Unidentified",AndroidDefault:"AndroidDefault",Alt:"Alt",AltGr:"AltGraph",CapsLock:"CapsLock",Ctrl:"Control",Fn:"Fn",FnLock:"FnLock",Hyper:"Hyper",Meta:"Meta",OSLeft:"OS",OSRight:"OS",Command:"OS",NumLock:"NumLock",ScrollLock:"ScrollLock",Shift:"Shift",Super:"Super",Symbol:"Symbol",SymbolLock:"SymbolLock",Enter:"Enter",Tab:"Tab",Space:" ",LeftArrow:"ArrowLeft",UpArrow:"ArrowUp",RightArrow:"ArrowRight",DownArrow:"ArrowDown",End:"End",Home:"Home",PageUp:"PageUp",PageDown:"PageDown",Backspace:"Backspace",Clear:"Clear",Copy:"Copy",CrSel:"CrSel",Cut:"Cut",Delete:"Delete",EraseEof:"EraseEof",ExSel:"ExSel",Insert:"Insert",Paste:"Paste",Redo:"Redo",Undo:"Undo",Accept:"Accept",Again:"Again",Attn:"Attn",Cancel:"Cancel",ContextMenu:"ContextMenu",Esc:"Escape",Execute:"Execute",Find:"Find",Finish:"Finish",Help:"Help",Pause:"Pause",Play:"Play",Props:"Props",Select:"Select",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",BrightnessDown:"BrightnessDown",BrightnessUp:"BrightnessUp",Eject:"Eject",LogOff:"LogOff",Power:"Power",PowerOff:"PowerOff",PrintScreen:"PrintScreen",Hibernate:"Hibernate",Standby:"Standby",WakeUp:"WakeUp",Compose:"Compose",Dead:"Dead",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",Print:"Print",num0:"0",num1:"1",num2:"2",num3:"3",num4:"4",num5:"5",num6:"6",num7:"7",num8:"8",num9:"9",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",Semicolon:";",Equal:"=",Comma:",",Hyphen:"-",Minus:"-",Plus:"+",Dot:".",Slash:"/",Backquote:"`",LeftParenthesis:"(",RightParenthesis:")",LeftBracket:"[",RightBracket:"]",Backslash:"\\",Quote:"'",numpad0:"0",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",NumpadDot:".",NumpadDotAlt:",",NumpadMultiply:"*",NumpadPlus:"+",NumpadMinus:"-",NumpadSubtract:"-",NumpadSlash:"/",NumpadDotObsoleteBrowsers:"Decimal",NumpadMultiplyObsoleteBrowsers:"Multiply",NumpadPlusObsoleteBrowsers:"Add",NumpadMinusObsoleteBrowsers:"Subtract",NumpadSlashObsoleteBrowsers:"Divide",_allFnKeys:["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"],_someNonPrintableKeys:["Tab","Enter","Shift","ShiftLeft","ShiftRight","Control","ControlLeft","ControlRight","Alt","AltLeft","AltRight","Pause","CapsLock","Escape"],_directionKeys:["PageUp","PageDown","End","Home","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},Object.freeze(i.keyName._allFnKeys),Object.freeze(i.keyName._someNonPrintableKeys),Object.freeze(i.keyName._directionKeys),Object.freeze(i.keyName),Object.defineProperty(i,"keyName",{configurable:!1,writable:!1}),Object.freeze(i);let a=i;function l(m){return function(w){if(Array.isArray(w))return f(w)}(m)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(m)||g(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(m[N]=x[N])}return m},c.apply(this,arguments)}function h(m,w){return function(x){if(Array.isArray(x))return x}(m)||function(x,N){var t=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(t!=null){var o,d,u,p,b=[],S=!0,k=!1;try{if(u=(t=t.call(x)).next,N===0){if(Object(t)!==t)return;S=!1}else for(;!(S=(o=u.call(t)).done)&&(b.push(o.value),b.length!==N);S=!0);}catch(A){k=!0,d=A}finally{try{if(!S&&t.return!=null&&(p=t.return(),Object(p)!==p))return}finally{if(k)throw d}}return b}}(m,w)||g(m,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(m,w){if(m){if(typeof m=="string")return f(m,w);var x=Object.prototype.toString.call(m).slice(8,-1);return x==="Object"&&m.constructor&&(x=m.constructor.name),x==="Map"||x==="Set"?Array.from(m):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?f(m,w):void 0}}function f(m,w){(w==null||w>m.length)&&(w=m.length);for(var x=0,N=new Array(w);x<w;x++)N[x]=m[x];return N}function v(m){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},v(m)}function D(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(v(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(v(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),v(o)==="symbol"?o:String(o)),N)}var t,o}var s=function(){function m(){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m)}var w,x,N;return w=m,N=[{key:"isNull",value:function(t){return t===null}},{key:"isUndefined",value:function(t){return t===void 0}},{key:"isUndefinedOrNullOrEmpty",value:function(t){return t==null||t===""}},{key:"isString",value:function(t){return typeof t=="string"||t instanceof String}},{key:"isEmptyString",value:function(t){return t===""}},{key:"isBoolean",value:function(t){return typeof t=="boolean"}},{key:"isTrueOrFalseString",value:function(t){var o=String(t).toLowerCase();return o==="true"||o==="false"}},{key:"isObject",value:function(t){return v(t)==="object"&&t!==null&&!Array.isArray(t)}},{key:"isEmptyObj",value:function(t){for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))return!1;return!0}},{key:"isNumberStrict",value:function(t){return typeof t=="number"}},{key:"isNumber",value:function(t){return!this.isArray(t)&&!isNaN(parseFloat(t))&&isFinite(t)}},{key:"isDigit",value:function(t){return/\d/.test(t)}},{key:"isNumberOrArabic",value:function(t){var o=this.arabicToLatinNumbers(t,!1,!0,!0);return this.isNumber(o)}},{key:"isInt",value:function(t){return typeof t=="number"&&parseFloat(t)===parseInt(t,10)&&!isNaN(t)}},{key:"isFunction",value:function(t){return typeof t=="function"}},{key:"contains",value:function(t,o){return!(!this.isString(t)||!this.isString(o)||t===""||o==="")&&t.indexOf(o)!==-1}},{key:"isInArray",value:function(t,o){return!(!this.isArray(o)||o===[]||this.isUndefined(t))&&o.indexOf(t)!==-1}},{key:"isArray",value:function(t){if(Object.prototype.toString.call([])==="[object Array]")return Array.isArray(t)||v(t)==="object"&&Object.prototype.toString.call(t)==="[object Array]";throw new Error("toString message changed for Object Array")}},{key:"isElement",value:function(t){return typeof Element<"u"&&t instanceof Element}},{key:"isInputElement",value:function(t){return this.isElement(t)&&t.tagName.toLowerCase()==="input"}},{key:"decimalPlaces",value:function(t){var o=h(t.split("."),2)[1];return this.isUndefined(o)?0:o.length}},{key:"indexFirstNonZeroDecimalPlace",value:function(t){var o=h(String(Math.abs(t)).split("."),2)[1];if(this.isUndefined(o))return 0;var d=o.lastIndexOf("0");return d===-1?d=0:d+=2,d}},{key:"keyCodeNumber",value:function(t){return t.which===void 0?t.keyCode:t.which}},{key:"character",value:function(t){var o;if(t.key==="Unidentified"||t.key===void 0||this.isSeleniumBot()){var d=this.keyCodeNumber(t);if(d===229)return a.keyName.AndroidDefault;var u=a.fromCharCodeKeyCode[d];o=m.isUndefinedOrNullOrEmpty(u)?String.fromCharCode(d):u}else switch(t.key){case"Add":o=a.keyName.NumpadPlus;break;case"Apps":o=a.keyName.ContextMenu;break;case"Crsel":o=a.keyName.CrSel;break;case"Decimal":o=t.char?t.char:a.keyName.NumpadDot;break;case"Del":o=a.keyName.Delete;break;case"Divide":o=a.keyName.NumpadSlash;break;case"Down":o=a.keyName.DownArrow;break;case"Esc":o=a.keyName.Esc;break;case"Exsel":o=a.keyName.ExSel;break;case"Left":o=a.keyName.LeftArrow;break;case"Meta":case"Super":o=a.keyName.OSLeft;break;case"Multiply":o=a.keyName.NumpadMultiply;break;case"Right":o=a.keyName.RightArrow;break;case"Spacebar":o=a.keyName.Space;break;case"Subtract":o=a.keyName.NumpadMinus;break;case"Up":o=a.keyName.UpArrow;break;default:o=t.key}return o}},{key:"browser",value:function(){var t,o=navigator.userAgent,d=o.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(d[1])?{name:"ie",version:(t=/\brv[ :]+(\d+)/g.exec(o)||[])[1]||""}:d[1]==="Chrome"&&(t=o.match(/\b(OPR|Edge)\/(\d+)/))!==null?{name:t[1].replace("OPR","opera"),version:t[2]}:(d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=o.match(/version\/(\d+)/i))!==null&&d.splice(1,1,t[1]),{name:d[0].toLowerCase(),version:d[1]})}},{key:"isSeleniumBot",value:function(){return window.navigator.webdriver===!0}},{key:"isNegative",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t===o||t!==""&&(m.isNumber(t)?t<0:d?this.contains(t,o):this.isNegativeStrict(t,o))}},{key:"isNegativeStrict",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return t.charAt(0)===o}},{key:"isNegativeWithBrackets",value:function(t,o,d){return t.charAt(0)===o&&this.contains(t,d)}},{key:"isZeroOrHasNoValue",value:function(t){return!/[1-9]/g.test(t)}},{key:"setRawNegativeSign",value:function(t){return this.isNegativeStrict(t,"-")?t:"-".concat(t)}},{key:"replaceCharAt",value:function(t,o,d){return"".concat(t.substr(0,o)).concat(d).concat(t.substr(o+d.length))}},{key:"clampToRangeLimits",value:function(t,o){return Math.max(o.minimumValue,Math.min(o.maximumValue,t))}},{key:"countNumberCharactersOnTheCaretLeftSide",value:function(t,o,d){for(var u=new RegExp("[0-9".concat(d,"-]")),p=0,b=0;b<o;b++)u.test(t[b])&&p++;return p}},{key:"findCaretPositionInFormattedNumber",value:function(t,o,d,u){var p,b=d.length,S=t.length,k=0;for(p=0;p<b&&k<S&&k<o;p++)(t[k]===d[p]||t[k]==="."&&d[p]===u)&&k++;return p}},{key:"countCharInText",value:function(t,o){for(var d=0,u=0;u<o.length;u++)o[u]===t&&d++;return d}},{key:"convertCharacterCountToIndexPosition",value:function(t){return Math.max(t,t-1)}},{key:"getElementSelection",value:function(t){var o,d={};try{o=this.isUndefined(t.selectionStart)}catch{o=!1}try{if(o){var u=window.getSelection().getRangeAt(0);d.start=u.startOffset,d.end=u.endOffset,d.length=d.end-d.start}else d.start=t.selectionStart,d.end=t.selectionEnd,d.length=d.end-d.start}catch{d.start=0,d.end=0,d.length=0}return d}},{key:"setElementSelection",value:function(t,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(this.isUndefinedOrNullOrEmpty(d)&&(d=o),this.isInputElement(t))t.setSelectionRange(o,d);else if(!m.isNull(t.firstChild)){var u=document.createRange();u.setStart(t.firstChild,o),u.setEnd(t.firstChild,d);var p=window.getSelection();p.removeAllRanges(),p.addRange(u)}}},{key:"throwError",value:function(t){throw new Error(t)}},{key:"warning",value:function(t){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&console.warn("Warning: ".concat(t))}},{key:"isWheelEvent",value:function(t){return t instanceof WheelEvent}},{key:"isWheelUpEvent",value:function(t){return this.isWheelEvent(t)&&!this.isUndefinedOrNullOrEmpty(t.deltaY)||this.throwError("The event passed as a parameter is not a valid wheel event, '".concat(t.type,"' given.")),t.deltaY<0}},{key:"isWheelDownEvent",value:function(t){return this.isWheelEvent(t)&&!this.isUndefinedOrNullOrEmpty(t.deltaY)||this.throwError("The event passed as a parameter is not a valid wheel event, '".concat(t.type,"' given.")),t.deltaY>0}},{key:"isWheelEventWithZeroDeltaY",value:function(t){return this.isWheelEvent(t)&&!this.isUndefinedOrNullOrEmpty(t.deltaY)&&t.deltaY===0}},{key:"forceDecimalPlaces",value:function(t,o){var d=h(String(t).split("."),2),u=d[0],p=d[1];return p?"".concat(u,".").concat(p.substr(0,o)):t}},{key:"roundToNearest",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return t===0?0:(o===0&&this.throwError("The `stepPlace` used to round is equal to `0`. This value must not be equal to zero."),Math.round(t/o)*o)}},{key:"modifyAndRoundToNearestAuto",value:function(t,o,d){t=Number(this.forceDecimalPlaces(t,d));var u=Math.abs(t);if(u>=0&&u<1){var p,b=Math.pow(10,-d);if(t===0)return o?b:-b;var S,k=d,A=this.indexFirstNonZeroDecimalPlace(t);return p=A>=k-1?b:Math.pow(10,-(A+1)),S=o?t+p:t-p,this.roundToNearest(S,p)}t=parseInt(t,10);var y,B=Math.abs(t).toString().length;switch(B){case 1:y=0;break;case 2:case 3:y=1;break;case 4:case 5:y=2;break;default:y=B-3}var T,V=Math.pow(10,y);return(T=o?t+V:t-V)<=10&&T>=-10?T:this.roundToNearest(T,V)}},{key:"addAndRoundToNearestAuto",value:function(t,o){return this.modifyAndRoundToNearestAuto(t,!0,o)}},{key:"subtractAndRoundToNearestAuto",value:function(t,o){return this.modifyAndRoundToNearestAuto(t,!1,o)}},{key:"arabicToLatinNumbers",value:function(t){var o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(this.isNull(t))return t;var p=t.toString();if(p==="")return t;if(p.match(/[٠١٢٣٤٥٦٧٨٩۴۵۶]/g)===null)return o&&(p=Number(p)),p;d&&(p=p.replace(/٫/,".")),u&&(p=p.replace(/٬/g,"")),p=p.replace(/[٠١٢٣٤٥٦٧٨٩]/g,function(S){return S.charCodeAt(0)-1632}).replace(/[۰۱۲۳۴۵۶۷۸۹]/g,function(S){return S.charCodeAt(0)-1776});var b=Number(p);return isNaN(b)?b:(o&&(p=b),p)}},{key:"triggerEvent",value:function(t){var o,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];window.CustomEvent?o=new CustomEvent(t,{detail:u,bubbles:p,cancelable:b}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,p,b,{detail:u}),d.dispatchEvent(o)}},{key:"parseStr",value:function(t){var o,d,u,p,b={};if(t===0&&1/t<0&&(t="-0"),t=t.toString(),this.isNegativeStrict(t,"-")?(t=t.slice(1),b.s=-1):b.s=1,(o=t.indexOf("."))>-1&&(t=t.replace(".","")),o<0&&(o=t.length),(d=t.search(/[1-9]/i)===-1?t.length:t.search(/[1-9]/i))===(u=t.length))b.e=0,b.c=[0];else{for(p=u-1;t.charAt(p)==="0";p-=1)u-=1;for(u-=1,b.e=o-d-1,b.c=[],o=0;d<=u;d+=1)b.c[o]=+t.charAt(d),o+=1}return b}},{key:"testMinMax",value:function(t,o){var d=o.c,u=t.c,p=o.s,b=t.s,S=o.e,k=t.e;if(!d[0]||!u[0])return d[0]?p:u[0]?-b:0;if(p!==b)return p;var A=p<0;if(S!==k)return S>k^A?1:-1;for(p=-1,b=(S=d.length)<(k=u.length)?S:k,p+=1;p<b;p+=1)if(d[p]!==u[p])return d[p]>u[p]^A?1:-1;return S===k?0:S>k^A?1:-1}},{key:"randomString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;return Math.random().toString(36).substr(2,t)}},{key:"domElement",value:function(t){var o;return o=m.isString(t)?document.querySelector(t):t,o}},{key:"getElementValue",value:function(t){return t.tagName.toLowerCase()==="input"?t.value:this.text(t)}},{key:"setElementValue",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;t.tagName.toLowerCase()==="input"?t.value=o:t.textContent=o}},{key:"setInvalidState",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Invalid";(o===""||this.isNull(o))&&this.throwError("Cannot set the invalid state with an empty message."),t.setCustomValidity(o)}},{key:"setValidState",value:function(t){t.setCustomValidity("")}},{key:"cloneObject",value:function(t){return c({},t)}},{key:"camelize",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(this.isNull(t))return null;d&&(t=t.replace(/^data-/,""));var p=t.split(o).map(function(b){return"".concat(b.charAt(0).toUpperCase()).concat(b.slice(1))});return p=p.join(""),u&&(p="".concat(p.charAt(0).toLowerCase()).concat(p.slice(1))),p}},{key:"text",value:function(t){var o=t.nodeType;return o===Node.ELEMENT_NODE||o===Node.DOCUMENT_NODE||o===Node.DOCUMENT_FRAGMENT_NODE?t.textContent:o===Node.TEXT_NODE?t.nodeValue:""}},{key:"setText",value:function(t,o){var d=t.nodeType;d!==Node.ELEMENT_NODE&&d!==Node.DOCUMENT_NODE&&d!==Node.DOCUMENT_FRAGMENT_NODE||(t.textContent=o)}},{key:"filterOut",value:function(t,o){var d=this;return t.filter(function(u){return!d.isInArray(u,o)})}},{key:"trimPaddedZerosFromDecimalPlaces",value:function(t){if((t=String(t))==="")return"";var o=h(t.split("."),2),d=o[0],u=o[1];if(this.isUndefinedOrNullOrEmpty(u))return d;var p=u.replace(/0+$/g,"");return p===""?d:"".concat(d,".").concat(p)}},{key:"getHoveredElement",value:function(){var t=l(document.querySelectorAll(":hover"));return t[t.length-1]}},{key:"arrayTrim",value:function(t,o){var d=t.length;return d===0||o>d?t:o<0?[]:(t.length=parseInt(o,10),t)}},{key:"arrayUnique",value:function(){var t;return l(new Set((t=[]).concat.apply(t,arguments)))}},{key:"mergeMaps",value:function(){for(var t=arguments.length,o=new Array(t),d=0;d<t;d++)o[d]=arguments[d];return new Map(o.reduce(function(u,p){return u.concat(l(p))},[]))}},{key:"objectKeyLookup",value:function(t,o){var d=Object.entries(t).find(function(p){return p[1]===o}),u=null;return d!==void 0&&(u=d[0]),u}},{key:"insertAt",value:function(t,o,d){if(d>(t=String(t)).length)throw new Error("The given index is out of the string range.");if(o.length!==1)throw new Error("The given string `char` should be only one character long.");return t===""&&d===0?o:"".concat(t.slice(0,d)).concat(o).concat(t.slice(d))}},{key:"scientificToDecimal",value:function(t){var o=Number(t);if(isNaN(o))return NaN;if(t=String(t),!this.contains(t,"e")&&!this.contains(t,"E"))return t;var d=h(t.split(/e/i),2),u=d[0],p=d[1],b=u<0;b&&(u=u.replace("-",""));var S=+p<0;S&&(p=p.replace("-",""));var k,A=h(u.split(/\./),2),y=A[0],B=A[1];return S?(k=y.length>p?this.insertAt(y,".",y.length-p):"0.".concat("0".repeat(p-y.length)).concat(y),k="".concat(k).concat(B||"")):B?(u="".concat(y).concat(B),k=p<B.length?this.insertAt(u,".",+p+y.length):"".concat(u).concat("0".repeat(p-B.length))):(u=u.replace(".",""),k="".concat(u).concat("0".repeat(Number(p)))),b&&(k="-".concat(k)),k}}],(x=null)&&D(w.prototype,x),N&&D(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();function E(m){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},E(m)}function F(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(E(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(E(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),E(o)==="symbol"?o:String(o)),N)}var t,o}var P=function(){function m(t){if(function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}(this,m),t===null)throw new Error("Invalid AST")}var w,x,N;return w=m,(x=[{key:"evaluate",value:function(t){if(t==null)throw new Error("Invalid AST sub-tree");if(t.type==="number")return t.value;if(t.type==="unaryMinus")return-this.evaluate(t.left);var o=this.evaluate(t.left),d=this.evaluate(t.right);switch(t.type){case"op_+":return Number(o)+Number(d);case"op_-":return o-d;case"op_*":return o*d;case"op_/":return o/d;default:throw new Error("Invalid operator '".concat(t.type,"'"))}}}])&&F(w.prototype,x),N&&F(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();function O(m){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},O(m)}function _(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(O(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(O(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),O(o)==="symbol"?o:String(o)),N)}var t,o}var I=function(){function m(){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m)}var w,x,N;return w=m,N=[{key:"createNode",value:function(t,o,d){var u=new m;return u.type=t,u.left=o,u.right=d,u}},{key:"createUnaryNode",value:function(t){var o=new m;return o.type="unaryMinus",o.left=t,o.right=null,o}},{key:"createLeaf",value:function(t){var o=new m;return o.type="number",o.value=t,o}}],(x=null)&&_(w.prototype,x),N&&_(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();function j(m){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},j(m)}function L(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(j(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(j(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),j(o)==="symbol"?o:String(o)),N)}var t,o}function M(m,w,x){return w&&L(m.prototype,w),x&&L(m,x),Object.defineProperty(m,"prototype",{writable:!1}),m}var $=M(function m(w,x,N){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m),this.type=w,this.value=x,this.symbol=N});function K(m){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},K(m)}function U(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(K(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(K(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),K(o)==="symbol"?o:String(o)),N)}var t,o}var W=function(){function m(t){(function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")})(this,m),this.text=t,this.textLength=t.length,this.index=0,this.token=new $("Error",0,0)}var w,x,N;return w=m,x=[{key:"_skipSpaces",value:function(){for(;this.text[this.index]===" "&&this.index<=this.textLength;)this.index++}},{key:"getIndex",value:function(){return this.index}},{key:"getNextToken",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:".";if(this._skipSpaces(),this.textLength===this.index)return this.token.type="EOT",this.token;if(s.isDigit(this.text[this.index]))return this.token.type="num",this.token.value=this._getNumber(t),this.token;switch(this.token.type="Error",this.text[this.index]){case"+":this.token.type="+";break;case"-":this.token.type="-";break;case"*":this.token.type="*";break;case"/":this.token.type="/";break;case"(":this.token.type="(";break;case")":this.token.type=")"}if(this.token.type==="Error")throw new Error("Unexpected token '".concat(this.token.symbol,"' at position '").concat(this.token.index,"' in the token function"));return this.token.symbol=this.text[this.index],this.index++,this.token}},{key:"_getNumber",value:function(t){this._skipSpaces();for(var o=this.index;this.index<=this.textLength&&s.isDigit(this.text[this.index]);)this.index++;for(this.text[this.index]===t&&this.index++;this.index<=this.textLength&&s.isDigit(this.text[this.index]);)this.index++;if(this.index===o)throw new Error("No number has been found while it was expected");return this.text.substring(o,this.index).replace(t,".")}}],x&&U(w.prototype,x),N&&U(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();function G(m){return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},G(m)}function he(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,(t=N.key,o=void 0,o=function(d,u){if(G(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var b=p.call(d,u||"default");if(G(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}(t,"string"),G(o)==="symbol"?o:String(o)),N)}var t,o}var at=function(){function m(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".";return function(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}(this,m),this.text=t,this.decimalCharacter=o,this.lexer=new W(t),this.token=this.lexer.getNextToken(this.decimalCharacter),this._exp()}var w,x,N;return w=m,(x=[{key:"_exp",value:function(){var t=this._term(),o=this._moreExp();return I.createNode("op_+",t,o)}},{key:"_moreExp",value:function(){var t,o;switch(this.token.type){case"+":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._term(),o=this._moreExp(),I.createNode("op_+",o,t);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._term(),o=this._moreExp(),I.createNode("op_-",o,t)}return I.createLeaf(0)}},{key:"_term",value:function(){var t=this._factor(),o=this._moreTerms();return I.createNode("op_*",t,o)}},{key:"_moreTerms",value:function(){var t,o;switch(this.token.type){case"*":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._factor(),o=this._moreTerms(),I.createNode("op_*",o,t);case"/":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._factor(),o=this._moreTerms(),I.createNode("op_/",o,t)}return I.createLeaf(1)}},{key:"_factor",value:function(){var t,o,d;switch(this.token.type){case"num":return d=this.token.value,this.token=this.lexer.getNextToken(this.decimalCharacter),I.createLeaf(d);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),o=this._factor(),I.createUnaryNode(o);case"(":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._exp(),this._match(")"),t;default:throw new Error("Unexpected token '".concat(this.token.symbol,"' with type '").concat(this.token.type,"' at position '").concat(this.token.index,"' in the factor function"))}}},{key:"_match",value:function(t){var o=this.lexer.getIndex()-1;if(this.text[o]!==t)throw new Error("Unexpected token '".concat(this.token.symbol,"' at position '").concat(o,"' in the match function"));this.token=this.lexer.getNextToken(this.decimalCharacter)}}])&&he(w.prototype,x),N&&he(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();function Ge(m){return function(w){if(Array.isArray(w))return dn(w)}(m)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(m)||mr(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(m,w){return function(x){if(Array.isArray(x))return x}(m)||function(x,N){var t=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(t!=null){var o,d,u,p,b=[],S=!0,k=!1;try{if(u=(t=t.call(x)).next,N===0){if(Object(t)!==t)return;S=!1}else for(;!(S=(o=u.call(t)).done)&&(b.push(o.value),b.length!==N);S=!0);}catch(A){k=!0,d=A}finally{try{if(!S&&t.return!=null&&(p=t.return(),Object(p)!==p))return}finally{if(k)throw d}}return b}}(m,w)||mr(m,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mr(m,w){if(m){if(typeof m=="string")return dn(m,w);var x=Object.prototype.toString.call(m).slice(8,-1);return x==="Object"&&m.constructor&&(x=m.constructor.name),x==="Map"||x==="Set"?Array.from(m):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?dn(m,w):void 0}}function dn(m,w){(w==null||w>m.length)&&(w=m.length);for(var x=0,N=new Array(w);x<w;x++)N[x]=m[x];return N}function de(){return de=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(m[N]=x[N])}return m},de.apply(this,arguments)}function ae(m){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},ae(m)}function hr(m,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,gr(N.key),N)}}function wt(m,w,x){return(w=gr(w))in m?Object.defineProperty(m,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[w]=x,m}function gr(m){var w=function(x,N){if(ae(x)!=="object"||x===null)return x;var t=x[Symbol.toPrimitive];if(t!==void 0){var o=t.call(x,N||"default");if(ae(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(x)}(m,"string");return ae(w)==="symbol"?w:String(w)}var ke,C=function(){function m(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;(function(y,B){if(!(y instanceof B))throw new TypeError("Cannot call a class as a function")})(this,m);var p=m._setArgumentsValues(o,d,u),b=p.domElement,S=p.initialValue,k=p.userOptions;if(this.domElement=b,this.defaultRawValue="",this._setSettings(k,!1),this._checkElement(),this.savedCancellableValue=null,this.historyTable=[],this.historyTableIndex=-1,this.onGoingRedo=!1,this.parentForm=this._getParentForm(),!this.runOnce&&this.settings.formatOnPageLoad)this._formatDefaultValueOnPageLoad(S);else{var A;if(s.isNull(S))switch(this.settings.emptyInputBehavior){case m.options.emptyInputBehavior.min:A=this.settings.minimumValue;break;case m.options.emptyInputBehavior.max:A=this.settings.maximumValue;break;case m.options.emptyInputBehavior.zero:A="0";break;case m.options.emptyInputBehavior.focus:case m.options.emptyInputBehavior.press:case m.options.emptyInputBehavior.always:A="";break;case m.options.emptyInputBehavior.null:A=null;break;default:A=this.settings.emptyInputBehavior}else A=S;this._setElementAndRawValue(A)}this.runOnce=!0,this.hasEventListeners=!1,(this.isInputElement||this.isContentEditable)&&(this.settings.noEventListeners||this._createEventListeners(),this._setWritePermissions(!0)),this._saveInitialValues(S),this.storageNamePrefix="AUTO_",this._setPersistentStorageName(),this.validState=!0,this.isFocused=!1,this.isWheelEvent=!1,this.isDropEvent=!1,this.isEditing=!1,this.rawValueOnFocus=void 0,this.internalModification=!1,this.attributeToWatch=this._getAttributeToWatch(),this.getterSetter=Object.getOwnPropertyDescriptor(this.domElement.__proto__,this.attributeToWatch),this._addWatcher(),this.settings.createLocalList&&this._createLocalList(),this.constructor._addToGlobalList(this),this.global={set:function(y){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;t.autoNumericLocalList.forEach(function(T){T.set(y,B)})},setUnformatted:function(y){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;t.autoNumericLocalList.forEach(function(T){T.setUnformatted(y,B)})},get:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=[];return t.autoNumericLocalList.forEach(function(T){B.push(T.get())}),t._executeCallback(B,y),B},getNumericString:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=[];return t.autoNumericLocalList.forEach(function(T){B.push(T.getNumericString())}),t._executeCallback(B,y),B},getFormatted:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=[];return t.autoNumericLocalList.forEach(function(T){B.push(T.getFormatted())}),t._executeCallback(B,y),B},getNumber:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=[];return t.autoNumericLocalList.forEach(function(T){B.push(T.getNumber())}),t._executeCallback(B,y),B},getLocalized:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=[];return t.autoNumericLocalList.forEach(function(T){B.push(T.getLocalized())}),t._executeCallback(B,y),B},reformat:function(){t.autoNumericLocalList.forEach(function(y){y.reformat()})},unformat:function(){t.autoNumericLocalList.forEach(function(y){y.unformat()})},unformatLocalized:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;t.autoNumericLocalList.forEach(function(B){B.unformatLocalized(y)})},update:function(){for(var y=arguments.length,B=new Array(y),T=0;T<y;T++)B[T]=arguments[T];t.autoNumericLocalList.forEach(function(V){V.update.apply(V,B)})},isPristine:function(){var y=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],B=!0;return t.autoNumericLocalList.forEach(function(T){B&&!T.isPristine(y)&&(B=!1)}),B},clear:function(){var y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];t.autoNumericLocalList.forEach(function(B){B.clear(y)})},remove:function(){t.autoNumericLocalList.forEach(function(y){y.remove()})},wipe:function(){t.autoNumericLocalList.forEach(function(y){y.wipe()})},nuke:function(){t.autoNumericLocalList.forEach(function(y){y.nuke()})},has:function(y){return y instanceof m?t.autoNumericLocalList.has(y.node()):t.autoNumericLocalList.has(y)},addObject:function(y){var B,T;y instanceof m?(B=y.node(),T=y):(B=y,T=m.getAutoNumericElement(B)),t._hasLocalList()||t._createLocalList();var V,R=T._getLocalList();R.size===0&&(T._createLocalList(),R=T._getLocalList()),R instanceof Map?V=s.mergeMaps(t._getLocalList(),R):(t._addToLocalList(B,T),V=t._getLocalList()),V.forEach(function(z){z._setLocalList(V)})},removeObject:function(y){var B,T,V=arguments.length>1&&arguments[1]!==void 0&&arguments[1];y instanceof m?(B=y.node(),T=y):(B=y,T=m.getAutoNumericElement(B));var R=t.autoNumericLocalList;t.autoNumericLocalList.delete(B),R.forEach(function(z){z._setLocalList(t.autoNumericLocalList)}),V||B!==t.node()?T._createLocalList():T._setLocalList(new Map)},empty:function(){var y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];t.autoNumericLocalList.forEach(function(B){y?B._createLocalList():B._setLocalList(new Map)})},elements:function(){var y=[];return t.autoNumericLocalList.forEach(function(B){y.push(B.node())}),y},getList:function(){return t.autoNumericLocalList},size:function(){return t.autoNumericLocalList.size}},this.options={reset:function(){return t.settings={rawValue:t.defaultRawValue},t.update(m.defaultSettings),t},allowDecimalPadding:function(y){return t.update({allowDecimalPadding:y}),t},alwaysAllowDecimalCharacter:function(y){return t.update({alwaysAllowDecimalCharacter:y}),t},caretPositionOnFocus:function(y){return t.settings.caretPositionOnFocus=y,t},createLocalList:function(y){return t.settings.createLocalList=y,t.settings.createLocalList?t._hasLocalList()||t._createLocalList():t._deleteLocalList(),t},currencySymbol:function(y){return t.update({currencySymbol:y}),t},currencySymbolPlacement:function(y){return t.update({currencySymbolPlacement:y}),t},decimalCharacter:function(y){return t.update({decimalCharacter:y}),t},decimalCharacterAlternative:function(y){return t.settings.decimalCharacterAlternative=y,t},decimalPlaces:function(y){return s.warning("Using `options.decimalPlaces()` instead of calling the specific `options.decimalPlacesRawValue()`, `options.decimalPlacesShownOnFocus()` and `options.decimalPlacesShownOnBlur()` methods will reset those options.\nPlease call the specific methods if you do not want to reset those.",t.settings.showWarnings),t.update({decimalPlaces:y}),t},decimalPlacesRawValue:function(y){return t.update({decimalPlacesRawValue:y}),t},decimalPlacesShownOnBlur:function(y){return t.update({decimalPlacesShownOnBlur:y}),t},decimalPlacesShownOnFocus:function(y){return t.update({decimalPlacesShownOnFocus:y}),t},defaultValueOverride:function(y){return t.update({defaultValueOverride:y}),t},digitalGroupSpacing:function(y){return t.update({digitalGroupSpacing:y}),t},digitGroupSeparator:function(y){return t.update({digitGroupSeparator:y}),t},divisorWhenUnfocused:function(y){return t.update({divisorWhenUnfocused:y}),t},emptyInputBehavior:function(y){return t.rawValue===null&&y!==m.options.emptyInputBehavior.null&&(s.warning("You are trying to modify the `emptyInputBehavior` option to something different than `'null'` (".concat(y,"), but the element raw value is currently set to `null`. This would result in an invalid `rawValue`. In order to fix that, the element value has been changed to the empty string `''`."),t.settings.showWarnings),t.rawValue=""),t.update({emptyInputBehavior:y}),t},eventBubbles:function(y){return t.settings.eventBubbles=y,t},eventIsCancelable:function(y){return t.settings.eventIsCancelable=y,t},failOnUnknownOption:function(y){return t.settings.failOnUnknownOption=y,t},formatOnPageLoad:function(y){return t.settings.formatOnPageLoad=y,t},formulaMode:function(y){return t.settings.formulaMode=y,t},historySize:function(y){return t.settings.historySize=y,t},invalidClass:function(y){return t.settings.invalidClass=y,t},isCancellable:function(y){return t.settings.isCancellable=y,t},leadingZero:function(y){return t.update({leadingZero:y}),t},maximumValue:function(y){return t.update({maximumValue:y}),t},minimumValue:function(y){return t.update({minimumValue:y}),t},modifyValueOnUpDownArrow:function(y){return t.settings.modifyValueOnUpDownArrow=y,t},modifyValueOnWheel:function(y){return t.settings.modifyValueOnWheel=y,t},negativeBracketsTypeOnBlur:function(y){return t.update({negativeBracketsTypeOnBlur:y}),t},negativePositiveSignPlacement:function(y){return t.update({negativePositiveSignPlacement:y}),t},negativeSignCharacter:function(y){return t.update({negativeSignCharacter:y}),t},negativePositiveSignBehavior:function(y){return t.settings.negativePositiveSignBehavior=y,t},noEventListeners:function(y){return y===m.options.noEventListeners.noEvents&&t.settings.noEventListeners===m.options.noEventListeners.addEvents&&t._removeEventListeners(),t.update({noEventListeners:y}),t},onInvalidPaste:function(y){return t.settings.onInvalidPaste=y,t},outputFormat:function(y){return t.settings.outputFormat=y,t},overrideMinMaxLimits:function(y){return t.update({overrideMinMaxLimits:y}),t},positiveSignCharacter:function(y){return t.update({positiveSignCharacter:y}),t},rawValueDivisor:function(y){return t.update({rawValueDivisor:y}),t},readOnly:function(y){return t.settings.readOnly=y,t._setWritePermissions(),t},roundingMethod:function(y){return t.update({roundingMethod:y}),t},saveValueToSessionStorage:function(y){return t.update({saveValueToSessionStorage:y}),t},symbolWhenUnfocused:function(y){return t.update({symbolWhenUnfocused:y}),t},selectNumberOnly:function(y){return t.settings.selectNumberOnly=y,t},selectOnFocus:function(y){return t.settings.selectOnFocus=y,t},serializeSpaces:function(y){return t.settings.serializeSpaces=y,t},showOnlyNumbersOnFocus:function(y){return t.update({showOnlyNumbersOnFocus:y}),t},showPositiveSign:function(y){return t.update({showPositiveSign:y}),t},showWarnings:function(y){return t.settings.showWarnings=y,t},styleRules:function(y){return t.update({styleRules:y}),t},suffixText:function(y){return t.update({suffixText:y}),t},unformatOnHover:function(y){return t.settings.unformatOnHover=y,t},unformatOnSubmit:function(y){return t.settings.unformatOnSubmit=y,t},upDownStep:function(y){return t.settings.upDownStep=y,t},valuesToStrings:function(y){return t.update({valuesToStrings:y}),t},watchExternalChanges:function(y){return t.update({watchExternalChanges:y}),t},wheelOn:function(y){return t.settings.wheelOn=y,t},wheelStep:function(y){return t.settings.wheelStep=y,t}},this._triggerEvent(m.events.initialized,this.domElement,{newValue:s.getElementValue(this.domElement),newRawValue:this.rawValue,error:null,aNElement:this})}var w,x,N;return w=m,x=[{key:"_saveInitialValues",value:function(t){this.initialValueHtmlAttribute=s.scientificToDecimal(this.domElement.getAttribute("value")),s.isNull(this.initialValueHtmlAttribute)&&(this.initialValueHtmlAttribute=""),this.initialValue=t,s.isNull(this.initialValue)&&(this.initialValue="")}},{key:"_createEventListeners",value:function(){var t=this;this.formulaMode=!1,this._onFocusInFunc=function(o){t._onFocusIn(o)},this._onFocusInAndMouseEnterFunc=function(o){t._onFocusInAndMouseEnter(o)},this._onFocusFunc=function(){t._onFocus()},this._onKeydownFunc=function(o){t._onKeydown(o)},this._onKeypressFunc=function(o){t._onKeypress(o)},this._onKeyupFunc=function(o){t._onKeyup(o)},this._onFocusOutAndMouseLeaveFunc=function(o){t._onFocusOutAndMouseLeave(o)},this._onPasteFunc=function(o){t._onPaste(o)},this._onWheelFunc=function(o){t._onWheel(o)},this._onDropFunc=function(o){t._onDrop(o)},this._onKeydownGlobalFunc=function(o){t._onKeydownGlobal(o)},this._onKeyupGlobalFunc=function(o){t._onKeyupGlobal(o)},this.domElement.addEventListener("focusin",this._onFocusInFunc,!1),this.domElement.addEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("focus",this._onFocusFunc,!1),this.domElement.addEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("keydown",this._onKeydownFunc,!1),this.domElement.addEventListener("keypress",this._onKeypressFunc,!1),this.domElement.addEventListener("keyup",this._onKeyupFunc,!1),this.domElement.addEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("paste",this._onPasteFunc,!1),this.domElement.addEventListener("wheel",this._onWheelFunc,!1),this.domElement.addEventListener("drop",this._onDropFunc,!1),this._setupFormListener(),this.hasEventListeners=!0,m._doesGlobalListExists()||(document.addEventListener("keydown",this._onKeydownGlobalFunc,!1),document.addEventListener("keyup",this._onKeyupGlobalFunc,!1))}},{key:"_removeEventListeners",value:function(){this.domElement.removeEventListener("focusin",this._onFocusInFunc,!1),this.domElement.removeEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("focus",this._onFocusFunc,!1),this.domElement.removeEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("keydown",this._onKeydownFunc,!1),this.domElement.removeEventListener("keypress",this._onKeypressFunc,!1),this.domElement.removeEventListener("keyup",this._onKeyupFunc,!1),this.domElement.removeEventListener("paste",this._onPasteFunc,!1),this.domElement.removeEventListener("wheel",this._onWheelFunc,!1),this.domElement.removeEventListener("drop",this._onDropFunc,!1),this._removeFormListener(),this.hasEventListeners=!1,document.removeEventListener("keydown",this._onKeydownGlobalFunc,!1),document.removeEventListener("keyup",this._onKeyupGlobalFunc,!1)}},{key:"_updateEventListeners",value:function(){this.settings.noEventListeners||this.hasEventListeners||this._createEventListeners(),this.settings.noEventListeners&&this.hasEventListeners&&this._removeEventListeners()}},{key:"_setupFormListener",value:function(){var t=this;s.isNull(this.parentForm)||(this._onFormSubmitFunc=function(){t._onFormSubmit()},this._onFormResetFunc=function(){t._onFormReset()},this._hasParentFormCounter()?this._incrementParentFormCounter():(this._initializeFormCounterToOne(),this.parentForm.addEventListener("submit",this._onFormSubmitFunc,!1),this.parentForm.addEventListener("reset",this._onFormResetFunc,!1),this._storeFormHandlerFunction()))}},{key:"_removeFormListener",value:function(){if(!s.isNull(this.parentForm)){var t=this._getParentFormCounter();t===1?(this.parentForm.removeEventListener("submit",this._getFormHandlerFunction().submitFn,!1),this.parentForm.removeEventListener("reset",this._getFormHandlerFunction().resetFn,!1),this._removeFormDataSetInfo()):t>1?this._decrementParentFormCounter():s.throwError("The AutoNumeric object count on the form is incoherent.")}}},{key:"_hasParentFormCounter",value:function(){return"anCount"in this.parentForm.dataset}},{key:"_getParentFormCounter",value:function(){return Number(this.parentForm.dataset.anCount)}},{key:"_initializeFormCounterToOne",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this._getFormElement(t).dataset.anCount=1}},{key:"_incrementParentFormCounter",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this._getFormElement(t).dataset.anCount++}},{key:"_decrementParentFormCounter",value:function(){this.parentForm.dataset.anCount--}},{key:"_hasFormHandlerFunction",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return"anFormHandler"in this._getFormElement(t).dataset}},{key:"_getFormElement",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return s.isNull(t)?this.parentForm:t}},{key:"_storeFormHandlerFunction",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.constructor._doesFormHandlerListExists()||this.constructor._createFormHandlerList();var o=s.randomString();this._getFormElement(t).dataset.anFormHandler=o,window.aNFormHandlerMap.set(o,{submitFn:this._onFormSubmitFunc,resetFn:this._onFormResetFunc})}},{key:"_getFormHandlerKey",value:function(){this._hasFormHandlerFunction()||s.throwError("Unable to retrieve the form handler name");var t=this.parentForm.dataset.anFormHandler;return t===""&&s.throwError("The form handler name is invalid"),t}},{key:"_getFormHandlerFunction",value:function(){var t=this._getFormHandlerKey();return window.aNFormHandlerMap.get(t)}},{key:"_removeFormDataSetInfo",value:function(){this._decrementParentFormCounter(),window.aNFormHandlerMap.delete(this._getFormHandlerKey()),this.parentForm.removeAttribute("data-an-count"),this.parentForm.removeAttribute("data-an-form-handler")}},{key:"_setWritePermissions",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.domElement.readOnly||this.settings.readOnly?this._setReadOnly():this._setReadWrite()}},{key:"_setReadOnly",value:function(){this.isInputElement?this.domElement.readOnly=!0:this.domElement.setAttribute("contenteditable",!1)}},{key:"_setReadWrite",value:function(){this.isInputElement?this.domElement.readOnly=!1:this.domElement.setAttribute("contenteditable",!0)}},{key:"_addWatcher",value:function(){var t=this;if(!s.isUndefined(this.getterSetter)){var o=this.getterSetter,d=o.set,u=o.get;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:function(){return u.call(t.domElement)},set:function(p){d.call(t.domElement,p),t.settings.watchExternalChanges&&!t.internalModification&&t.set(p)}})}}},{key:"_removeWatcher",value:function(){var t=this;if(!s.isUndefined(this.getterSetter)){var o=this.getterSetter,d=o.set,u=o.get;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:function(){return u.call(t.domElement)},set:function(p){d.call(t.domElement,p)}})}}},{key:"_getAttributeToWatch",value:function(){var t;if(this.isInputElement)t="value";else{var o=this.domElement.nodeType;o===Node.ELEMENT_NODE||o===Node.DOCUMENT_NODE||o===Node.DOCUMENT_FRAGMENT_NODE?t="textContent":o===Node.TEXT_NODE&&(t="nodeValue")}return t}},{key:"_historyTableAdd",value:function(){var t=this.historyTable.length===0;if(t||this.rawValue!==this._historyTableCurrentValueUsed()){var o=!0;if(!t){var d=this.historyTableIndex+1;d<this.historyTable.length&&this.rawValue===this.historyTable[d].value?o=!1:s.arrayTrim(this.historyTable,this.historyTableIndex+1)}if(this.historyTableIndex++,o){var u=s.getElementSelection(this.domElement);this.selectionStart=u.start,this.selectionEnd=u.end,this.historyTable.push({value:this.rawValue,start:this.selectionStart+1,end:this.selectionEnd+1}),this.historyTable.length>1&&(this.historyTable[this.historyTableIndex-1].start=this.selectionStart,this.historyTable[this.historyTableIndex-1].end=this.selectionEnd)}this.historyTable.length>this.settings.historySize&&this._historyTableForget()}}},{key:"_historyTableUndoOrRedo",value:function(){var t;if(arguments.length>0&&arguments[0]!==void 0&&!arguments[0]?(t=this.historyTableIndex+1<this.historyTable.length)&&this.historyTableIndex++:(t=this.historyTableIndex>0)&&this.historyTableIndex--,t){var o=this.historyTable[this.historyTableIndex];this.set(o.value,null,!1),s.setElementSelection(this.domElement,o.start,o.end)}}},{key:"_historyTableUndo",value:function(){this._historyTableUndoOrRedo(!0)}},{key:"_historyTableRedo",value:function(){this._historyTableUndoOrRedo(!1)}},{key:"_historyTableForget",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,o=[],d=0;d<t;d++)o.push(this.historyTable.shift()),this.historyTableIndex--,this.historyTableIndex<0&&(this.historyTableIndex=0);return o.length===1?o[0]:o}},{key:"_historyTableCurrentValueUsed",value:function(){var t=this.historyTableIndex;return t<0&&(t=0),s.isUndefinedOrNullOrEmpty(this.historyTable[t])?"":this.historyTable[t].value}},{key:"_parseStyleRules",value:function(){var t=this;s.isUndefinedOrNullOrEmpty(this.settings.styleRules)||this.rawValue===""||(s.isUndefinedOrNullOrEmpty(this.settings.styleRules.positive)||(this.rawValue>=0?this._addCSSClass(this.settings.styleRules.positive):this._removeCSSClass(this.settings.styleRules.positive)),s.isUndefinedOrNullOrEmpty(this.settings.styleRules.negative)||(this.rawValue<0?this._addCSSClass(this.settings.styleRules.negative):this._removeCSSClass(this.settings.styleRules.negative)),s.isUndefinedOrNullOrEmpty(this.settings.styleRules.ranges)||this.settings.styleRules.ranges.length===0||this.settings.styleRules.ranges.forEach(function(o){t.rawValue>=o.min&&t.rawValue<o.max?t._addCSSClass(o.class):t._removeCSSClass(o.class)}),s.isUndefinedOrNullOrEmpty(this.settings.styleRules.userDefined)||this.settings.styleRules.userDefined.length===0||this.settings.styleRules.userDefined.forEach(function(o){if(s.isFunction(o.callback))if(s.isString(o.classes))o.callback(t.rawValue)?t._addCSSClass(o.classes):t._removeCSSClass(o.classes);else if(s.isArray(o.classes))if(o.classes.length===2)o.callback(t.rawValue)?(t._addCSSClass(o.classes[0]),t._removeCSSClass(o.classes[1])):(t._removeCSSClass(o.classes[0]),t._addCSSClass(o.classes[1]));else if(o.classes.length>2){var d=o.callback(t.rawValue);s.isArray(d)?o.classes.forEach(function(u,p){s.isInArray(p,d)?t._addCSSClass(u):t._removeCSSClass(u)}):s.isInt(d)?o.classes.forEach(function(u,p){p===d?t._addCSSClass(u):t._removeCSSClass(u)}):s.isNull(d)?o.classes.forEach(function(u){t._removeCSSClass(u)}):s.throwError("The callback result is not an array nor a valid array index, ".concat(ae(d)," given."))}else s.throwError("The classes attribute is not valid for the `styleRules` option.");else s.isUndefinedOrNullOrEmpty(o.classes)?o.callback(t):s.throwError("The callback/classes structure is not valid for the `styleRules` option.");else s.warning("The given `styleRules` callback is not a function, ".concat(ae(o.callback)," given."),t.settings.showWarnings)}))}},{key:"_addCSSClass",value:function(t){this.domElement.classList.add(t)}},{key:"_removeCSSClass",value:function(t){this.domElement.classList.remove(t)}},{key:"update",value:function(){for(var t=this,o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];Array.isArray(d)&&Array.isArray(d[0])&&(d=d[0]);var p=s.cloneObject(this.settings),b=this.rawValue,S={};s.isUndefinedOrNullOrEmpty(d)||d.length===0?S=null:d.length>=1&&d.forEach(function(k){t.constructor._isPreDefinedOptionValid(k)&&(k=t.constructor._getOptionObject(k)),de(S,k)});try{this._setSettings(S,!0),this._setWritePermissions(),this._updateEventListeners(),this.set(b)}catch(k){return this._setSettings(p,!0),s.throwError("Unable to update the settings, those are invalid: [".concat(k,"]")),this}return this}},{key:"getSettings",value:function(){return this.settings}},{key:"set",value:function(t){var o,d,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(s.isUndefined(t))return s.warning("You are trying to set an 'undefined' value ; an error could have occurred.",this.settings.showWarnings),this;if(s.isNull(u)||this._setSettings(u,!0),t===null&&this.settings.emptyInputBehavior!==m.options.emptyInputBehavior.null)return s.warning("You are trying to set the `null` value while the `emptyInputBehavior` option is set to ".concat(this.settings.emptyInputBehavior,". If you want to be able to set the `null` value, you need to change the 'emptyInputBehavior' option to `'null'`."),this.settings.showWarnings),this;if(t===null)return this._setElementAndRawValue(null,null,p),this._saveValueToPersistentStorage(),this;if(o=this.constructor._toNumericValue(t,this.settings),isNaN(Number(o)))return s.warning("The value you are trying to set results in `NaN`. The element value is set to the empty string instead.",this.settings.showWarnings),this.setValue("",p),this;if(o==="")switch(this.settings.emptyInputBehavior){case m.options.emptyInputBehavior.zero:o=0;break;case m.options.emptyInputBehavior.min:o=this.settings.minimumValue;break;case m.options.emptyInputBehavior.max:o=this.settings.maximumValue;break;default:s.isNumber(this.settings.emptyInputBehavior)&&(o=Number(this.settings.emptyInputBehavior))}if(o!==""){var b=q(this.constructor._checkIfInRangeWithOverrideOption(o,this.settings),2),S=b[0],k=b[1];if(S&&k&&this.settings.valuesToStrings&&this._checkValuesToStrings(o))return this._setElementAndRawValue(this.settings.valuesToStrings[o],o,p),this._saveValueToPersistentStorage(),this;if(s.isZeroOrHasNoValue(o)&&(o="0"),S&&k){var A=this.constructor._roundRawValue(o,this.settings);return A=this._trimLeadingAndTrailingZeros(A.replace(this.settings.decimalCharacter,".")),o=this._getRawValueToFormat(o),this.isFocused?o=this.constructor._roundFormattedValueShownOnFocus(o,this.settings):(this.settings.divisorWhenUnfocused&&(o=(o/=this.settings.divisorWhenUnfocused).toString()),o=this.constructor._roundFormattedValueShownOnBlur(o,this.settings)),o=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(o,this.settings),o=this.constructor._addGroupSeparators(o,this.settings,this.isFocused,this.rawValue,A),!this.isFocused&&this.settings.symbolWhenUnfocused&&(o="".concat(o).concat(this.settings.symbolWhenUnfocused)),(this.settings.decimalPlacesShownOnFocus||this.settings.divisorWhenUnfocused)&&this._saveValueToPersistentStorage(),this._setElementAndRawValue(o,A,p),this._setValidOrInvalidState(A),this}return this._triggerRangeEvents(S,k),s.throwError("The value [".concat(o,"] being set falls outside of the minimumValue [").concat(this.settings.minimumValue,"] and maximumValue [").concat(this.settings.maximumValue,"] range set for this element")),this._removeValueFromPersistentStorage(),this.setValue("",p),this}return d=this.settings.emptyInputBehavior===m.options.emptyInputBehavior.always?this.settings.currencySymbol:"",this._setElementAndRawValue(d,"",p),this}},{key:"setUnformatted",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t===null||s.isUndefined(t))return this;s.isNull(o)||this._setSettings(o,!0);var d=this.constructor._removeBrackets(t,this.settings),u=this.constructor._stripAllNonNumberCharacters(d,this.settings,!0,this.isFocused);return s.isNumber(u)||s.throwError("The value is not a valid one, it's not a numeric string nor a recognized currency."),this.constructor._isWithinRangeWithOverrideOption(u,this.settings)?this.setValue(t):s.throwError("The value is out of the range limits [".concat(this.settings.minimumValue,", ").concat(this.settings.maximumValue,"].")),this}},{key:"setValue",value:function(t){var o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this._setElementAndRawValue(t,o),this}},{key:"_setRawValue",value:function(t){var o=this,d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.rawValue!==t){var u=this.rawValue;this.rawValue=t,!s.isNull(this.settings.rawValueDivisor)&&this.settings.rawValueDivisor!==0&&t!==""&&t!==null&&this._isUserManuallyEditingTheValue()&&(this.rawValue/=this.settings.rawValueDivisor),this._triggerEvent(m.events.rawValueModified,this.domElement,{oldRawValue:u,newRawValue:this.rawValue,isPristine:this.isPristine(!0),error:null,aNElement:this}),this._parseStyleRules(),d&&window.requestAnimationFrame(function(){return o._historyTableAdd()})}}},{key:"_setElementValue",value:function(t){var o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],d=s.getElementValue(this.domElement);return t!==d&&(this.internalModification=!0,s.setElementValue(this.domElement,t),this.internalModification=!1,o&&this._triggerEvent(m.events.formatted,this.domElement,{oldValue:d,newValue:t,oldRawValue:this.rawValue,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this})),this}},{key:"_setElementAndRawValue",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return s.isNull(o)?o=t:s.isBoolean(o)&&(d=o,o=t),this._setElementValue(t),this._setRawValue(o,d),this}},{key:"_getRawValueToFormat",value:function(t){return s.isNull(this.settings.rawValueDivisor)||this.settings.rawValueDivisor===0||t===""||t===null?t:t*this.settings.rawValueDivisor}},{key:"_checkValuesToStrings",value:function(t){return this.constructor._checkValuesToStringsArray(t,this.valuesToStringsKeys)}},{key:"_isUserManuallyEditingTheValue",value:function(){return this.isFocused&&this.isEditing||this.isDropEvent}},{key:"_executeCallback",value:function(t,o){!s.isNull(o)&&s.isFunction(o)&&o(t,this)}},{key:"_triggerEvent",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;s.triggerEvent(t,o,d,this.settings.eventBubbles,this.settings.eventIsCancelable)}},{key:"get",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.getNumericString(t)}},{key:"getNumericString",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=s.isNull(this.rawValue)?null:s.trimPaddedZerosFromDecimalPlaces(this.rawValue),this._executeCallback(t,o),t}},{key:"getFormatted",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;"value"in this.domElement||"textContent"in this.domElement||s.throwError("Unable to get the formatted string from the element.");var o=s.getElementValue(this.domElement);return this._executeCallback(o,t),o}},{key:"getNumber",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=this.rawValue===null?null:this.constructor._toLocale(this.getNumericString(),"number",this.settings),this._executeCallback(t,o),t}},{key:"getLocalized",value:function(){var t,o,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;s.isFunction(d)&&s.isNull(u)&&(u=d,d=null),(t=s.isEmptyString(this.rawValue)?"":""+Number(this.rawValue))!=""&&Number(t)===0&&this.settings.leadingZero!==m.options.leadingZero.keep&&(t="0"),o=s.isNull(d)?this.settings.outputFormat:d;var p=this.constructor._toLocale(t,o,this.settings);return this._executeCallback(p,u),p}},{key:"reformat",value:function(){return this.set(this.rawValue),this}},{key:"unformat",value:function(){return this._setElementValue(this.getNumericString()),this}},{key:"unformatLocalized",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._setElementValue(this.getLocalized(t)),this}},{key:"isPristine",value:function(){return arguments.length>0&&arguments[0]!==void 0&&!arguments[0]?this.initialValueHtmlAttribute===this.getFormatted():this.initialValue===this.getNumericString()}},{key:"select",value:function(){return this.settings.selectNumberOnly?this.selectNumber():this._defaultSelectAll(),this}},{key:"_defaultSelectAll",value:function(){s.setElementSelection(this.domElement,0,s.getElementValue(this.domElement).length)}},{key:"selectNumber",value:function(){var t,o,d=s.getElementValue(this.domElement),u=d.length,p=this.settings.currencySymbol.length,b=this.settings.currencySymbolPlacement,S=s.isNegative(d,this.settings.negativeSignCharacter)?1:0,k=this.settings.suffixText.length;if(t=b===m.options.currencySymbolPlacement.suffix?0:this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.left&&S===1&&p>0?p+1:p,b===m.options.currencySymbolPlacement.prefix)o=u-k;else switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.left:o=u-(k+p);break;case m.options.negativePositiveSignPlacement.right:o=p>0?u-(p+S+k):u-(p+k);break;default:o=u-(p+k)}return s.setElementSelection(this.domElement,t,o),this}},{key:"selectInteger",value:function(){var t=0,o=this.rawValue>=0;this.settings.currencySymbolPlacement!==m.options.currencySymbolPlacement.prefix&&(this.settings.currencySymbolPlacement!==m.options.currencySymbolPlacement.suffix||this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.prefix&&this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none)||(this.settings.showPositiveSign&&o||!o&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.left)&&(t+=1),this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&(t+=this.settings.currencySymbol.length);var d=s.getElementValue(this.domElement),u=d.indexOf(this.settings.decimalCharacter);return u===-1&&(u=this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix?d.length-this.settings.currencySymbol.length:d.length,o||this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.suffix&&this.settings.currencySymbolPlacement!==m.options.currencySymbolPlacement.suffix||(u-=1),u-=this.settings.suffixText.length),s.setElementSelection(this.domElement,t,u),this}},{key:"selectDecimal",value:function(){var t,o,d=s.getElementValue(this.domElement).indexOf(this.settings.decimalCharacter);return d===-1?(d=0,t=0):(d+=1,o=this.isFocused?this.settings.decimalPlacesShownOnFocus:this.settings.decimalPlacesShownOnBlur,t=d+Number(o)),s.setElementSelection(this.domElement,d,t),this}},{key:"node",value:function(){return this.domElement}},{key:"parent",value:function(){return this.domElement.parentNode}},{key:"detach",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=s.isNull(o)?this.domElement:o.node(),this._removeFromLocalList(t),this}},{key:"attach",value:function(t){var o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this._addToLocalList(t.node()),o&&t.update(this.settings),this}},{key:"formatOther",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._formatOrUnformatOther(!0,t,o)}},{key:"unformatOther",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._formatOrUnformatOther(!1,t,o)}},{key:"_formatOrUnformatOther",value:function(t,o){var d,u,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(d=s.isNull(p)?this.settings:this._cloneAndMergeSettings(p),s.isElement(o)){var b=s.getElementValue(o);return u=t?m.format(b,d):m.unformat(b,d),s.setElementValue(o,u),null}return u=t?m.format(o,d):m.unformat(o,d)}},{key:"init",value:function(t){var o=this,d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],u=!1,p=[];if(s.isString(t)?p=Ge(document.querySelectorAll(t)):s.isElement(t)?(p.push(t),u=!0):s.isArray(t)?p=t:s.throwError("The given parameters to the 'init' function are invalid."),p.length===0)return s.warning("No valid DOM elements were given hence no AutoNumeric object were instantiated.",!0),[];var b=this._getLocalList(),S=[];return p.forEach(function(k){var A=o.settings.createLocalList;d&&(o.settings.createLocalList=!1);var y=new m(k,s.getElementValue(k),o.settings);d&&(y._setLocalList(b),o._addToLocalList(k,y),o.settings.createLocalList=A),S.push(y)}),u?S[0]:S}},{key:"clear",value:function(){if(arguments.length>0&&arguments[0]!==void 0&&arguments[0]){var t={emptyInputBehavior:m.options.emptyInputBehavior.focus};this.set("",t)}else this.set("");return this}},{key:"remove",value:function(){this._removeValueFromPersistentStorage(),this._removeEventListeners(),this._removeWatcher(),this._removeFromLocalList(this.domElement),this.constructor._removeFromGlobalList(this)}},{key:"wipe",value:function(){this._setElementValue("",!1),this.remove()}},{key:"nuke",value:function(){this.remove(),this.domElement.parentNode.removeChild(this.domElement)}},{key:"form",value:function(){if(arguments.length>0&&arguments[0]!==void 0&&arguments[0]||s.isUndefinedOrNullOrEmpty(this.parentForm)){var t=this._getParentForm();if(!s.isNull(t)&&t!==this.parentForm){var o=this._getFormAutoNumericChildren(this.parentForm);this.parentForm.dataset.anCount=o.length,this._hasFormHandlerFunction(t)?this._incrementParentFormCounter(t):(this._storeFormHandlerFunction(t),this._initializeFormCounterToOne(t))}this.parentForm=t}return this.parentForm}},{key:"_getFormAutoNumericChildren",value:function(t){var o=this,d=Ge(t.elements),u=this._getContenteditableElements(t);return s.arrayUnique(d,u).filter(function(p){return o.constructor.isManagedByAutoNumeric(p)})}},{key:"_getContenteditableElements",value:function(t){if(s.isUndefinedOrNullOrEmpty(t)||!t.hasAttribute("id"))return[];var o=Ge(t.querySelectorAll("[contenteditable=true]")),d=Ge(document.querySelectorAll("*:not(input)[form=".concat(t.id,"][contenteditable=true]")));return s.arrayUnique(o,d)}},{key:"_getParentForm",value:function(){if(!s.isUndefined(this.domElement.form))return this.domElement.form;if(this.domElement.tagName.toLowerCase()==="body")return null;var t,o=this.domElement;do{if(o=o.parentNode,s.isNull(o))return null;if((t=o.tagName?o.tagName.toLowerCase():"")==="body")break}while(t!=="form");return t==="form"?o:null}},{key:"formNumericString",value:function(){return this.constructor._serializeNumericString(this.form(),this.settings.serializeSpaces)}},{key:"formFormatted",value:function(){return this.constructor._serializeFormatted(this.form(),this.settings.serializeSpaces)}},{key:"formLocalized",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=s.isNull(o)?this.settings.outputFormat:o,this.constructor._serializeLocalized(this.form(),this.settings.serializeSpaces,t)}},{key:"formArrayNumericString",value:function(){return this.constructor._serializeNumericStringArray(this.form(),this.settings.serializeSpaces)}},{key:"formArrayFormatted",value:function(){return this.constructor._serializeFormattedArray(this.form(),this.settings.serializeSpaces)}},{key:"formArrayLocalized",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=s.isNull(o)?this.settings.outputFormat:o,this.constructor._serializeLocalizedArray(this.form(),this.settings.serializeSpaces,t)}},{key:"formJsonNumericString",value:function(){return JSON.stringify(this.formArrayNumericString())}},{key:"formJsonFormatted",value:function(){return JSON.stringify(this.formArrayFormatted())}},{key:"formJsonLocalized",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return JSON.stringify(this.formArrayLocalized(t))}},{key:"formUnformat",value:function(){return this.constructor._getChildANInputElement(this.form()).forEach(function(t){m.getAutoNumericElement(t).unformat()}),this}},{key:"formUnformatLocalized",value:function(){return this.constructor._getChildANInputElement(this.form()).forEach(function(t){m.getAutoNumericElement(t).unformatLocalized()}),this}},{key:"formReformat",value:function(){return this.constructor._getChildANInputElement(this.form()).forEach(function(t){m.getAutoNumericElement(t).reformat()}),this}},{key:"formSubmitNumericString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return s.isNull(t)?(this.formUnformat(),this.form().submit(),this.formReformat()):s.isFunction(t)?t(this.formNumericString()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitFormatted",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return s.isNull(t)?this.form().submit():s.isFunction(t)?t(this.formFormatted()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitLocalized",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.isNull(o)?(this.formUnformatLocalized(),this.form().submit(),this.formReformat()):s.isFunction(o)?o(this.formLocalized(t)):s.throwError("The given callback is not a function."),this}},{key:"formSubmitArrayNumericString",value:function(t){return s.isFunction(t)?t(this.formArrayNumericString()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitArrayFormatted",value:function(t){return s.isFunction(t)?t(this.formArrayFormatted()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitArrayLocalized",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.isFunction(t)?t(this.formArrayLocalized(o)):s.throwError("The given callback is not a function."),this}},{key:"formSubmitJsonNumericString",value:function(t){return s.isFunction(t)?t(this.formJsonNumericString()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitJsonFormatted",value:function(t){return s.isFunction(t)?t(this.formJsonFormatted()):s.throwError("The given callback is not a function."),this}},{key:"formSubmitJsonLocalized",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.isFunction(t)?t(this.formJsonLocalized(o)):s.throwError("The given callback is not a function."),this}},{key:"_createLocalList",value:function(){this.autoNumericLocalList=new Map,this._addToLocalList(this.domElement)}},{key:"_deleteLocalList",value:function(){delete this.autoNumericLocalList}},{key:"_setLocalList",value:function(t){this.autoNumericLocalList=t}},{key:"_getLocalList",value:function(){return this.autoNumericLocalList}},{key:"_hasLocalList",value:function(){return this.autoNumericLocalList instanceof Map&&this.autoNumericLocalList.size!==0}},{key:"_addToLocalList",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;s.isNull(o)&&(o=this),s.isUndefined(this.autoNumericLocalList)?s.throwError("The local list provided does not exists when trying to add an element. [".concat(this.autoNumericLocalList,"] given.")):this.autoNumericLocalList.set(t,o)}},{key:"_removeFromLocalList",value:function(t){s.isUndefined(this.autoNumericLocalList)?this.settings.createLocalList&&s.throwError("The local list provided does not exists when trying to remove an element. [".concat(this.autoNumericLocalList,"] given.")):this.autoNumericLocalList.delete(t)}},{key:"_mergeSettings",value:function(){for(var t=arguments.length,o=new Array(t),d=0;d<t;d++)o[d]=arguments[d];de.apply(void 0,[this.settings].concat(o))}},{key:"_cloneAndMergeSettings",value:function(){for(var t={},o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];return de.apply(void 0,[t,this.settings].concat(d)),t}},{key:"_updatePredefinedOptions",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.isNull(o)?this.update(t):(this._mergeSettings(t,o),this.update(this.settings)),this}},{key:"french",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().French,t),this}},{key:"northAmerican",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().NorthAmerican,t),this}},{key:"british",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().British,t),this}},{key:"swiss",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().Swiss,t),this}},{key:"japanese",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().Japanese,t),this}},{key:"spanish",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().Spanish,t),this}},{key:"chinese",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().Chinese,t),this}},{key:"brazilian",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this._updatePredefinedOptions(m.getPredefinedOptions().Brazilian,t),this}},{key:"_runCallbacksFoundInTheSettingsObject",value:function(){for(var t in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,t)){var o=this.settings[t];if(typeof o=="function")this.settings[t]=o(this,t);else{var d="";t in this.domElement.dataset&&(d=this.domElement.dataset[t]),d=s.camelize(d),typeof this.settings[d]=="function"&&(this.settings[t]=d(this,t))}}}},{key:"_setTrailingNegativeSignInfo",value:function(){this.isTrailingNegative=this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.suffix||this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix&&(this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.left||this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.right)}},{key:"_modifyNegativeSignAndDecimalCharacterForRawValue",value:function(t){return this.settings.decimalCharacter!=="."&&(t=t.replace(this.settings.decimalCharacter,".")),this.settings.negativeSignCharacter!=="-"&&this.settings.isNegativeSignAllowed&&(t=t.replace(this.settings.negativeSignCharacter,"-")),t.match(/\d/)||(t+="0"),t}},{key:"_initialCaretPosition",value:function(t){s.isNull(this.settings.caretPositionOnFocus)&&this.settings.selectOnFocus===m.options.selectOnFocus.doNotSelect&&s.throwError("`_initialCaretPosition()` should never be called when the `caretPositionOnFocus` option is `null`.");var o=this.rawValue<0,d=s.isZeroOrHasNoValue(t),u=t.length,p=0,b=0,S=!1,k=0;this.settings.caretPositionOnFocus!==m.options.caretPositionOnFocus.start&&(p=(t=(t=(t=t.replace(this.settings.negativeSignCharacter,"")).replace(this.settings.positiveSignCharacter,"")).replace(this.settings.currencySymbol,"")).length,S=s.contains(t,this.settings.decimalCharacter),this.settings.caretPositionOnFocus!==m.options.caretPositionOnFocus.decimalLeft&&this.settings.caretPositionOnFocus!==m.options.caretPositionOnFocus.decimalRight||(S?(b=t.indexOf(this.settings.decimalCharacter),k=this.settings.decimalCharacter.length):(b=p,k=0)));var A="";o?A=this.settings.negativeSignCharacter:this.settings.showPositiveSign&&!d&&(A=this.settings.positiveSignCharacter);var y,B=A.length,T=this.settings.currencySymbol.length;if(this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix){if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.left:case m.options.negativePositiveSignPlacement.right:y=B+T;break;case m.options.negativePositiveSignPlacement.suffix:y=T}else y=T;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.left:case m.options.negativePositiveSignPlacement.right:y=u;break;case m.options.negativePositiveSignPlacement.suffix:y=T+p}else y=u;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.left:case m.options.negativePositiveSignPlacement.right:y=B+T+b;break;case m.options.negativePositiveSignPlacement.suffix:y=T+b}else y=T+b;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.left:case m.options.negativePositiveSignPlacement.right:y=B+T+b+k;break;case m.options.negativePositiveSignPlacement.suffix:y=T+b+k}else y=T+b+k}else if(this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix){if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.suffix:case m.options.negativePositiveSignPlacement.right:case m.options.negativePositiveSignPlacement.left:y=0;break;case m.options.negativePositiveSignPlacement.prefix:y=B}else y=0;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.suffix:case m.options.negativePositiveSignPlacement.right:case m.options.negativePositiveSignPlacement.left:y=p;break;case m.options.negativePositiveSignPlacement.prefix:y=B+p}else y=p;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.suffix:case m.options.negativePositiveSignPlacement.right:case m.options.negativePositiveSignPlacement.left:y=b;break;case m.options.negativePositiveSignPlacement.prefix:y=B+b}else y=b;else if(this.settings.caretPositionOnFocus===m.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(o||!o&&this.settings.showPositiveSign&&!d))switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.suffix:case m.options.negativePositiveSignPlacement.right:case m.options.negativePositiveSignPlacement.left:y=b+k;break;case m.options.negativePositiveSignPlacement.prefix:y=B+b+k}else y=b+k}return y}},{key:"_triggerRangeEvents",value:function(t,o){t||this._triggerEvent(m.events.minRangeExceeded,this.domElement),o||this._triggerEvent(m.events.maxRangeExceeded,this.domElement)}},{key:"_setInvalidState",value:function(){this.isInputElement?s.setInvalidState(this.domElement):this._addCSSClass(this.settings.invalidClass),this._triggerEvent(m.events.invalidValue,this.domElement),this.validState=!1}},{key:"_setValidState",value:function(){this.isInputElement?s.setValidState(this.domElement):this._removeCSSClass(this.settings.invalidClass),this.validState||this._triggerEvent(m.events.correctedValue,this.domElement),this.validState=!0}},{key:"_setValidOrInvalidState",value:function(t){if(this.settings.overrideMinMaxLimits===m.options.overrideMinMaxLimits.invalid){var o=this.constructor._isMinimumRangeRespected(t,this.settings),d=this.constructor._isMaximumRangeRespected(t,this.settings);o&&d?this._setValidState():this._setInvalidState(),this._triggerRangeEvents(o,d)}}},{key:"_keepAnOriginalSettingsCopy",value:function(){this.originalDigitGroupSeparator=this.settings.digitGroupSeparator,this.originalCurrencySymbol=this.settings.currencySymbol,this.originalSuffixText=this.settings.suffixText}},{key:"_trimLeadingAndTrailingZeros",value:function(t){if(t===""||t===null)return t;if(this.settings.leadingZero!==m.options.leadingZero.keep){if(Number(t)===0)return"0";t=t.replace(/^(-)?0+(?=\d)/g,"$1")}return s.contains(t,".")&&(t=t.replace(/(\.[0-9]*?)0+$/,"$1")),t=t.replace(/\.$/,"")}},{key:"_setPersistentStorageName",value:function(){this.settings.saveValueToSessionStorage&&(this.domElement.name===""||s.isUndefined(this.domElement.name)?this.rawValueStorageName="".concat(this.storageNamePrefix).concat(this.domElement.id):this.rawValueStorageName="".concat(this.storageNamePrefix).concat(decodeURIComponent(this.domElement.name)))}},{key:"_saveValueToPersistentStorage",value:function(){this.settings.saveValueToSessionStorage&&sessionStorage.setItem(this.rawValueStorageName,this.rawValue)}},{key:"_getValueFromPersistentStorage",value:function(){return this.settings.saveValueToSessionStorage?sessionStorage.getItem(this.rawValueStorageName):(s.warning("`_getValueFromPersistentStorage()` is called but `settings.saveValueToSessionStorage` is false. There must be an error that needs fixing.",this.settings.showWarnings),null)}},{key:"_removeValueFromPersistentStorage",value:function(){this.settings.saveValueToSessionStorage&&sessionStorage.removeItem(this.rawValueStorageName)}},{key:"_getDefaultValue",value:function(t){var o=t.getAttribute("value");return s.isNull(o)?"":o}},{key:"_onFocusInAndMouseEnter",value:function(t){if(this.isEditing=!1,!this.formulaMode&&this.settings.unformatOnHover&&t.type==="mouseenter"&&t.altKey)this.constructor._unformatAltHovered(this);else if(t.type==="focus"&&(this.isFocused=!0,this.rawValueOnFocus=this.rawValue),t.type==="focus"&&this.settings.unformatOnHover&&this.hoveredWithAlt&&this.constructor._reformatAltHovered(this),t.type==="focus"||t.type==="mouseenter"&&!this.isFocused){var o=null;this.settings.emptyInputBehavior===m.options.emptyInputBehavior.focus&&this.rawValue<0&&this.settings.negativeBracketsTypeOnBlur!==null&&this.settings.isNegativeSignAllowed&&(o=this.constructor._removeBrackets(s.getElementValue(this.domElement),this.settings));var d=this._getRawValueToFormat(this.rawValue);if(d!==""){var u=this.constructor._roundFormattedValueShownOnFocusOrBlur(d,this.settings,this.isFocused);this.settings.showOnlyNumbersOnFocus===m.options.showOnlyNumbersOnFocus.onlyNumbers?(this.settings.digitGroupSeparator="",this.settings.currencySymbol="",this.settings.suffixText="",o=u.replace(".",this.settings.decimalCharacter)):o=s.isNull(u)?"":this.constructor._addGroupSeparators(u.replace(".",this.settings.decimalCharacter),this.settings,this.isFocused,d)}s.isNull(o)?this.valueOnFocus="":this.valueOnFocus=o,this.lastVal=this.valueOnFocus;var p=this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(this.valueOnFocus,this.settings),b=this.constructor._orderValueCurrencySymbolAndSuffixText(this.valueOnFocus,this.settings,!0),S=p&&b!==""&&this.settings.emptyInputBehavior===m.options.emptyInputBehavior.focus;S&&(o=b),s.isNull(o)||this._setElementValue(o),S&&b===this.settings.currencySymbol&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix&&s.setElementSelection(t.target,0)}}},{key:"_onFocus",value:function(){this.settings.isCancellable&&this._saveCancellableValue()}},{key:"_onFocusIn",value:function(t){this.settings.selectOnFocus?this.select():s.isNull(this.settings.caretPositionOnFocus)||s.setElementSelection(t.target,this._initialCaretPosition(s.getElementValue(this.domElement)))}},{key:"_enterFormulaMode",value:function(){this.settings.formulaMode&&(this.formulaMode=!0,s.setElementValue(this.domElement,"="),s.setElementSelection(this.domElement,1))}},{key:"_exitFormulaMode",value:function(){var t,o=s.getElementValue(this.domElement);o=o.replace(/^\s*=/,"");try{var d=new at(o,this.settings.decimalCharacter);t=new P().evaluate(d)}catch{return this._triggerEvent(m.events.invalidFormula,this.domElement,{formula:o,aNElement:this}),this.reformat(),void(this.formulaMode=!1)}this._triggerEvent(m.events.validFormula,this.domElement,{formula:o,result:t,aNElement:this}),this.set(t),this.formulaMode=!1}},{key:"_acceptNonPrintableKeysInFormulaMode",value:function(){return this.eventKey===a.keyName.Backspace||this.eventKey===a.keyName.Delete||this.eventKey===a.keyName.LeftArrow||this.eventKey===a.keyName.RightArrow||this.eventKey===a.keyName.Home||this.eventKey===a.keyName.End}},{key:"_onKeydown",value:function(t){if(this.formatted=!1,this.isEditing=!0,this.formulaMode||this.isFocused||!this.settings.unformatOnHover||!t.altKey||this.domElement!==s.getHoveredElement()){if(this._updateEventKeyInfo(t),this.keydownEventCounter+=1,this.keydownEventCounter===1&&(this.initialValueOnFirstKeydown=s.getElementValue(t.target),this.initialRawValueOnFirstKeydown=this.rawValue),this.formulaMode){if(this.eventKey===a.keyName.Esc)return this.formulaMode=!1,void this.reformat();if(this.eventKey===a.keyName.Enter)return void this._exitFormulaMode();if(this._acceptNonPrintableKeysInFormulaMode())return}else{if(this.eventKey===a.keyName.Equal)return void this._enterFormulaMode();if(this.settings.modifyValueOnUpDownArrow&&(this.eventKey===a.keyName.UpArrow||this.eventKey===a.keyName.DownArrow))return void this.upDownArrowAction(t)}if(this.domElement.readOnly||this.settings.readOnly||this.domElement.disabled)this.processed=!0;else{this.eventKey===a.keyName.Esc&&(t.preventDefault(),this.settings.isCancellable&&this.rawValue!==this.savedCancellableValue&&(this.set(this.savedCancellableValue),this._triggerEvent(m.events.native.input,t.target)),this.select());var o=s.getElementValue(t.target);if(this.eventKey===a.keyName.Enter&&this.rawValue!==this.rawValueOnFocus&&(this._triggerEvent(m.events.native.change,t.target),this.valueOnFocus=o,this.rawValueOnFocus=this.rawValue,this.settings.isCancellable&&this._saveCancellableValue()),this._updateInternalProperties(t),this._processNonPrintableKeysAndShortcuts(t))this.processed=!0;else if(this.eventKey===a.keyName.Backspace||this.eventKey===a.keyName.Delete){var d=this._processCharacterDeletion(t);if(this.processed=!0,!d)return void t.preventDefault();this._formatValue(t),(o=s.getElementValue(t.target))!==this.lastVal&&this.throwInput&&(this._triggerEvent(m.events.native.input,t.target),t.preventDefault()),this.lastVal=o,this.throwInput=!0}}}else this.constructor._unformatAltHovered(this)}},{key:"_onKeypress",value:function(t){if(this.formulaMode){if(this._acceptNonPrintableKeysInFormulaMode()||this.settings.formulaChars.test(this.eventKey))return;t.preventDefault()}else if(this.eventKey!==a.keyName.Insert){var o=this.processed;if(this._updateInternalProperties(t),!this._processNonPrintableKeysAndShortcuts(t))if(o)t.preventDefault();else{if(this._processCharacterInsertion()){this._formatValue(t);var d=s.getElementValue(t.target);if(d!==this.lastVal&&this.throwInput)this._triggerEvent(m.events.native.input,t.target),t.preventDefault();else{if((this.eventKey===this.settings.decimalCharacter||this.eventKey===this.settings.decimalCharacterAlternative)&&s.getElementSelection(t.target).start===s.getElementSelection(t.target).end&&s.getElementSelection(t.target).start===d.indexOf(this.settings.decimalCharacter)){var u=s.getElementSelection(t.target).start+1;s.setElementSelection(t.target,u)}t.preventDefault()}return this.lastVal=s.getElementValue(t.target),this.throwInput=!0,void this._setValidOrInvalidState(this.rawValue)}t.preventDefault()}}}},{key:"_onKeyup",value:function(t){if(this.isEditing=!1,this.keydownEventCounter=0,!this.formulaMode)if(this.settings.isCancellable&&this.eventKey===a.keyName.Esc)t.preventDefault();else{if(this._updateEventKeyInfo(t),this.eventKey===a.keyName.Z||this.eventKey===a.keyName.z){if(t.ctrlKey&&t.shiftKey)return t.preventDefault(),this._historyTableRedo(),this._triggerEvent(m.events.native.input,t.target),void(this.onGoingRedo=!0);if(t.ctrlKey&&!t.shiftKey){if(!this.onGoingRedo)return t.preventDefault(),this._historyTableUndo(),void this._triggerEvent(m.events.native.input,t.target);this.onGoingRedo=!1}}else if((this.eventKey===a.keyName.Y||this.eventKey===a.keyName.y)&&t.ctrlKey)return t.preventDefault(),this._historyTableRedo(),this._triggerEvent(m.events.native.input,t.target),void(this.onGoingRedo=!0);if(this.onGoingRedo&&(t.ctrlKey||t.shiftKey)&&(this.onGoingRedo=!1),(t.ctrlKey||t.metaKey)&&(this.eventKey===a.keyName.X||this.eventKey===a.keyName.x)){var o=s.getElementSelection(this.domElement).start,d=this.constructor._toNumericValue(s.getElementValue(t.target),this.settings);this.set(d),this._setCaretPosition(o)}if(this.eventKey===a.keyName.Alt&&this.settings.unformatOnHover&&this.hoveredWithAlt)this.constructor._reformatAltHovered(this);else if(!t.ctrlKey&&!t.metaKey||this.eventKey!==a.keyName.Backspace&&this.eventKey!==a.keyName.Delete){this._updateInternalProperties(t);var u=this._processNonPrintableKeysAndShortcuts(t);delete this.valuePartsBeforePaste;var p=s.getElementValue(t.target);if(!(u||p===""&&this.initialValueOnFirstKeydown==="")&&(p===this.settings.currencySymbol?this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix?s.setElementSelection(t.target,0):s.setElementSelection(t.target,this.settings.currencySymbol.length):this.eventKey===a.keyName.Tab&&s.setElementSelection(t.target,0,p.length),(p===this.settings.suffixText||this.rawValue===""&&this.settings.currencySymbol!==""&&this.settings.suffixText!=="")&&s.setElementSelection(t.target,0),this.settings.decimalPlacesShownOnFocus!==null&&this._saveValueToPersistentStorage(),this.formatted||this._formatValue(t),this._setValidOrInvalidState(this.rawValue),this._saveRawValueForAndroid(),p!==this.initialValueOnFirstKeydown&&this._triggerEvent(m.events.formatted,t.target,{oldValue:this.initialValueOnFirstKeydown,newValue:p,oldRawValue:this.initialRawValueOnFirstKeydown,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this}),this.historyTable.length>1)){var b=s.getElementSelection(this.domElement);this.selectionStart=b.start,this.selectionEnd=b.end,this.historyTable[this.historyTableIndex].start=this.selectionStart,this.historyTable[this.historyTableIndex].end=this.selectionEnd}}else{var S=s.getElementValue(t.target);this._setRawValue(this._formatOrUnformatOther(!1,S))}}}},{key:"_saveRawValueForAndroid",value:function(){if(this.eventKey===a.keyName.AndroidDefault){var t=this.constructor._stripAllNonNumberCharactersExceptCustomDecimalChar(this.getFormatted(),this.settings,!0,this.isFocused);t=this.constructor._convertToNumericString(t,this.settings),this._setRawValue(t)}}},{key:"_onFocusOutAndMouseLeave",value:function(t){if(this.isEditing=!1,t.type!=="mouseleave"||!this.formulaMode){if(this.settings.unformatOnHover&&t.type==="mouseleave"&&this.hoveredWithAlt)this.constructor._reformatAltHovered(this);else if(t.type==="mouseleave"&&!this.isFocused||t.type==="blur"){t.type==="blur"&&this.formulaMode&&this._exitFormulaMode(),this._saveValueToPersistentStorage(),this.settings.showOnlyNumbersOnFocus===m.options.showOnlyNumbersOnFocus.onlyNumbers&&(this.settings.digitGroupSeparator=this.originalDigitGroupSeparator,this.settings.currencySymbol=this.originalCurrencySymbol,this.settings.suffixText=this.originalSuffixText);var o=this._getRawValueToFormat(this.rawValue),d=s.isNull(o),u=q(this.constructor._checkIfInRangeWithOverrideOption(o,this.settings),2),p=u[0],b=u[1],S=!1;if(o===""||d||(this._triggerRangeEvents(p,b),this.settings.valuesToStrings&&this._checkValuesToStrings(o)&&(this._setElementValue(this.settings.valuesToStrings[o]),S=!0)),!S){var k;if(k=d||o===""?o:String(o),o===""||d){if(o==="")switch(this.settings.emptyInputBehavior){case m.options.emptyInputBehavior.zero:this._setRawValue("0"),k=this.constructor._roundValue("0",this.settings,0);break;case m.options.emptyInputBehavior.min:this._setRawValue(this.settings.minimumValue),k=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.minimumValue,this.settings,this.isFocused);break;case m.options.emptyInputBehavior.max:this._setRawValue(this.settings.maximumValue),k=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.maximumValue,this.settings,this.isFocused);break;default:s.isNumber(this.settings.emptyInputBehavior)&&(this._setRawValue(this.settings.emptyInputBehavior),k=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.emptyInputBehavior,this.settings,this.isFocused))}}else p&&b&&!this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(o,this.settings)?(k=this._modifyNegativeSignAndDecimalCharacterForRawValue(k),this.settings.divisorWhenUnfocused&&!s.isNull(k)&&(k=(k/=this.settings.divisorWhenUnfocused).toString()),k=this.constructor._roundFormattedValueShownOnBlur(k,this.settings),k=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(k,this.settings)):this._triggerRangeEvents(p,b);var A=this.constructor._orderValueCurrencySymbolAndSuffixText(k,this.settings,!1);this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(k,this.settings)||d&&this.settings.emptyInputBehavior===m.options.emptyInputBehavior.null||(A=this.constructor._addGroupSeparators(k,this.settings,!1,o)),A===o&&o!==""&&this.settings.allowDecimalPadding!==m.options.allowDecimalPadding.never&&this.settings.allowDecimalPadding!==m.options.allowDecimalPadding.floats||(this.settings.symbolWhenUnfocused&&o!==""&&o!==null&&(A="".concat(A).concat(this.settings.symbolWhenUnfocused)),this._setElementValue(A))}this._setValidOrInvalidState(this.rawValue),t.type==="blur"&&this._onBlur(t)}}}},{key:"_onPaste",value:function(t){if(t.preventDefault(),!(this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)){var o,d;t.clipboardData&&t.clipboardData.getData?o=t.clipboardData.getData("text/plain"):s.throwError("Unable to retrieve the pasted value. Please use a modern browser (i.e. Firefox or Chromium)."),d=t.target.tagName?t.target:t.explicitOriginalTarget;var u=s.getElementValue(d),p=d.selectionStart||0,b=d.selectionEnd||0,S=b-p;if(S===u.length){var k=this._preparePastedText(o),A=s.arabicToLatinNumbers(k,!1,!1,!1);return A==="."||A===""||A!=="."&&!s.isNumber(A)?(this.formatted=!0,void(this.settings.onInvalidPaste===m.options.onInvalidPaste.error&&s.throwError("The pasted value '".concat(o,"' is not a valid paste content.")))):(this.set(A),this.formatted=!0,void this._triggerEvent(m.events.native.input,d))}var y=s.isNegativeStrict(o,this.settings.negativeSignCharacter);y&&(o=o.slice(1,o.length));var B,T,V=this._preparePastedText(o);if((B=V==="."?".":s.arabicToLatinNumbers(V,!1,!1,!1))!=="."&&(!s.isNumber(B)||B===""))return this.formatted=!0,void(this.settings.onInvalidPaste===m.options.onInvalidPaste.error&&s.throwError("The pasted value '".concat(o,"' is not a valid paste content.")));var R,z,X=s.isNegativeStrict(this.getNumericString(),this.settings.negativeSignCharacter);y&&!X?(X=!0,R=!0):R=!1;var te=u.slice(0,p),ne=u.slice(b,u.length);z=p!==b?this._preparePastedText(te+ne):this._preparePastedText(u),X&&(z=s.setRawNegativeSign(z)),T=s.convertCharacterCountToIndexPosition(s.countNumberCharactersOnTheCaretLeftSide(u,p,this.settings.decimalCharacter)),R&&T++;var ee=z.slice(0,T),_e=z.slice(T,z.length),kt=!1;B==="."&&(s.contains(ee,".")&&(kt=!0,ee=ee.replace(".","")),_e=_e.replace(".",""));var fn=!1;switch(ee===""&&_e==="-"&&(ee="-",_e="",fn=!0),this.settings.onInvalidPaste){case m.options.onInvalidPaste.truncate:case m.options.onInvalidPaste.replace:for(var kr=s.parseStr(this.settings.minimumValue),Or=s.parseStr(this.settings.maximumValue),Ie=z,Le=0,Ii=ee;Le<B.length&&(z=(Ii+=B[Le])+_e,this.constructor._checkIfInRange(z,kr,Or));)Ie=z,Le++;if(T+=Le,fn&&T++,this.settings.onInvalidPaste===m.options.onInvalidPaste.truncate){z=Ie,kt&&T--;break}for(var Ze=T,Li=Ie.length;Le<B.length&&Ze<Li;)if(Ie[Ze]!=="."){if(z=s.replaceCharAt(Ie,Ze,B[Le]),!this.constructor._checkIfInRange(z,kr,Or))break;Ie=z,Le++,Ze++}else Ze++;T=Ze,kt&&T--,z=Ie;break;case m.options.onInvalidPaste.error:case m.options.onInvalidPaste.ignore:case m.options.onInvalidPaste.clamp:default:if(z="".concat(ee).concat(B).concat(_e),p===b)T=s.convertCharacterCountToIndexPosition(s.countNumberCharactersOnTheCaretLeftSide(u,p,this.settings.decimalCharacter))+B.length;else if(_e==="")T=s.convertCharacterCountToIndexPosition(s.countNumberCharactersOnTheCaretLeftSide(u,p,this.settings.decimalCharacter))+B.length,fn&&T++;else{var Vi=s.convertCharacterCountToIndexPosition(s.countNumberCharactersOnTheCaretLeftSide(u,b,this.settings.decimalCharacter)),Mi=s.getElementValue(d).slice(p,b);T=Vi-S+s.countCharInText(this.settings.digitGroupSeparator,Mi)+B.length}R&&T++,kt&&T--}if(s.isNumber(z)&&z!==""){var Ot=!1,xr=!1;try{this.set(z),Ot=!0}catch{var xt;switch(this.settings.onInvalidPaste){case m.options.onInvalidPaste.clamp:xt=s.clampToRangeLimits(z,this.settings);try{this.set(xt)}catch{s.throwError("Fatal error: Unable to set the clamped value '".concat(xt,"'."))}xr=!0,Ot=!0,z=xt;break;case m.options.onInvalidPaste.error:case m.options.onInvalidPaste.truncate:case m.options.onInvalidPaste.replace:s.throwError("The pasted value '".concat(o,"' results in a value '").concat(z,"' that is outside of the minimum [").concat(this.settings.minimumValue,"] and maximum [").concat(this.settings.maximumValue,"] value range."));case m.options.onInvalidPaste.ignore:default:return}}var Br,Bt=s.getElementValue(d);if(Ot)switch(this.settings.onInvalidPaste){case m.options.onInvalidPaste.clamp:if(xr){this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix?s.setElementSelection(d,Bt.length-this.settings.currencySymbol.length):s.setElementSelection(d,Bt.length);break}case m.options.onInvalidPaste.error:case m.options.onInvalidPaste.ignore:case m.options.onInvalidPaste.truncate:case m.options.onInvalidPaste.replace:default:Br=s.findCaretPositionInFormattedNumber(z,T,Bt,this.settings.decimalCharacter),s.setElementSelection(d,Br)}Ot&&u!==Bt&&this._triggerEvent(m.events.native.input,d)}else this.settings.onInvalidPaste===m.options.onInvalidPaste.error&&s.throwError("The pasted value '".concat(o,"' would result into an invalid content '").concat(z,"'."))}}},{key:"_onBlur",value:function(t){this.isFocused=!1,this.isEditing=!1,s.trimPaddedZerosFromDecimalPlaces(this.rawValue)!==s.trimPaddedZerosFromDecimalPlaces(this.rawValueOnFocus)&&this._triggerEvent(m.events.native.change,t.target),this.rawValueOnFocus=void 0}},{key:"_wheelAndUpDownActions",value:function(t,o,d,u){var p,b=t.target.selectionStart||0,S=t.target.selectionEnd||0,k=this.rawValue;if(p=+(p=s.isUndefinedOrNullOrEmpty(k)?this.settings.minimumValue>0||this.settings.maximumValue<0?o?this.settings.minimumValue:this.settings.maximumValue:0:k),s.isNumber(u)){var A=+u;o?p+=A:d&&(p-=A)}else o?p=s.addAndRoundToNearestAuto(p,this.settings.decimalPlacesRawValue):d&&(p=s.subtractAndRoundToNearestAuto(p,this.settings.decimalPlacesRawValue));(p=s.clampToRangeLimits(p,this.settings))!==+k&&(this.set(p),this._triggerEvent(m.events.native.input,t.target)),t.preventDefault(),this._setSelection(b,S)}},{key:"upDownArrowAction",value:function(t){if(!(this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)){var o=!1,d=!1;this.eventKey===a.keyName.UpArrow?o=!0:this.eventKey===a.keyName.DownArrow?d=!0:s.throwError("Something has gone wrong since neither an Up or Down arrow key is detected, but the function was still called!"),this._wheelAndUpDownActions(t,o,d,this.settings.upDownStep)}}},{key:"_onWheel",value:function(t){this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled||this.settings.modifyValueOnWheel&&(this.settings.wheelOn===m.options.wheelOn.focus?this.isFocused?t.shiftKey||this.wheelAction(t):t.shiftKey&&this.wheelAction(t):this.settings.wheelOn===m.options.wheelOn.hover?t.shiftKey?(t.preventDefault(),window.scrollBy(0,s.isNegativeStrict(String(t.deltaY))?-50:50)):this.wheelAction(t):s.throwError("Unknown `wheelOn` option."))}},{key:"wheelAction",value:function(t){this.isWheelEvent=!0;var o=!1,d=!1,u=!1;s.isWheelUpEvent(t)?o=!0:s.isWheelDownEvent(t)?d=!0:s.isWheelEventWithZeroDeltaY(t)?u=!0:s.throwError("The event is not a 'wheel' event."),u||this._wheelAndUpDownActions(t,o,d,this.settings.wheelStep),this.isWheelEvent=!1}},{key:"_onDrop",value:function(t){if(!this.formulaMode){this.isDropEvent=!0,t.preventDefault();var o=t.dataTransfer.getData("text/plain"),d=this.unformatOther(o),u=this.rawValue;this.set(d),this.isDropEvent=!1;var p=this.constructor._toNumericValue(d,this.settings);isNaN(Number(p))||s.trimPaddedZerosFromDecimalPlaces(u)!==s.trimPaddedZerosFromDecimalPlaces(p)&&this._triggerEvent(m.events.native.change,this.domElement)}}},{key:"_onFormSubmit",value:function(){var t=this;return this._getFormAutoNumericChildren(this.parentForm).map(function(o){return t.constructor.getAutoNumericElement(o)}).forEach(function(o){return o._unformatOnSubmit()}),!0}},{key:"_onFormReset",value:function(){var t=this;this._getFormAutoNumericChildren(this.parentForm).map(function(o){return t.constructor.getAutoNumericElement(o)}).forEach(function(o){var d=t._getDefaultValue(o.node());setTimeout(function(){return o.set(d)},0)})}},{key:"_unformatOnSubmit",value:function(){this.settings.unformatOnSubmit&&this._setElementValue(this.rawValue)}},{key:"_onKeydownGlobal",value:function(t){if(s.character(t)===a.keyName.Alt){var o=s.getHoveredElement();if(m.isManagedByAutoNumeric(o)){var d=m.getAutoNumericElement(o);!d.formulaMode&&d.settings.unformatOnHover&&this.constructor._unformatAltHovered(d)}}}},{key:"_onKeyupGlobal",value:function(t){if(s.character(t)===a.keyName.Alt){var o=s.getHoveredElement();if(m.isManagedByAutoNumeric(o)){var d=m.getAutoNumericElement(o);if(d.formulaMode||!d.settings.unformatOnHover)return;this.constructor._reformatAltHovered(d)}}}},{key:"_isElementTagSupported",value:function(){return s.isElement(this.domElement)||s.throwError("The DOM element is not valid, ".concat(this.domElement," given.")),s.isInArray(this.domElement.tagName.toLowerCase(),this.allowedTagList)}},{key:"_isInputElement",value:function(){return this.domElement.tagName.toLowerCase()==="input"}},{key:"_isInputTypeSupported",value:function(){return this.domElement.type==="text"||this.domElement.type==="hidden"||this.domElement.type==="tel"||s.isUndefinedOrNullOrEmpty(this.domElement.type)}},{key:"_checkElement",value:function(){var t=this.domElement.tagName.toLowerCase();this._isElementTagSupported()||s.throwError("The <".concat(t,"> tag is not supported by autoNumeric")),this._isInputElement()?(this._isInputTypeSupported()||s.throwError('The input type "'.concat(this.domElement.type,'" is not supported by autoNumeric')),this.isInputElement=!0):(this.isInputElement=!1,this.isContentEditable=this._isContentEditable(this.domElement))}},{key:"_isContentEditable",value:function(t){return t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")==="true"}},{key:"_formatDefaultValueOnPageLoad",value:function(){var t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,d=!0;if(s.isNull(o)?(t=s.getElementValue(this.domElement).trim(),this.domElement.setAttribute("value",t)):t=o,this.isInputElement||this.isContentEditable){var u=this.constructor._toNumericValue(t,this.settings);if(this.domElement.hasAttribute("value")&&this.domElement.getAttribute("value")!==""){if(this.settings.defaultValueOverride!==null&&this.settings.defaultValueOverride.toString()!==t||this.settings.defaultValueOverride===null&&t!==""&&t!==this.domElement.getAttribute("value")||t!==""&&this.domElement.getAttribute("type")==="hidden"&&!s.isNumber(u)){if(this.settings.saveValueToSessionStorage&&(this.settings.decimalPlacesShownOnFocus!==null||this.settings.divisorWhenUnfocused)&&this._setRawValue(this._getValueFromPersistentStorage()),!this.settings.saveValueToSessionStorage){var p=this.constructor._removeBrackets(t,this.settings);(this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix)&&this.settings.negativeSignCharacter!==""&&s.isNegative(t,this.settings.negativeSignCharacter)?this._setRawValue("-".concat(this.constructor._stripAllNonNumberCharacters(p,this.settings,!0,this.isFocused))):this._setRawValue(this.constructor._stripAllNonNumberCharacters(p,this.settings,!0,this.isFocused))}d=!1}}else isNaN(Number(u))||u===1/0?s.throwError("The value [".concat(t,"] used in the input is not a valid value autoNumeric can work with.")):(this.set(u),d=!1);if(t==="")switch(this.settings.emptyInputBehavior){case m.options.emptyInputBehavior.focus:case m.options.emptyInputBehavior.press:break;case m.options.emptyInputBehavior.always:this._setElementValue(this.settings.currencySymbol);break;case m.options.emptyInputBehavior.min:this.set(this.settings.minimumValue);break;case m.options.emptyInputBehavior.max:this.set(this.settings.maximumValue);break;case m.options.emptyInputBehavior.zero:this.set("0");break;case m.options.emptyInputBehavior.null:this.set(null);break;default:this.set(this.settings.emptyInputBehavior)}else d&&t===this.domElement.getAttribute("value")&&this.set(t)}else this.settings.defaultValueOverride!==null&&this.settings.defaultValueOverride!==t||this.set(t)}},{key:"_calculateVMinAndVMaxIntegerSizes",value:function(){var t=q(this.settings.maximumValue.toString().split("."),1)[0],o=q(this.settings.minimumValue||this.settings.minimumValue===0?this.settings.minimumValue.toString().split("."):[],1)[0];t=t.replace(this.settings.negativeSignCharacter,""),o=o.replace(this.settings.negativeSignCharacter,""),this.settings.mIntPos=Math.max(t.length,1),this.settings.mIntNeg=Math.max(o.length,1)}},{key:"_calculateValuesToStringsKeys",value:function(){this.settings.valuesToStrings?this.valuesToStringsKeys=Object.keys(this.settings.valuesToStrings):this.valuesToStringsKeys=[]}},{key:"_transformOptionsValuesToDefaultTypes",value:function(){for(var t in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,t)){var o=this.settings[t];o!=="true"&&o!=="false"||(this.settings[t]=o==="true"),typeof o=="number"&&(this.settings[t]=o.toString())}}},{key:"_setSettings",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];!o&&s.isNull(t)||this.constructor._convertOldOptionsToNewOnes(t),o?("decimalPlacesRawValue"in t&&(this.settings.originalDecimalPlacesRawValue=t.decimalPlacesRawValue),"decimalPlaces"in t&&(this.settings.originalDecimalPlaces=t.decimalPlaces),this.constructor._calculateDecimalPlacesOnUpdate(t,this.settings),this._mergeSettings(t)):(this.settings={},this._mergeSettings(this.constructor.getDefaultConfig(),this.domElement.dataset,t,{rawValue:this.defaultRawValue}),this.caretFix=!1,this.throwInput=!0,this.allowedTagList=a.allowedTagList,this.runOnce=!1,this.hoveredWithAlt=!1),this._transformOptionsValuesToDefaultTypes(),this._runCallbacksFoundInTheSettingsObject(),this.constructor._correctNegativePositiveSignPlacementOption(this.settings),this.constructor._correctCaretPositionOnFocusAndSelectOnFocusOptions(this.settings),this.constructor._setNegativePositiveSignPermissions(this.settings),o||(s.isNull(t)||!t.decimalPlaces?this.settings.originalDecimalPlaces=null:this.settings.originalDecimalPlaces=t.decimalPlaces,this.settings.originalDecimalPlacesRawValue=this.settings.decimalPlacesRawValue,this.constructor._calculateDecimalPlacesOnInit(this.settings)),this._calculateVMinAndVMaxIntegerSizes(),this._setTrailingNegativeSignInfo(),this.regex={},this.constructor._cachesUsualRegularExpressions(this.settings,this.regex),this.constructor._setBrackets(this.settings),this._calculateValuesToStringsKeys(),s.isEmptyObj(this.settings)&&s.throwError("Unable to set the settings, those are invalid ; an empty object was given."),this.constructor.validate(this.settings,!1,t),this._keepAnOriginalSettingsCopy()}},{key:"_preparePastedText",value:function(t){return this.constructor._stripAllNonNumberCharacters(t,this.settings,!0,this.isFocused)}},{key:"_updateInternalProperties",value:function(){this.selection=s.getElementSelection(this.domElement),this.processed=!1}},{key:"_updateEventKeyInfo",value:function(t){this.eventKey=s.character(t)}},{key:"_saveCancellableValue",value:function(){this.savedCancellableValue=this.rawValue}},{key:"_setSelection",value:function(t,o){t=Math.max(t,0),o=Math.min(o,s.getElementValue(this.domElement).length),this.selection={start:t,end:o,length:o-t},s.setElementSelection(this.domElement,t,o)}},{key:"_setCaretPosition",value:function(t){this._setSelection(t,t)}},{key:"_getLeftAndRightPartAroundTheSelection",value:function(){var t=s.getElementValue(this.domElement);return[t.substring(0,this.selection.start),t.substring(this.selection.end,t.length)]}},{key:"_getUnformattedLeftAndRightPartAroundTheSelection",value:function(){var t=q(this._getLeftAndRightPartAroundTheSelection(),2),o=t[0],d=t[1];if(o===""&&d==="")return["",""];var u=!0;return this.eventKey!==a.keyName.Hyphen&&this.eventKey!==a.keyName.Minus||Number(o)!==0||(u=!1),this.isTrailingNegative&&(s.isNegative(d,this.settings.negativeSignCharacter)&&!s.isNegative(o,this.settings.negativeSignCharacter)||d===""&&s.isNegative(o,this.settings.negativeSignCharacter,!0))&&(o=o.replace(this.settings.negativeSignCharacter,""),d=d.replace(this.settings.negativeSignCharacter,""),o=o.replace("-",""),d=d.replace("-",""),o="-".concat(o)),[o=m._stripAllNonNumberCharactersExceptCustomDecimalChar(o,this.settings,u,this.isFocused),d=m._stripAllNonNumberCharactersExceptCustomDecimalChar(d,this.settings,!1,this.isFocused)]}},{key:"_normalizeParts",value:function(t,o){var d=!0;this.eventKey!==a.keyName.Hyphen&&this.eventKey!==a.keyName.Minus||Number(t)!==0||(d=!1),this.isTrailingNegative&&s.isNegative(o,this.settings.negativeSignCharacter)&&!s.isNegative(t,this.settings.negativeSignCharacter)&&(t="-".concat(t),o=o.replace(this.settings.negativeSignCharacter,"")),t=m._stripAllNonNumberCharactersExceptCustomDecimalChar(t,this.settings,d,this.isFocused),o=m._stripAllNonNumberCharactersExceptCustomDecimalChar(o,this.settings,!1,this.isFocused),this.settings.leadingZero!==m.options.leadingZero.deny||this.eventKey!==a.keyName.num0&&this.eventKey!==a.keyName.numpad0||Number(t)!==0||s.contains(t,this.settings.decimalCharacter)||o===""||(t=t.substring(0,t.length-1));var u=t+o;if(this.settings.decimalCharacter){var p=u.match(new RegExp("^".concat(this.regex.aNegRegAutoStrip,"\\").concat(this.settings.decimalCharacter)));p&&(u=(t=t.replace(p[1],p[1]+"0"))+o)}return[t,o,u]}},{key:"_setValueParts",value:function(t,o){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=q(this._normalizeParts(t,o),3),p=u[0],b=u[1],S=u[2],k=q(m._checkIfInRangeWithOverrideOption(S,this.settings),2),A=k[0],y=k[1];if(A&&y){var B=m._truncateDecimalPlaces(S,this.settings,d,this.settings.decimalPlacesRawValue).replace(this.settings.decimalCharacter,".");if(B===""||B===this.settings.negativeSignCharacter){var T;switch(this.settings.emptyInputBehavior){case m.options.emptyInputBehavior.focus:case m.options.emptyInputBehavior.press:case m.options.emptyInputBehavior.always:T="";break;case m.options.emptyInputBehavior.min:T=this.settings.minimumValue;break;case m.options.emptyInputBehavior.max:T=this.settings.maximumValue;break;case m.options.emptyInputBehavior.zero:T="0";break;case m.options.emptyInputBehavior.null:T=null;break;default:T=this.settings.emptyInputBehavior}this._setRawValue(T)}else this._setRawValue(this._trimLeadingAndTrailingZeros(B));var V=m._truncateDecimalPlaces(S,this.settings,d,this.settings.decimalPlacesShownOnFocus),R=p.length;return R>V.length&&(R=V.length),R===1&&p==="0"&&this.settings.leadingZero===m.options.leadingZero.deny&&(R=b===""||p==="0"&&b!==""?1:0),this._setElementValue(V,!1),this._setCaretPosition(R),!0}return this._triggerRangeEvents(A,y),!1}},{key:"_getSignPosition",value:function(){var t;if(this.settings.currencySymbol){var o=this.settings.currencySymbol.length,d=s.getElementValue(this.domElement);if(this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix)t=this.settings.negativeSignCharacter&&d&&d.charAt(0)===this.settings.negativeSignCharacter?[1,o+1]:[0,o];else{var u=d.length;t=[u-o,u]}}else t=[1e3,-1];return t}},{key:"_expandSelectionOnSign",value:function(){var t=q(this._getSignPosition(),2),o=t[0],d=t[1],u=this.selection;u.start<d&&u.end>o&&((u.start<o||u.end>d)&&s.getElementValue(this.domElement).substring(Math.max(u.start,o),Math.min(u.end,d)).match(/^\s*$/)?u.start<o?this._setSelection(u.start,o):this._setSelection(d,u.end):this._setSelection(Math.min(u.start,o),Math.max(u.end,d)))}},{key:"_checkPaste",value:function(){if(!this.formatted&&!s.isUndefined(this.valuePartsBeforePaste)){var t=this.valuePartsBeforePaste,o=q(this._getLeftAndRightPartAroundTheSelection(),2),d=o[0],u=o[1];delete this.valuePartsBeforePaste;var p=d.substr(0,t[0].length)+m._stripAllNonNumberCharactersExceptCustomDecimalChar(d.substr(t[0].length),this.settings,!0,this.isFocused);this._setValueParts(p,u,!0)||(this._setElementValue(t.join(""),!1),this._setCaretPosition(t[0].length))}}},{key:"_processNonPrintableKeysAndShortcuts",value:function(t){if((t.ctrlKey||t.metaKey)&&t.type==="keyup"&&!s.isUndefined(this.valuePartsBeforePaste)||t.shiftKey&&this.eventKey===a.keyName.Insert)return this._checkPaste(),!1;if(this.constructor._shouldSkipEventKey(this.eventKey))return!0;if((t.ctrlKey||t.metaKey)&&this.eventKey===a.keyName.a)return this.settings.selectNumberOnly&&(t.preventDefault(),this.selectNumber()),!0;if((t.ctrlKey||t.metaKey)&&(this.eventKey===a.keyName.c||this.eventKey===a.keyName.v||this.eventKey===a.keyName.x))return t.type==="keydown"&&this._expandSelectionOnSign(),this.eventKey!==a.keyName.v&&this.eventKey!==a.keyName.Insert||(t.type==="keydown"||t.type==="keypress"?s.isUndefined(this.valuePartsBeforePaste)&&(this.valuePartsBeforePaste=this._getLeftAndRightPartAroundTheSelection()):this._checkPaste()),t.type==="keydown"||t.type==="keypress"||this.eventKey===a.keyName.c;if(t.ctrlKey||t.metaKey)return!(this.eventKey===a.keyName.Z||this.eventKey===a.keyName.z);if(this.eventKey===a.keyName.LeftArrow||this.eventKey===a.keyName.RightArrow){if(t.type==="keydown"&&!t.shiftKey){var o=s.getElementValue(this.domElement);this.eventKey!==a.keyName.LeftArrow||o.charAt(this.selection.start-2)!==this.settings.digitGroupSeparator&&o.charAt(this.selection.start-2)!==this.settings.decimalCharacter?this.eventKey!==a.keyName.RightArrow||o.charAt(this.selection.start+1)!==this.settings.digitGroupSeparator&&o.charAt(this.selection.start+1)!==this.settings.decimalCharacter||this._setCaretPosition(this.selection.start+1):this._setCaretPosition(this.selection.start-1)}return!0}return s.isInArray(this.eventKey,a.keyName._directionKeys)}},{key:"_processCharacterDeletionIfTrailingNegativeSign",value:function(t){var o=q(t,2),d=o[0],u=o[1],p=s.getElementValue(this.domElement),b=s.isNegative(p,this.settings.negativeSignCharacter);if(this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.suffix&&(this.eventKey===a.keyName.Backspace?(this.caretFix=this.selection.start>=p.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",p.charAt(this.selection.start-1)==="-"?d=d.substring(1):this.selection.start<=p.length-this.settings.suffixText.length&&(d=d.substring(0,d.length-1))):(this.caretFix=this.selection.start>=p.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",this.selection.start>=p.indexOf(this.settings.currencySymbol)+this.settings.currencySymbol.length&&(u=u.substring(1,u.length)),s.isNegative(d,this.settings.negativeSignCharacter)&&p.charAt(this.selection.start)==="-"&&(d=d.substring(1)))),this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix)switch(this.settings.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.left:this.caretFix=this.selection.start>=p.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===a.keyName.Backspace?this.selection.start===p.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length&&b?d=d.substring(1):d!=="-"&&(this.selection.start<=p.indexOf(this.settings.negativeSignCharacter)||!b)&&(d=d.substring(0,d.length-1)):(d[0]==="-"&&(u=u.substring(1)),this.selection.start===p.indexOf(this.settings.negativeSignCharacter)&&b&&(d=d.substring(1)));break;case m.options.negativePositiveSignPlacement.right:this.caretFix=this.selection.start>=p.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===a.keyName.Backspace?this.selection.start===p.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length?d=d.substring(1):d!=="-"&&this.selection.start<=p.indexOf(this.settings.negativeSignCharacter)-this.settings.currencySymbol.length?d=d.substring(0,d.length-1):d===""||b||(d=d.substring(0,d.length-1)):(this.caretFix=this.selection.start>=p.indexOf(this.settings.currencySymbol)&&this.settings.currencySymbol!=="",this.selection.start===p.indexOf(this.settings.negativeSignCharacter)&&(d=d.substring(1)),u=u.substring(1))}return[d,u]}},{key:"_processCharacterDeletion",value:function(t){var o,d;if(this.selection.length){this._expandSelectionOnSign();var u=q(this._getUnformattedLeftAndRightPartAroundTheSelection(),2);o=u[0],d=u[1]}else{var p=q(this._getUnformattedLeftAndRightPartAroundTheSelection(),2);if(o=p[0],d=p[1],o===""&&d===""&&(this.throwInput=!1),this.isTrailingNegative&&s.isNegative(s.getElementValue(this.domElement),this.settings.negativeSignCharacter)){var b=q(this._processCharacterDeletionIfTrailingNegativeSign([o,d]),2);o=b[0],d=b[1]}else this.eventKey===a.keyName.Backspace?o=o.substring(0,o.length-1):d=d.substring(1,d.length)}return!!this.constructor._isWithinRangeWithOverrideOption("".concat(o).concat(d),this.settings)&&s.getElementValue(t.target)!==this.settings.currencySymbol&&(this._setValueParts(o,d),!0)}},{key:"_isDecimalCharacterInsertionAllowed",value:function(){return String(this.settings.decimalPlacesShownOnFocus)!==String(m.options.decimalPlacesShownOnFocus.none)&&String(this.settings.decimalPlaces)!==String(m.options.decimalPlaces.none)}},{key:"_processCharacterInsertion",value:function(){var t=q(this._getUnformattedLeftAndRightPartAroundTheSelection(),2),o=t[0],d=t[1];if(this.eventKey!==a.keyName.AndroidDefault&&(this.throwInput=!0),this.eventKey===this.settings.decimalCharacter||this.settings.decimalCharacterAlternative&&this.eventKey===this.settings.decimalCharacterAlternative){if(!this._isDecimalCharacterInsertionAllowed()||!this.settings.decimalCharacter)return!1;if(this.settings.alwaysAllowDecimalCharacter)o=o.replace(this.settings.decimalCharacter,""),d=d.replace(this.settings.decimalCharacter,"");else{if(s.contains(o,this.settings.decimalCharacter)||d.indexOf(this.settings.decimalCharacter)>0)return!0;d.indexOf(this.settings.decimalCharacter)===0&&(d=d.substr(1))}return this.settings.negativeSignCharacter&&s.contains(d,this.settings.negativeSignCharacter)&&(o="".concat(this.settings.negativeSignCharacter).concat(o),d=d.replace(this.settings.negativeSignCharacter,"")),this._setValueParts(o+this.settings.decimalCharacter,d),!0}if((this.eventKey==="-"||this.eventKey==="+")&&this.settings.isNegativeSignAllowed)return o===""&&s.contains(d,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(d=d.replace("-","")):s.isNegativeStrict(o,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(o=o.replace("-","")):(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="-")&&(o="".concat(this.settings.negativeSignCharacter).concat(o)),this._setValueParts(o,d),!0;var u=Number(this.eventKey);return u>=0&&u<=9?(this.settings.isNegativeSignAllowed&&o===""&&s.contains(d,"-")&&(o="-",d=d.substring(1,d.length)),this.settings.maximumValue<=0&&this.settings.minimumValue<this.settings.maximumValue&&!s.contains(s.getElementValue(this.domElement),this.settings.negativeSignCharacter)&&this.eventKey!=="0"&&(o="-".concat(o)),this._setValueParts("".concat(o).concat(this.eventKey),d),!0):(this.throwInput=!1,!1)}},{key:"_formatValue",value:function(t){var o=s.getElementValue(this.domElement),d=q(this._getUnformattedLeftAndRightPartAroundTheSelection(),1)[0];if((this.settings.digitGroupSeparator===""||this.settings.digitGroupSeparator!==""&&!s.contains(o,this.settings.digitGroupSeparator))&&(this.settings.currencySymbol===""||this.settings.currencySymbol!==""&&!s.contains(o,this.settings.currencySymbol))){var u=q(o.split(this.settings.decimalCharacter),1)[0],p="";s.isNegative(u,this.settings.negativeSignCharacter)&&(p=this.settings.negativeSignCharacter,u=u.replace(this.settings.negativeSignCharacter,""),d=d.replace("-","")),p===""&&u.length>this.settings.mIntPos&&d.charAt(0)==="0"&&(d=d.slice(1)),p===this.settings.negativeSignCharacter&&u.length>this.settings.mIntNeg&&d.charAt(0)==="0"&&(d=d.slice(1)),this.isTrailingNegative||(d="".concat(p).concat(d))}var b=this.constructor._addGroupSeparators(o,this.settings,this.isFocused,this.rawValue),S=b.length;if(b){var k,A=d.split("");if((this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix)&&A[0]===this.settings.negativeSignCharacter&&!this.settings.isNegativeSignAllowed&&(A.shift(),(this.eventKey===a.keyName.Backspace||this.eventKey===a.keyName.Delete)&&this.caretFix&&((this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.left||this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.suffix)&&(A.push(this.settings.negativeSignCharacter),this.caretFix=t.type==="keydown"),this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===m.options.negativePositiveSignPlacement.right))){var y=this.settings.currencySymbol.split(""),B=["\\","^","$",".","|","?","*","+","(",")","["],T=[];y.forEach(function(z,X){X=y[z],s.isInArray(X,B)?T.push("\\"+X):T.push(X)}),this.eventKey===a.keyName.Backspace&&this.settings.negativeSignCharacter==="-"&&T.push("-"),A.push(T.join("")),this.caretFix=t.type==="keydown"}for(var V=0;V<A.length;V++)A[V].match("\\d")||(A[V]="\\"+A[V]);k=this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix?new RegExp("^.*?".concat(A.join(".*?"))):new RegExp("^.*?[".concat(this.settings.currencySymbol,"]*").concat(A.join(".*?")));var R=b.match(k);R?(S=R[0].length,this.settings.showPositiveSign&&(S===0&&R.input.charAt(0)===this.settings.positiveSignCharacter&&(S=R.input.indexOf(this.settings.currencySymbol)===1?this.settings.currencySymbol.length+1:1),S===0&&R.input.charAt(this.settings.currencySymbol.length)===this.settings.positiveSignCharacter&&(S=this.settings.currencySymbol.length+1)),(S===0&&b.charAt(0)!==this.settings.negativeSignCharacter||S===1&&b.charAt(0)===this.settings.negativeSignCharacter)&&this.settings.currencySymbol&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix&&(S=this.settings.currencySymbol.length+(s.isNegativeStrict(b,this.settings.negativeSignCharacter)?1:0))):(this.settings.currencySymbol&&this.settings.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix&&(S-=this.settings.currencySymbol.length),this.settings.suffixText&&(S-=this.settings.suffixText.length))}b!==o&&(this._setElementValue(b,!1),this._setCaretPosition(S)),this.formatted=!0}}],N=[{key:"version",value:function(){return"4.10.5"}},{key:"_setArgumentsValues",value:function(t,o,d){s.isNull(t)&&s.throwError("At least one valid parameter is needed in order to initialize an AutoNumeric object");var u,p,b,S=s.isElement(t),k=s.isString(t),A=s.isObject(o),y=Array.isArray(o)&&o.length>0,B=s.isNumberOrArabic(o)||o==="",T=this._isPreDefinedOptionValid(o),V=s.isNull(o),R=s.isEmptyString(o),z=s.isObject(d),X=Array.isArray(d)&&d.length>0,te=s.isNull(d),ne=this._isPreDefinedOptionValid(d);return S&&V&&te?(u=t,b=null,p=null):S&&B&&te?(u=t,b=o,p=null):S&&A&&te?(u=t,b=null,p=o):S&&T&&te?(u=t,b=null,p=this._getOptionObject(o)):S&&y&&te?(u=t,b=null,p=this.mergeOptions(o)):S&&(V||R)&&z?(u=t,b=null,p=d):S&&(V||R)&&X?(u=t,b=null,p=this.mergeOptions(d)):k&&V&&te?(u=document.querySelector(t),b=null,p=null):k&&A&&te?(u=document.querySelector(t),b=null,p=o):k&&T&&te?(u=document.querySelector(t),b=null,p=this._getOptionObject(o)):k&&y&&te?(u=document.querySelector(t),b=null,p=this.mergeOptions(o)):k&&(V||R)&&z?(u=document.querySelector(t),b=null,p=d):k&&(V||R)&&X?(u=document.querySelector(t),b=null,p=this.mergeOptions(d)):k&&B&&te?(u=document.querySelector(t),b=o,p=null):k&&B&&z?(u=document.querySelector(t),b=o,p=d):k&&B&&ne?(u=document.querySelector(t),b=o,p=this._getOptionObject(d)):k&&B&&X?(u=document.querySelector(t),b=o,p=this.mergeOptions(d)):S&&B&&z?(u=t,b=o,p=d):S&&B&&ne?(u=t,b=o,p=this._getOptionObject(d)):S&&B&&X?(u=t,b=o,p=this.mergeOptions(d)):s.throwError("The parameters given to the AutoNumeric object are not valid, '".concat(t,"', '").concat(o,"' and '").concat(d,"' given.")),s.isNull(u)&&s.throwError("The selector '".concat(t,"' did not select any valid DOM element. Please check on which element you called AutoNumeric.")),{domElement:u,initialValue:b,userOptions:p}}},{key:"mergeOptions",value:function(t){var o=this,d={};return t.forEach(function(u){de(d,o._getOptionObject(u))}),d}},{key:"_isPreDefinedOptionValid",value:function(t){return Object.prototype.hasOwnProperty.call(m.predefinedOptions,t)}},{key:"_getOptionObject",value:function(t){var o;return s.isString(t)?(o=m.getPredefinedOptions()[t])==null&&s.warning("The given pre-defined option [".concat(t,"] is not recognized by autoNumeric. Please check that pre-defined option name."),!0):o=t,o}},{key:"_doesFormHandlerListExists",value:function(){var t=ae(window.aNFormHandlerMap);return t!=="undefined"&&t==="object"}},{key:"_createFormHandlerList",value:function(){window.aNFormHandlerMap=new Map}},{key:"_checkValuesToStringsArray",value:function(t,o){return s.isInArray(String(t),o)}},{key:"_checkValuesToStringsSettings",value:function(t,o){return this._checkValuesToStringsArray(t,Object.keys(o.valuesToStrings))}},{key:"_checkStringsToValuesSettings",value:function(t,o){return this._checkValuesToStringsArray(t,Object.values(o.valuesToStrings))}},{key:"_unformatAltHovered",value:function(t){t.hoveredWithAlt=!0,t.unformat()}},{key:"_reformatAltHovered",value:function(t){t.hoveredWithAlt=!1,t.reformat()}},{key:"_getChildANInputElement",value:function(t){var o=this,d=t.getElementsByTagName("input"),u=[];return Array.prototype.slice.call(d,0).forEach(function(p){o.test(p)&&u.push(p)}),u}},{key:"test",value:function(t){return this._isInGlobalList(s.domElement(t))}},{key:"_createWeakMap",value:function(t){window[t]=new WeakMap}},{key:"_createGlobalList",value:function(){this.autoNumericGlobalListName="autoNumericGlobalList",this._createWeakMap(this.autoNumericGlobalListName)}},{key:"_doesGlobalListExists",value:function(){var t=ae(window[this.autoNumericGlobalListName]);return t!=="undefined"&&t==="object"}},{key:"_addToGlobalList",value:function(t){this._doesGlobalListExists()||this._createGlobalList();var o=t.node();if(this._isInGlobalList(o)){if(this._getFromGlobalList(o)===this)return;s.warning("A reference to the DOM element you just initialized already exists in the global AutoNumeric element list. Please make sure to not initialize the same DOM element multiple times.",t.getSettings().showWarnings)}window[this.autoNumericGlobalListName].set(o,t)}},{key:"_removeFromGlobalList",value:function(t){this._doesGlobalListExists()&&window[this.autoNumericGlobalListName].delete(t.node())}},{key:"_getFromGlobalList",value:function(t){return this._doesGlobalListExists()?window[this.autoNumericGlobalListName].get(t):null}},{key:"_isInGlobalList",value:function(t){return!!this._doesGlobalListExists()&&window[this.autoNumericGlobalListName].has(t)}},{key:"validate",value:function(t){var o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;!s.isUndefinedOrNullOrEmpty(t)&&s.isObject(t)||s.throwError("The userOptions are invalid ; it should be a valid object, [".concat(t,"] given."));var u,p=s.isObject(d);p||s.isNull(d)||s.throwError("The 'originalOptions' parameter is invalid ; it should either be a valid option object or `null`, [".concat(t,"] given.")),s.isNull(t)||this._convertOldOptionsToNewOnes(t),u=o?de({},this.getDefaultConfig(),t):t,s.isTrueOrFalseString(u.showWarnings)||s.isBoolean(u.showWarnings)||s.throwError("The debug option 'showWarnings' is invalid ; it should be either 'true' or 'false', [".concat(u.showWarnings,"] given."));var b,S=/^[0-9]+$/,k=/[0-9]+/,A=/^-?[0-9]+(\.?[0-9]+)?$/,y=/^[0-9]+(\.?[0-9]+)?$/;s.isTrueOrFalseString(u.allowDecimalPadding)||s.isBoolean(u.allowDecimalPadding)||u.allowDecimalPadding===m.options.allowDecimalPadding.floats||s.isNumber(u.allowDecimalPadding)&&u.allowDecimalPadding>0||s.throwError("The decimal padding option 'allowDecimalPadding' is invalid ; it should either be `false`, `true`, `'floats'` or a positive integer superior to 0, [".concat(u.allowDecimalPadding,"] given.")),s.isNumber(u.allowDecimalPadding)&&u.allowDecimalPadding>u.decimalPlaces&&s.warning("Setting 'allowDecimalPadding' to a number [".concat(u.allowDecimalPadding,"] superior to the current 'decimalPlaces' settings [").concat(u.decimalPlaces,"] is useless, since the padding will not be shown."),u.showWarnings),u.allowDecimalPadding!==m.options.allowDecimalPadding.never&&u.allowDecimalPadding!=="false"||u.decimalPlaces===m.options.decimalPlaces.none&&u.decimalPlacesShownOnBlur===m.options.decimalPlacesShownOnBlur.none&&u.decimalPlacesShownOnFocus===m.options.decimalPlacesShownOnFocus.none||s.warning("Setting 'allowDecimalPadding' to [".concat(u.allowDecimalPadding,"] will override the current 'decimalPlaces*' settings [").concat(u.decimalPlaces,", ").concat(u.decimalPlacesShownOnBlur," and ").concat(u.decimalPlacesShownOnFocus,"]."),u.showWarnings),s.isTrueOrFalseString(u.alwaysAllowDecimalCharacter)||s.isBoolean(u.alwaysAllowDecimalCharacter)||s.throwError("The option 'alwaysAllowDecimalCharacter' is invalid ; it should either be `true` or `false`, [".concat(u.alwaysAllowDecimalCharacter,"] given.")),s.isNull(u.caretPositionOnFocus)||s.isInArray(u.caretPositionOnFocus,[m.options.caretPositionOnFocus.start,m.options.caretPositionOnFocus.end,m.options.caretPositionOnFocus.decimalLeft,m.options.caretPositionOnFocus.decimalRight])||s.throwError("The display on empty string option 'caretPositionOnFocus' is invalid ; it should either be `null`, 'focus', 'press', 'always' or 'zero', [".concat(u.caretPositionOnFocus,"] given.")),b=p?d:this._correctCaretPositionOnFocusAndSelectOnFocusOptions(t),s.isNull(b)||b.caretPositionOnFocus===m.options.caretPositionOnFocus.doNoForceCaretPosition||b.selectOnFocus!==m.options.selectOnFocus.select||s.warning("The 'selectOnFocus' option is set to 'select', which is in conflict with the 'caretPositionOnFocus' which is set to '".concat(b.caretPositionOnFocus,"'. As a result, if this has been called when instantiating an AutoNumeric object, the 'selectOnFocus' option is forced to 'doNotSelect'."),u.showWarnings),s.isInArray(u.digitGroupSeparator,[m.options.digitGroupSeparator.comma,m.options.digitGroupSeparator.dot,m.options.digitGroupSeparator.normalSpace,m.options.digitGroupSeparator.thinSpace,m.options.digitGroupSeparator.narrowNoBreakSpace,m.options.digitGroupSeparator.noBreakSpace,m.options.digitGroupSeparator.noSeparator,m.options.digitGroupSeparator.apostrophe,m.options.digitGroupSeparator.arabicThousandsSeparator,m.options.digitGroupSeparator.dotAbove,m.options.digitGroupSeparator.privateUseTwo])||s.throwError(`The thousand separator character option 'digitGroupSeparator' is invalid ; it should be ',', '.', '\u066C', '\u02D9', "'", '\x92', ' ', '\u2009', '\u202F', '\xA0' or empty (''), [`.concat(u.digitGroupSeparator,"] given.")),s.isTrueOrFalseString(u.showOnlyNumbersOnFocus)||s.isBoolean(u.showOnlyNumbersOnFocus)||s.throwError("The 'showOnlyNumbersOnFocus' option is invalid ; it should be either 'true' or 'false', [".concat(u.showOnlyNumbersOnFocus,"] given.")),s.isInArray(u.digitalGroupSpacing,[m.options.digitalGroupSpacing.two,m.options.digitalGroupSpacing.twoThree,m.options.digitalGroupSpacing.twoScaled,m.options.digitalGroupSpacing.three,m.options.digitalGroupSpacing.four])||u.digitalGroupSpacing>=2&&u.digitalGroupSpacing<=4||s.throwError("The grouping separator option for thousands 'digitalGroupSpacing' is invalid ; it should be '2', '2t', '2s', '3', or '4', [".concat(u.digitalGroupSpacing,"] given.")),s.isInArray(u.decimalCharacter,[m.options.decimalCharacter.comma,m.options.decimalCharacter.dot,m.options.decimalCharacter.middleDot,m.options.decimalCharacter.arabicDecimalSeparator,m.options.decimalCharacter.decimalSeparatorKeySymbol])||s.throwError("The decimal separator character option 'decimalCharacter' is invalid ; it should be '.', ',', '\xB7', '\u2396' or '\u066B', [".concat(u.decimalCharacter,"] given.")),u.decimalCharacter===u.digitGroupSeparator&&s.throwError("autoNumeric will not function properly when the decimal character 'decimalCharacter' [".concat(u.decimalCharacter,"] and the thousand separator 'digitGroupSeparator' [").concat(u.digitGroupSeparator,"] are the same character.")),s.isNull(u.decimalCharacterAlternative)||s.isString(u.decimalCharacterAlternative)||s.throwError("The alternate decimal separator character option 'decimalCharacterAlternative' is invalid ; it should be a string, [".concat(u.decimalCharacterAlternative,"] given.")),u.currencySymbol===""||s.isString(u.currencySymbol)||s.throwError("The currency symbol option 'currencySymbol' is invalid ; it should be a string, [".concat(u.currencySymbol,"] given.")),s.isInArray(u.currencySymbolPlacement,[m.options.currencySymbolPlacement.prefix,m.options.currencySymbolPlacement.suffix])||s.throwError("The placement of the currency sign option 'currencySymbolPlacement' is invalid ; it should either be 'p' (prefix) or 's' (suffix), [".concat(u.currencySymbolPlacement,"] given.")),s.isInArray(u.negativePositiveSignPlacement,[m.options.negativePositiveSignPlacement.prefix,m.options.negativePositiveSignPlacement.suffix,m.options.negativePositiveSignPlacement.left,m.options.negativePositiveSignPlacement.right,m.options.negativePositiveSignPlacement.none])||s.throwError("The placement of the negative sign option 'negativePositiveSignPlacement' is invalid ; it should either be 'p' (prefix), 's' (suffix), 'l' (left), 'r' (right) or 'null', [".concat(u.negativePositiveSignPlacement,"] given.")),s.isTrueOrFalseString(u.showPositiveSign)||s.isBoolean(u.showPositiveSign)||s.throwError("The show positive sign option 'showPositiveSign' is invalid ; it should be either 'true' or 'false', [".concat(u.showPositiveSign,"] given.")),(!s.isString(u.suffixText)||u.suffixText!==""&&(s.isNegative(u.suffixText,u.negativeSignCharacter)||k.test(u.suffixText)))&&s.throwError("The additional suffix option 'suffixText' is invalid ; it should not contains the negative sign '".concat(u.negativeSignCharacter,"' nor any numerical characters, [").concat(u.suffixText,"] given.")),(!s.isString(u.negativeSignCharacter)||u.negativeSignCharacter.length!==1||s.isUndefinedOrNullOrEmpty(u.negativeSignCharacter)||k.test(u.negativeSignCharacter))&&s.throwError("The negative sign character option 'negativeSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [".concat(u.negativeSignCharacter,"] given.")),(!s.isString(u.positiveSignCharacter)||u.positiveSignCharacter.length!==1||s.isUndefinedOrNullOrEmpty(u.positiveSignCharacter)||k.test(u.positiveSignCharacter))&&s.throwError("The positive sign character option 'positiveSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [".concat(u.positiveSignCharacter,"] given.\nIf you want to show the positive sign character, you need to set the `showPositiveSign` option to `true`.")),u.negativeSignCharacter===u.positiveSignCharacter&&s.throwError("The positive 'positiveSignCharacter' and negative 'negativeSignCharacter' sign characters cannot be identical ; [".concat(u.negativeSignCharacter,"] given.")),s.isTrueOrFalseString(u.negativePositiveSignBehavior)||s.isBoolean(u.negativePositiveSignBehavior)||s.throwError("The option 'negativePositiveSignBehavior' is invalid ; it should be either 'true' or 'false', [".concat(u.negativePositiveSignBehavior,"] given."));var B=q(s.isNull(u.negativeBracketsTypeOnBlur)?["",""]:u.negativeBracketsTypeOnBlur.split(","),2),T=B[0],V=B[1];(s.contains(u.digitGroupSeparator,u.negativeSignCharacter)||s.contains(u.decimalCharacter,u.negativeSignCharacter)||s.contains(u.decimalCharacterAlternative,u.negativeSignCharacter)||s.contains(T,u.negativeSignCharacter)||s.contains(V,u.negativeSignCharacter)||s.contains(u.suffixText,u.negativeSignCharacter))&&s.throwError("The negative sign character option 'negativeSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [".concat(u.negativeSignCharacter,"] given.")),(s.contains(u.digitGroupSeparator,u.positiveSignCharacter)||s.contains(u.decimalCharacter,u.positiveSignCharacter)||s.contains(u.decimalCharacterAlternative,u.positiveSignCharacter)||s.contains(T,u.positiveSignCharacter)||s.contains(V,u.positiveSignCharacter)||s.contains(u.suffixText,u.positiveSignCharacter))&&s.throwError("The positive sign character option 'positiveSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [".concat(u.positiveSignCharacter,"] given.")),s.isNull(u.overrideMinMaxLimits)||s.isInArray(u.overrideMinMaxLimits,[m.options.overrideMinMaxLimits.ceiling,m.options.overrideMinMaxLimits.floor,m.options.overrideMinMaxLimits.ignore,m.options.overrideMinMaxLimits.invalid])||s.throwError("The override min & max limits option 'overrideMinMaxLimits' is invalid ; it should either be 'ceiling', 'floor', 'ignore' or 'invalid', [".concat(u.overrideMinMaxLimits,"] given.")),u.overrideMinMaxLimits!==m.options.overrideMinMaxLimits.invalid&&u.overrideMinMaxLimits!==m.options.overrideMinMaxLimits.ignore&&(u.minimumValue>0||u.maximumValue<0)&&s.warning("You've set a `minimumValue` or a `maximumValue` excluding the value `0`. AutoNumeric will force the users to always have a valid value in the input, hence preventing them to clear the field. If you want to allow for temporary invalid values (i.e. out-of-range), you should use the 'invalid' option for the 'overrideMinMaxLimits' setting."),s.isString(u.maximumValue)&&A.test(u.maximumValue)||s.throwError("The maximum possible value option 'maximumValue' is invalid ; it should be a string that represents a positive or negative number, [".concat(u.maximumValue,"] given.")),s.isString(u.minimumValue)&&A.test(u.minimumValue)||s.throwError("The minimum possible value option 'minimumValue' is invalid ; it should be a string that represents a positive or negative number, [".concat(u.minimumValue,"] given.")),parseFloat(u.minimumValue)>parseFloat(u.maximumValue)&&s.throwError("The minimum possible value option is greater than the maximum possible value option ; 'minimumValue' [".concat(u.minimumValue,"] should be smaller than 'maximumValue' [").concat(u.maximumValue,"].")),s.isInt(u.decimalPlaces)&&u.decimalPlaces>=0||s.isString(u.decimalPlaces)&&S.test(u.decimalPlaces)||s.throwError("The number of decimal places option 'decimalPlaces' is invalid ; it should be a positive integer, [".concat(u.decimalPlaces,"] given.")),s.isNull(u.decimalPlacesRawValue)||s.isInt(u.decimalPlacesRawValue)&&u.decimalPlacesRawValue>=0||s.isString(u.decimalPlacesRawValue)&&S.test(u.decimalPlacesRawValue)||s.throwError("The number of decimal places for the raw value option 'decimalPlacesRawValue' is invalid ; it should be a positive integer or `null`, [".concat(u.decimalPlacesRawValue,"] given.")),this._validateDecimalPlacesRawValue(u),s.isNull(u.decimalPlacesShownOnFocus)||S.test(String(u.decimalPlacesShownOnFocus))||s.throwError("The number of expanded decimal places option 'decimalPlacesShownOnFocus' is invalid ; it should be a positive integer or `null`, [".concat(u.decimalPlacesShownOnFocus,"] given.")),!s.isNull(u.decimalPlacesShownOnFocus)&&Number(u.decimalPlaces)>Number(u.decimalPlacesShownOnFocus)&&s.warning("The extended decimal places 'decimalPlacesShownOnFocus' [".concat(u.decimalPlacesShownOnFocus,"] should be greater than the 'decimalPlaces' [").concat(u.decimalPlaces,"] value. Currently, this will limit the ability of your user to manually change some of the decimal places. Do you really want to do that?"),u.showWarnings),(s.isNull(u.divisorWhenUnfocused)||y.test(u.divisorWhenUnfocused))&&u.divisorWhenUnfocused!==0&&u.divisorWhenUnfocused!=="0"&&u.divisorWhenUnfocused!==1&&u.divisorWhenUnfocused!=="1"||s.throwError("The divisor option 'divisorWhenUnfocused' is invalid ; it should be a positive number higher than one, preferably an integer, [".concat(u.divisorWhenUnfocused,"] given.")),s.isNull(u.decimalPlacesShownOnBlur)||S.test(u.decimalPlacesShownOnBlur)||s.throwError("The number of decimals shown when unfocused option 'decimalPlacesShownOnBlur' is invalid ; it should be a positive integer or `null`, [".concat(u.decimalPlacesShownOnBlur,"] given.")),s.isNull(u.symbolWhenUnfocused)||s.isString(u.symbolWhenUnfocused)||s.throwError("The symbol to show when unfocused option 'symbolWhenUnfocused' is invalid ; it should be a string, [".concat(u.symbolWhenUnfocused,"] given.")),s.isTrueOrFalseString(u.saveValueToSessionStorage)||s.isBoolean(u.saveValueToSessionStorage)||s.throwError("The save to session storage option 'saveValueToSessionStorage' is invalid ; it should be either 'true' or 'false', [".concat(u.saveValueToSessionStorage,"] given.")),s.isInArray(u.onInvalidPaste,[m.options.onInvalidPaste.error,m.options.onInvalidPaste.ignore,m.options.onInvalidPaste.clamp,m.options.onInvalidPaste.truncate,m.options.onInvalidPaste.replace])||s.throwError("The paste behavior option 'onInvalidPaste' is invalid ; it should either be 'error', 'ignore', 'clamp', 'truncate' or 'replace' (cf. documentation), [".concat(u.onInvalidPaste,"] given.")),s.isInArray(u.roundingMethod,[m.options.roundingMethod.halfUpSymmetric,m.options.roundingMethod.halfUpAsymmetric,m.options.roundingMethod.halfDownSymmetric,m.options.roundingMethod.halfDownAsymmetric,m.options.roundingMethod.halfEvenBankersRounding,m.options.roundingMethod.upRoundAwayFromZero,m.options.roundingMethod.downRoundTowardZero,m.options.roundingMethod.toCeilingTowardPositiveInfinity,m.options.roundingMethod.toFloorTowardNegativeInfinity,m.options.roundingMethod.toNearest05,m.options.roundingMethod.toNearest05Alt,m.options.roundingMethod.upToNext05,m.options.roundingMethod.downToNext05])||s.throwError("The rounding method option 'roundingMethod' is invalid ; it should either be 'S', 'A', 's', 'a', 'B', 'U', 'D', 'C', 'F', 'N05', 'CHF', 'U05' or 'D05' (cf. documentation), [".concat(u.roundingMethod,"] given.")),s.isNull(u.negativeBracketsTypeOnBlur)||s.isInArray(u.negativeBracketsTypeOnBlur,[m.options.negativeBracketsTypeOnBlur.parentheses,m.options.negativeBracketsTypeOnBlur.brackets,m.options.negativeBracketsTypeOnBlur.chevrons,m.options.negativeBracketsTypeOnBlur.curlyBraces,m.options.negativeBracketsTypeOnBlur.angleBrackets,m.options.negativeBracketsTypeOnBlur.japaneseQuotationMarks,m.options.negativeBracketsTypeOnBlur.halfBrackets,m.options.negativeBracketsTypeOnBlur.whiteSquareBrackets,m.options.negativeBracketsTypeOnBlur.quotationMarks,m.options.negativeBracketsTypeOnBlur.guillemets])||s.throwError("The brackets for negative values option 'negativeBracketsTypeOnBlur' is invalid ; it should either be '(,)', '[,]', '<,>', '{,}', '\u3008,\u3009', '\uFF62,\uFF63', '\u2E24,\u2E25', '\u27E6,\u27E7', '\u2039,\u203A' or '\xAB,\xBB', [".concat(u.negativeBracketsTypeOnBlur,"] given.")),(s.isString(u.emptyInputBehavior)||s.isNumber(u.emptyInputBehavior))&&(s.isInArray(u.emptyInputBehavior,[m.options.emptyInputBehavior.focus,m.options.emptyInputBehavior.press,m.options.emptyInputBehavior.always,m.options.emptyInputBehavior.min,m.options.emptyInputBehavior.max,m.options.emptyInputBehavior.zero,m.options.emptyInputBehavior.null])||A.test(u.emptyInputBehavior))||s.throwError("The display on empty string option 'emptyInputBehavior' is invalid ; it should either be 'focus', 'press', 'always', 'min', 'max', 'zero', 'null', a number, or a string that represents a number, [".concat(u.emptyInputBehavior,"] given.")),u.emptyInputBehavior===m.options.emptyInputBehavior.zero&&(u.minimumValue>0||u.maximumValue<0)&&s.throwError("The 'emptyInputBehavior' option is set to 'zero', but this value is outside of the range defined by 'minimumValue' and 'maximumValue' [".concat(u.minimumValue,", ").concat(u.maximumValue,"].")),A.test(String(u.emptyInputBehavior))&&(this._isWithinRangeWithOverrideOption(u.emptyInputBehavior,u)||s.throwError("The 'emptyInputBehavior' option is set to a number or a string that represents a number, but its value [".concat(u.emptyInputBehavior,"] is outside of the range defined by the 'minimumValue' and 'maximumValue' options [").concat(u.minimumValue,", ").concat(u.maximumValue,"]."))),s.isTrueOrFalseString(u.eventBubbles)||s.isBoolean(u.eventBubbles)||s.throwError("The event bubbles option 'eventBubbles' is invalid ; it should be either 'true' or 'false', [".concat(u.eventBubbles,"] given.")),s.isTrueOrFalseString(u.eventIsCancelable)||s.isBoolean(u.eventIsCancelable)||s.throwError("The event is cancelable option 'eventIsCancelable' is invalid ; it should be either 'true' or 'false', [".concat(u.eventIsCancelable,"] given.")),!s.isBoolean(u.invalidClass)&&/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(u.invalidClass)||s.throwError("The name of the 'invalidClass' option is not a valid CSS class name ; it should not be empty, and should follow the '^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$' regex, [".concat(u.invalidClass,"] given.")),s.isInArray(u.leadingZero,[m.options.leadingZero.allow,m.options.leadingZero.deny,m.options.leadingZero.keep])||s.throwError("The leading zero behavior option 'leadingZero' is invalid ; it should either be 'allow', 'deny' or 'keep', [".concat(u.leadingZero,"] given.")),s.isTrueOrFalseString(u.formatOnPageLoad)||s.isBoolean(u.formatOnPageLoad)||s.throwError("The format on initialization option 'formatOnPageLoad' is invalid ; it should be either 'true' or 'false', [".concat(u.formatOnPageLoad,"] given.")),s.isTrueOrFalseString(u.formulaMode)||s.isBoolean(u.formulaMode)||s.throwError("The formula mode option 'formulaMode' is invalid ; it should be either 'true' or 'false', [".concat(u.formulaMode,"] given.")),S.test(u.historySize)&&u.historySize!==0||s.throwError("The history size option 'historySize' is invalid ; it should be a positive integer, [".concat(u.historySize,"] given.")),s.isTrueOrFalseString(u.selectNumberOnly)||s.isBoolean(u.selectNumberOnly)||s.throwError("The select number only option 'selectNumberOnly' is invalid ; it should be either 'true' or 'false', [".concat(u.selectNumberOnly,"] given.")),s.isTrueOrFalseString(u.selectOnFocus)||s.isBoolean(u.selectOnFocus)||s.throwError("The select on focus option 'selectOnFocus' is invalid ; it should be either 'true' or 'false', [".concat(u.selectOnFocus,"] given.")),s.isNull(u.defaultValueOverride)||u.defaultValueOverride===""||A.test(u.defaultValueOverride)||s.throwError("The unformatted default value option 'defaultValueOverride' is invalid ; it should be a string that represents a positive or negative number, [".concat(u.defaultValueOverride,"] given.")),s.isTrueOrFalseString(u.unformatOnSubmit)||s.isBoolean(u.unformatOnSubmit)||s.throwError("The remove formatting on submit option 'unformatOnSubmit' is invalid ; it should be either 'true' or 'false', [".concat(u.unformatOnSubmit,"] given.")),s.isNull(u.valuesToStrings)||s.isObject(u.valuesToStrings)||s.throwError("The option 'valuesToStrings' is invalid ; it should be an object, ideally with 'key -> value' entries, [".concat(u.valuesToStrings,"] given.")),s.isNull(u.outputFormat)||s.isInArray(u.outputFormat,[m.options.outputFormat.string,m.options.outputFormat.number,m.options.outputFormat.dot,m.options.outputFormat.negativeDot,m.options.outputFormat.comma,m.options.outputFormat.negativeComma,m.options.outputFormat.dotNegative,m.options.outputFormat.commaNegative])||s.throwError("The custom locale format option 'outputFormat' is invalid ; it should either be null, 'string', 'number', '.', '-.', ',', '-,', '.-' or ',-', [".concat(u.outputFormat,"] given.")),s.isTrueOrFalseString(u.isCancellable)||s.isBoolean(u.isCancellable)||s.throwError("The cancellable behavior option 'isCancellable' is invalid ; it should be either 'true' or 'false', [".concat(u.isCancellable,"] given.")),s.isTrueOrFalseString(u.modifyValueOnUpDownArrow)||s.isBoolean(u.modifyValueOnUpDownArrow)||s.throwError("The increment/decrement on up and down arrow keys 'modifyValueOnUpDownArrow' is invalid ; it should be either 'true' or 'false', [".concat(u.modifyValueOnUpDownArrow,"] given.")),s.isTrueOrFalseString(u.modifyValueOnWheel)||s.isBoolean(u.modifyValueOnWheel)||s.throwError("The increment/decrement on mouse wheel option 'modifyValueOnWheel' is invalid ; it should be either 'true' or 'false', [".concat(u.modifyValueOnWheel,"] given.")),s.isTrueOrFalseString(u.watchExternalChanges)||s.isBoolean(u.watchExternalChanges)||s.throwError("The option 'watchExternalChanges' is invalid ; it should be either 'true' or 'false', [".concat(u.watchExternalChanges,"] given.")),s.isInArray(u.wheelOn,[m.options.wheelOn.focus,m.options.wheelOn.hover])||s.throwError("The wheel behavior option 'wheelOn' is invalid ; it should either be 'focus' or 'hover', [".concat(u.wheelOn,"] given.")),(!s.isString(u.upDownStep)&&!s.isNumber(u.upDownStep)||u.upDownStep!=="progressive"&&!y.test(u.upDownStep)||Number(u.upDownStep)===0)&&s.throwError("The up/down arrow step value option 'upDownStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [".concat(u.upDownStep,"] given.")),(!s.isString(u.wheelStep)&&!s.isNumber(u.wheelStep)||u.wheelStep!=="progressive"&&!y.test(u.wheelStep)||Number(u.wheelStep)===0)&&s.throwError("The wheel step value option 'wheelStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [".concat(u.wheelStep,"] given.")),s.isInArray(u.serializeSpaces,[m.options.serializeSpaces.plus,m.options.serializeSpaces.percent])||s.throwError("The space replacement character option 'serializeSpaces' is invalid ; it should either be '+' or '%20', [".concat(u.serializeSpaces,"] given.")),s.isTrueOrFalseString(u.noEventListeners)||s.isBoolean(u.noEventListeners)||s.throwError("The option 'noEventListeners' that prevent the creation of event listeners is invalid ; it should be either 'true' or 'false', [".concat(u.noEventListeners,"] given.")),s.isNull(u.styleRules)||s.isObject(u.styleRules)&&(Object.prototype.hasOwnProperty.call(u.styleRules,"positive")||Object.prototype.hasOwnProperty.call(u.styleRules,"negative")||Object.prototype.hasOwnProperty.call(u.styleRules,"ranges")||Object.prototype.hasOwnProperty.call(u.styleRules,"userDefined"))||s.throwError("The option 'styleRules' is invalid ; it should be a correctly structured object, with one or more 'positive', 'negative', 'ranges' or 'userDefined' attributes, [".concat(u.styleRules,"] given.")),s.isNull(u.styleRules)||!Object.prototype.hasOwnProperty.call(u.styleRules,"userDefined")||s.isNull(u.styleRules.userDefined)||u.styleRules.userDefined.forEach(function(R){Object.prototype.hasOwnProperty.call(R,"callback")&&!s.isFunction(R.callback)&&s.throwError("The callback defined in the `userDefined` attribute is not a function, ".concat(ae(R.callback)," given."))}),(s.isNull(u.rawValueDivisor)||y.test(u.rawValueDivisor))&&u.rawValueDivisor!==0&&u.rawValueDivisor!=="0"&&u.rawValueDivisor!==1&&u.rawValueDivisor!=="1"||s.throwError("The raw value divisor option 'rawValueDivisor' is invalid ; it should be a positive number higher than one, preferably an integer, [".concat(u.rawValueDivisor,"] given.")),s.isTrueOrFalseString(u.readOnly)||s.isBoolean(u.readOnly)||s.throwError("The option 'readOnly' is invalid ; it should be either 'true' or 'false', [".concat(u.readOnly,"] given.")),s.isTrueOrFalseString(u.unformatOnHover)||s.isBoolean(u.unformatOnHover)||s.throwError("The option 'unformatOnHover' is invalid ; it should be either 'true' or 'false', [".concat(u.unformatOnHover,"] given.")),s.isTrueOrFalseString(u.failOnUnknownOption)||s.isBoolean(u.failOnUnknownOption)||s.throwError("The debug option 'failOnUnknownOption' is invalid ; it should be either 'true' or 'false', [".concat(u.failOnUnknownOption,"] given.")),s.isTrueOrFalseString(u.createLocalList)||s.isBoolean(u.createLocalList)||s.throwError("The debug option 'createLocalList' is invalid ; it should be either 'true' or 'false', [".concat(u.createLocalList,"] given."))}},{key:"_validateDecimalPlacesRawValue",value:function(t){s.isNull(t.decimalPlacesRawValue)||(t.decimalPlacesRawValue<t.decimalPlaces&&s.warning("The number of decimal places to store in the raw value [".concat(t.decimalPlacesRawValue,"] is lower than the ones to display [").concat(t.decimalPlaces,"]. This will likely confuse your users.\nTo solve that, you'd need to either set `decimalPlacesRawValue` to `null`, or set a number of decimal places for the raw value equal of bigger than `decimalPlaces`."),t.showWarnings),t.decimalPlacesRawValue<t.decimalPlacesShownOnFocus&&s.warning("The number of decimal places to store in the raw value [".concat(t.decimalPlacesRawValue,"] is lower than the ones shown on focus [").concat(t.decimalPlacesShownOnFocus,"]. This will likely confuse your users.\nTo solve that, you'd need to either set `decimalPlacesRawValue` to `null`, or set a number of decimal places for the raw value equal of bigger than `decimalPlacesShownOnFocus`."),t.showWarnings),t.decimalPlacesRawValue<t.decimalPlacesShownOnBlur&&s.warning("The number of decimal places to store in the raw value [".concat(t.decimalPlacesRawValue,"] is lower than the ones shown when unfocused [").concat(t.decimalPlacesShownOnBlur,"]. This will likely confuse your users.\nTo solve that, you'd need to either set `decimalPlacesRawValue` to `null`, or set a number of decimal places for the raw value equal of bigger than `decimalPlacesShownOnBlur`."),t.showWarnings))}},{key:"areSettingsValid",value:function(t){var o=!0;try{this.validate(t,!0)}catch{o=!1}return o}},{key:"getDefaultConfig",value:function(){return m.defaultSettings}},{key:"getPredefinedOptions",value:function(){return m.predefinedOptions}},{key:"_generateOptionsObjectFromOptionsArray",value:function(t){var o,d=this;return s.isUndefinedOrNullOrEmpty(t)||t.length===0?o=null:(o={},t.length===1&&Array.isArray(t[0])?t[0].forEach(function(u){de(o,d._getOptionObject(u))}):t.length>=1&&t.forEach(function(u){de(o,d._getOptionObject(u))})),o}},{key:"format",value:function(t){if(s.isUndefined(t)||t===null)return null;var o;o=s.isElement(t)?s.getElementValue(t):t,s.isString(o)||s.isNumber(o)||s.throwError('The value "'.concat(o,'" being "set" is not numeric and therefore cannot be used appropriately.'));for(var d=arguments.length,u=new Array(d>1?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];var b=this._generateOptionsObjectFromOptionsArray(u),S=de({},this.getDefaultConfig(),b);S.isNegativeSignAllowed=o<0,S.isPositiveSignAllowed=o>=0,this._setBrackets(S),this._cachesUsualRegularExpressions(S,{});var k=this._toNumericValue(o,S);return isNaN(Number(k))&&s.throwError("The value [".concat(k,"] that you are trying to format is not a recognized number.")),this._isWithinRangeWithOverrideOption(k,S)||(s.triggerEvent(m.events.formatted,document,{oldValue:null,newValue:null,oldRawValue:null,newRawValue:null,isPristine:null,error:"Range test failed",aNElement:null},!0,!0),s.throwError("The value [".concat(k,"] being set falls outside of the minimumValue [").concat(S.minimumValue,"] and maximumValue [").concat(S.maximumValue,"] range set for this element"))),S.valuesToStrings&&this._checkValuesToStringsSettings(o,S)?S.valuesToStrings[o]:(this._correctNegativePositiveSignPlacementOption(S),this._calculateDecimalPlacesOnInit(S),s.isUndefinedOrNullOrEmpty(S.rawValueDivisor)||S.rawValueDivisor===0||k===""||k===null||(k*=S.rawValueDivisor),k=this._roundFormattedValueShownOnFocus(k,S),k=this._modifyNegativeSignAndDecimalCharacterForFormattedValue(k,S),k=this._addGroupSeparators(k,S,!1,k))}},{key:"formatAndSet",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=this.format(t,o);return s.setElementValue(t,d),d}},{key:"unformat",value:function(t){if(s.isNumberStrict(t))return t;var o;if((o=s.isElement(t)?s.getElementValue(t):t)==="")return"";if(s.isUndefined(o)||o===null)return null;(s.isArray(o)||s.isObject(o))&&s.throwError("A number or a string representing a number is needed to be able to unformat it, [".concat(o,"] given."));for(var d=arguments.length,u=new Array(d>1?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];var b=this._generateOptionsObjectFromOptionsArray(u),S=de({},this.getDefaultConfig(),b);if(S.isNegativeSignAllowed=!1,S.isPositiveSignAllowed=!0,o=o.toString(),S.valuesToStrings&&this._checkStringsToValuesSettings(o,S))return s.objectKeyLookup(S.valuesToStrings,o);if(s.isNegative(o,S.negativeSignCharacter))S.isNegativeSignAllowed=!0,S.isPositiveSignAllowed=!1;else if(!s.isNull(S.negativeBracketsTypeOnBlur)){var k=q(S.negativeBracketsTypeOnBlur.split(","),2);S.firstBracket=k[0],S.lastBracket=k[1],o.charAt(0)===S.firstBracket&&o.charAt(o.length-1)===S.lastBracket&&(S.isNegativeSignAllowed=!0,S.isPositiveSignAllowed=!1,o=this._removeBrackets(o,S,!1))}return o=this._convertToNumericString(o,S),s.isNumber(Number(o))&&(o=s.scientificToDecimal(o)),new RegExp("[^+-0123456789.]","gi").test(o)?NaN:(this._correctNegativePositiveSignPlacementOption(S),S.decimalPlacesRawValue?S.originalDecimalPlacesRawValue=S.decimalPlacesRawValue:S.originalDecimalPlacesRawValue=S.decimalPlaces,this._calculateDecimalPlacesOnInit(S),s.isUndefinedOrNullOrEmpty(S.rawValueDivisor)||S.rawValueDivisor===0||o===""||o===null||(o/=S.rawValueDivisor),o=(o=this._roundRawValue(o,S)).replace(S.decimalCharacter,"."),o=this._toLocale(o,S.outputFormat,S))}},{key:"unformatAndSet",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=this.unformat(t,o);return s.setElementValue(t,d),d}},{key:"localize",value:function(t){var o,d,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return(o=s.isElement(t)?s.getElementValue(t):t)===""?"":(s.isNull(u)&&(u=m.defaultSettings),o=this.unformat(o,u),Number(o)===0&&u.leadingZero!==m.options.leadingZero.keep&&(o="0"),d=s.isNull(u)?u.outputFormat:m.defaultSettings.outputFormat,this._toLocale(o,d,u))}},{key:"localizeAndSet",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=this.localize(t,o);return s.setElementValue(t,d),d}},{key:"isManagedByAutoNumeric",value:function(t){return this._isInGlobalList(s.domElement(t))}},{key:"getAutoNumericElement",value:function(t){var o=s.domElement(t);return this.isManagedByAutoNumeric(o)?this._getFromGlobalList(o):null}},{key:"set",value:function(t,o){var d,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=s.domElement(t);return this.isManagedByAutoNumeric(b)?this.getAutoNumericElement(b).set(o,u,p):(d=!(!s.isNull(u)&&Object.prototype.hasOwnProperty.call(u,"showWarnings"))||u.showWarnings,s.warning("Impossible to find an AutoNumeric object for the given DOM element or selector.",d),null)}},{key:"getNumericString",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._get(t,"getNumericString",o)}},{key:"getFormatted",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._get(t,"getFormatted",o)}},{key:"getNumber",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._get(t,"getNumber",o)}},{key:"_get",value:function(t,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=s.domElement(t);return this.isManagedByAutoNumeric(u)||s.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(u)[o](d)}},{key:"getLocalized",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=s.domElement(t);return this.isManagedByAutoNumeric(u)||s.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(u).getLocalized(o,d)}},{key:"_stripAllNonNumberCharacters",value:function(t,o,d,u){return this._stripAllNonNumberCharactersExceptCustomDecimalChar(t,o,d,u).replace(o.decimalCharacter,".")}},{key:"_stripAllNonNumberCharactersExceptCustomDecimalChar",value:function(t,o,d,u){var p=(t=(t=this._normalizeCurrencySuffixAndNegativeSignCharacters(t,o)).replace(o.allowedAutoStrip,"")).match(o.numRegAutoStrip);if(t=p?[p[1],p[2],p[3]].join(""):"",o.leadingZero===m.options.leadingZero.allow||o.leadingZero===m.options.leadingZero.keep){var b="",S=q(t.split(o.decimalCharacter),2),k=S[0],A=S[1],y=k;s.contains(y,o.negativeSignCharacter)&&(b=o.negativeSignCharacter,y=y.replace(o.negativeSignCharacter,"")),b===""&&y.length>o.mIntPos&&y.charAt(0)==="0"&&(y=y.slice(1)),b!==""&&y.length>o.mIntNeg&&y.charAt(0)==="0"&&(y=y.slice(1)),t="".concat(b).concat(y).concat(s.isUndefined(A)?"":o.decimalCharacter+A)}return(d&&o.leadingZero===m.options.leadingZero.deny||!u&&o.leadingZero===m.options.leadingZero.allow)&&(t=t.replace(o.stripReg,"$1$2")),t}},{key:"_toggleNegativeBracket",value:function(t,o,d){return d?this._removeBrackets(t,o):this._addBrackets(t,o)}},{key:"_addBrackets",value:function(t,o){return s.isNull(o.negativeBracketsTypeOnBlur)?t:"".concat(o.firstBracket).concat(t.replace(o.negativeSignCharacter,"")).concat(o.lastBracket)}},{key:"_removeBrackets",value:function(t,o){var d,u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return s.isNull(o.negativeBracketsTypeOnBlur)||t.charAt(0)!==o.firstBracket?d=t:(d=(d=t.replace(o.firstBracket,"")).replace(o.lastBracket,""),u?(d=d.replace(o.currencySymbol,""),d=this._mergeCurrencySignNegativePositiveSignAndValue(d,o,!0,!1)):d="".concat(o.negativeSignCharacter).concat(d)),d}},{key:"_setBrackets",value:function(t){if(s.isNull(t.negativeBracketsTypeOnBlur))t.firstBracket="",t.lastBracket="";else{var o=q(t.negativeBracketsTypeOnBlur.split(","),2),d=o[0],u=o[1];t.firstBracket=d,t.lastBracket=u}}},{key:"_convertToNumericString",value:function(t,o){t=this._removeBrackets(t,o,!1),t=(t=this._normalizeCurrencySuffixAndNegativeSignCharacters(t,o)).replace(new RegExp("[".concat(o.digitGroupSeparator,"]"),"g"),""),o.decimalCharacter!=="."&&(t=t.replace(o.decimalCharacter,".")),s.isNegative(t)&&t.lastIndexOf("-")===t.length-1&&(t=t.replace("-",""),t="-".concat(t)),o.showPositiveSign&&(t=t.replace(o.positiveSignCharacter,""));var d=o.leadingZero!==m.options.leadingZero.keep,u=s.arabicToLatinNumbers(t,d,!1,!1);return isNaN(u)||(t=u.toString()),t}},{key:"_normalizeCurrencySuffixAndNegativeSignCharacters",value:function(t,o){return t=String(t),o.currencySymbol!==m.options.currencySymbol.none&&(t=t.replace(o.currencySymbol,"")),o.suffixText!==m.options.suffixText.none&&(t=t.replace(o.suffixText,"")),o.negativeSignCharacter!==m.options.negativeSignCharacter.hyphen&&(t=t.replace(o.negativeSignCharacter,"-")),t}},{key:"_toLocale",value:function(t,o,d){if(s.isNull(o)||o===m.options.outputFormat.string)return t;var u;switch(o){case m.options.outputFormat.number:u=Number(t);break;case m.options.outputFormat.dotNegative:u=s.isNegative(t)?t.replace("-","")+"-":t;break;case m.options.outputFormat.comma:case m.options.outputFormat.negativeComma:u=t.replace(".",",");break;case m.options.outputFormat.commaNegative:u=t.replace(".",","),u=s.isNegative(u)?u.replace("-","")+"-":u;break;case m.options.outputFormat.dot:case m.options.outputFormat.negativeDot:u=t;break;default:s.throwError("The given outputFormat [".concat(o,"] option is not recognized."))}return o!==m.options.outputFormat.number&&d.negativeSignCharacter!=="-"&&(u=u.replace("-",d.negativeSignCharacter)),u}},{key:"_modifyNegativeSignAndDecimalCharacterForFormattedValue",value:function(t,o){return o.negativeSignCharacter!=="-"&&(t=t.replace("-",o.negativeSignCharacter)),o.decimalCharacter!=="."&&(t=t.replace(".",o.decimalCharacter)),t}},{key:"_isElementValueEmptyOrOnlyTheNegativeSign",value:function(t,o){return t===""||t===o.negativeSignCharacter}},{key:"_orderValueCurrencySymbolAndSuffixText",value:function(t,o,d){var u;if(o.emptyInputBehavior===m.options.emptyInputBehavior.always||d)switch(o.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.left:case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.none:u=t+o.currencySymbol+o.suffixText;break;default:u=o.currencySymbol+t+o.suffixText}else u=t;return u}},{key:"_addGroupSeparators",value:function(t,o,d,u){var p,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(p=s.isNull(b)?s.isNegative(t,o.negativeSignCharacter)||s.isNegativeWithBrackets(t,o.firstBracket,o.lastBracket):b<0,t=this._stripAllNonNumberCharactersExceptCustomDecimalChar(t,o,!1,d),this._isElementValueEmptyOrOnlyTheNegativeSign(t,o))return this._orderValueCurrencySymbolAndSuffixText(t,o,!0);var S=s.isZeroOrHasNoValue(t);p&&(t=t.replace("-",""));var k,A=q(t.split(o.decimalCharacter),2),y=A[0],B=A[1];if(o.decimalCharacterAlternative&&s.isUndefined(B)){var T=q(t.split(o.decimalCharacterAlternative),2);y=T[0],B=T[1]}if(o.digitGroupSeparator!==""){var V;switch(o.digitalGroupSpacing=o.digitalGroupSpacing.toString(),o.digitalGroupSpacing){case m.options.digitalGroupSpacing.twoThree:V=/(\d)((\d)(\d{2}?)+)$/;break;case m.options.digitalGroupSpacing.twoScaled:V=/(\d)((?:\d{2}){0,2}\d{3}(?:(?:\d{2}){2}\d{3})*?)$/;break;case m.options.digitalGroupSpacing.two:case m.options.digitalGroupSpacing.three:case m.options.digitalGroupSpacing.four:default:V=new RegExp("(\\d)((\\d{".concat(o.digitalGroupSpacing,"}?)+)$"))}for(;V.test(y);)y=y.replace(V,"$1".concat(o.digitGroupSeparator,"$2"))}return(k=d?o.decimalPlacesShownOnFocus:o.decimalPlacesShownOnBlur)===0||s.isUndefined(B)?t=y:(B.length>k&&(B=B.substring(0,k)),t="".concat(y).concat(o.decimalCharacter).concat(B)),t=m._mergeCurrencySignNegativePositiveSignAndValue(t,o,p,S),s.isNull(b)&&(b=u),o.negativeBracketsTypeOnBlur!==null&&(b<0||s.isNegativeStrict(t,o.negativeSignCharacter))&&(t=this._toggleNegativeBracket(t,o,d)),o.suffixText?"".concat(t).concat(o.suffixText):t}},{key:"_mergeCurrencySignNegativePositiveSignAndValue",value:function(t,o,d,u){var p,b="";if(d?b=o.negativeSignCharacter:o.showPositiveSign&&!u&&(b=o.positiveSignCharacter),o.currencySymbolPlacement===m.options.currencySymbolPlacement.prefix)if(o.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(d||!d&&o.showPositiveSign&&!u))switch(o.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.prefix:case m.options.negativePositiveSignPlacement.left:p="".concat(b).concat(o.currencySymbol).concat(t);break;case m.options.negativePositiveSignPlacement.right:p="".concat(o.currencySymbol).concat(b).concat(t);break;case m.options.negativePositiveSignPlacement.suffix:p="".concat(o.currencySymbol).concat(t).concat(b)}else p=o.currencySymbol+t;else if(o.currencySymbolPlacement===m.options.currencySymbolPlacement.suffix)if(o.negativePositiveSignPlacement!==m.options.negativePositiveSignPlacement.none&&(d||!d&&o.showPositiveSign&&!u))switch(o.negativePositiveSignPlacement){case m.options.negativePositiveSignPlacement.suffix:case m.options.negativePositiveSignPlacement.right:p="".concat(t).concat(o.currencySymbol).concat(b);break;case m.options.negativePositiveSignPlacement.left:p="".concat(t).concat(b).concat(o.currencySymbol);break;case m.options.negativePositiveSignPlacement.prefix:p="".concat(b).concat(t).concat(o.currencySymbol)}else p=t+o.currencySymbol;return p}},{key:"_truncateZeros",value:function(t,o){var d;switch(o){case 0:d=/(\.(?:\d*[1-9])?)0*$/;break;case 1:d=/(\.\d(?:\d*[1-9])?)0*$/;break;default:d=new RegExp("(\\.\\d{".concat(o,"}(?:\\d*[1-9])?)0*"))}return t=t.replace(d,"$1"),o===0&&(t=t.replace(/\.$/,"")),t}},{key:"_roundRawValue",value:function(t,o){return this._roundValue(t,o,o.decimalPlacesRawValue)}},{key:"_roundFormattedValueShownOnFocus",value:function(t,o){return this._roundValue(t,o,Number(o.decimalPlacesShownOnFocus))}},{key:"_roundFormattedValueShownOnBlur",value:function(t,o){return this._roundValue(t,o,Number(o.decimalPlacesShownOnBlur))}},{key:"_roundFormattedValueShownOnFocusOrBlur",value:function(t,o,d){return d?this._roundFormattedValueShownOnFocus(t,o):this._roundFormattedValueShownOnBlur(t,o)}},{key:"_roundValue",value:function(t,o,d){if(s.isNull(t))return t;if(t=t===""?"0":t.toString(),o.roundingMethod===m.options.roundingMethod.toNearest05||o.roundingMethod===m.options.roundingMethod.toNearest05Alt||o.roundingMethod===m.options.roundingMethod.upToNext05||o.roundingMethod===m.options.roundingMethod.downToNext05)return this._roundCloseTo05(t,o);var u,p=q(m._prepareValueForRounding(t,o),2),b=p[0],S=(t=p[1]).lastIndexOf("."),k=S===-1,A=q(t.split("."),2),y=A[0];if(!(A[1]>0||o.allowDecimalPadding!==m.options.allowDecimalPadding.never&&o.allowDecimalPadding!==m.options.allowDecimalPadding.floats))return Number(t)===0?y:"".concat(b).concat(y);u=o.allowDecimalPadding===m.options.allowDecimalPadding.always||o.allowDecimalPadding===m.options.allowDecimalPadding.floats?d:o.allowDecimalPadding>0?o.allowDecimalPadding:0;var B,T=k?t.length-1:S,V=t.length-1-T,R="";if(V<=d){if(R=t,V<u){k&&(R="".concat(R).concat(o.decimalCharacter));for(var z="000000";V<u;)R+=z=z.substring(0,u-V),V+=z.length}else V>u?R=this._truncateZeros(R,u):V===0&&u===0&&(R=R.replace(/\.$/,""));return Number(R)===0?R:"".concat(b).concat(R)}B=k?d-1:Number(d)+Number(S);var X,te=Number(t.charAt(B+1)),ne=t.substring(0,B+1).split("");if(X=t.charAt(B)==="."?t.charAt(B-1)%2:t.charAt(B)%2,this._shouldRoundUp(te,o,b,X)){for(var ee=ne.length-1;ee>=0;ee-=1)if(ne[ee]!=="."){if(ne[ee]=+ne[ee]+1,ne[ee]<10)break;ee>0&&(ne[ee]="0")}}return ne=ne.slice(0,B+1),R=this._truncateZeros(ne.join(""),u),Number(R)===0?R:"".concat(b).concat(R)}},{key:"_roundCloseTo05",value:function(t,o){switch(o.roundingMethod){case m.options.roundingMethod.toNearest05:case m.options.roundingMethod.toNearest05Alt:t=(Math.round(20*t)/20).toString();break;case m.options.roundingMethod.upToNext05:t=(Math.ceil(20*t)/20).toString();break;default:t=(Math.floor(20*t)/20).toString()}return s.contains(t,".")?t.length-t.indexOf(".")<3?t+"0":t:t+".00"}},{key:"_prepareValueForRounding",value:function(t,o){var d="";return s.isNegativeStrict(t,"-")&&(d="-",t=t.replace("-","")),t.match(/^\d/)||(t="0".concat(t)),Number(t)===0&&(d=""),(Number(t)>0&&o.leadingZero!==m.options.leadingZero.keep||t.length>0&&o.leadingZero===m.options.leadingZero.allow)&&(t=t.replace(/^0*(\d)/,"$1")),[d,t]}},{key:"_shouldRoundUp",value:function(t,o,d,u){return t>4&&o.roundingMethod===m.options.roundingMethod.halfUpSymmetric||t>4&&o.roundingMethod===m.options.roundingMethod.halfUpAsymmetric&&d===""||t>5&&o.roundingMethod===m.options.roundingMethod.halfUpAsymmetric&&d==="-"||t>5&&o.roundingMethod===m.options.roundingMethod.halfDownSymmetric||t>5&&o.roundingMethod===m.options.roundingMethod.halfDownAsymmetric&&d===""||t>4&&o.roundingMethod===m.options.roundingMethod.halfDownAsymmetric&&d==="-"||t>5&&o.roundingMethod===m.options.roundingMethod.halfEvenBankersRounding||t===5&&o.roundingMethod===m.options.roundingMethod.halfEvenBankersRounding&&u===1||t>0&&o.roundingMethod===m.options.roundingMethod.toCeilingTowardPositiveInfinity&&d===""||t>0&&o.roundingMethod===m.options.roundingMethod.toFloorTowardNegativeInfinity&&d==="-"||t>0&&o.roundingMethod===m.options.roundingMethod.upRoundAwayFromZero}},{key:"_truncateDecimalPlaces",value:function(t,o,d,u){d&&(t=this._roundFormattedValueShownOnFocus(t,o));var p=q(t.split(o.decimalCharacter),2),b=p[0],S=p[1];if(S&&S.length>u)if(u>0){var k=S.substring(0,u);t="".concat(b).concat(o.decimalCharacter).concat(k)}else t=b;return t}},{key:"_checkIfInRangeWithOverrideOption",value:function(t,o){if(s.isNull(t)&&o.emptyInputBehavior===m.options.emptyInputBehavior.null||o.overrideMinMaxLimits===m.options.overrideMinMaxLimits.ignore||o.overrideMinMaxLimits===m.options.overrideMinMaxLimits.invalid)return[!0,!0];t=(t=t.toString()).replace(",",".");var d,u=s.parseStr(o.minimumValue),p=s.parseStr(o.maximumValue),b=s.parseStr(t);switch(o.overrideMinMaxLimits){case m.options.overrideMinMaxLimits.floor:d=[s.testMinMax(u,b)>-1,!0];break;case m.options.overrideMinMaxLimits.ceiling:d=[!0,s.testMinMax(p,b)<1];break;default:d=[s.testMinMax(u,b)>-1,s.testMinMax(p,b)<1]}return d}},{key:"_isWithinRangeWithOverrideOption",value:function(t,o){var d=q(this._checkIfInRangeWithOverrideOption(t,o),2),u=d[0],p=d[1];return u&&p}},{key:"_cleanValueForRangeParse",value:function(t){return t=t.toString().replace(",","."),s.parseStr(t)}},{key:"_isMinimumRangeRespected",value:function(t,o){return s.testMinMax(s.parseStr(o.minimumValue),this._cleanValueForRangeParse(t))>-1}},{key:"_isMaximumRangeRespected",value:function(t,o){return s.testMinMax(s.parseStr(o.maximumValue),this._cleanValueForRangeParse(t))<1}},{key:"_correctNegativePositiveSignPlacementOption",value:function(t){if(s.isNull(t.negativePositiveSignPlacement))if(s.isUndefined(t)||!s.isUndefinedOrNullOrEmpty(t.negativePositiveSignPlacement)||s.isUndefinedOrNullOrEmpty(t.currencySymbol))t.negativePositiveSignPlacement=m.options.negativePositiveSignPlacement.left;else switch(t.currencySymbolPlacement){case m.options.currencySymbolPlacement.suffix:t.negativePositiveSignPlacement=m.options.negativePositiveSignPlacement.prefix;break;case m.options.currencySymbolPlacement.prefix:t.negativePositiveSignPlacement=m.options.negativePositiveSignPlacement.left}}},{key:"_correctCaretPositionOnFocusAndSelectOnFocusOptions",value:function(t){return s.isNull(t)?null:(!s.isUndefinedOrNullOrEmpty(t.caretPositionOnFocus)&&s.isUndefinedOrNullOrEmpty(t.selectOnFocus)&&(t.selectOnFocus=m.options.selectOnFocus.doNotSelect),s.isUndefinedOrNullOrEmpty(t.caretPositionOnFocus)&&!s.isUndefinedOrNullOrEmpty(t.selectOnFocus)&&t.selectOnFocus===m.options.selectOnFocus.select&&(t.caretPositionOnFocus=m.options.caretPositionOnFocus.doNoForceCaretPosition),t)}},{key:"_calculateDecimalPlacesOnInit",value:function(t){this._validateDecimalPlacesRawValue(t),t.decimalPlacesShownOnFocus===m.options.decimalPlacesShownOnFocus.useDefault&&(t.decimalPlacesShownOnFocus=t.decimalPlaces),t.decimalPlacesShownOnBlur===m.options.decimalPlacesShownOnBlur.useDefault&&(t.decimalPlacesShownOnBlur=t.decimalPlaces),t.decimalPlacesRawValue===m.options.decimalPlacesRawValue.useDefault&&(t.decimalPlacesRawValue=t.decimalPlaces);var o=0;t.rawValueDivisor&&t.rawValueDivisor!==m.options.rawValueDivisor.none&&(o=String(t.rawValueDivisor).length-1)<0&&(o=0),t.decimalPlacesRawValue=Math.max(Math.max(t.decimalPlacesShownOnBlur,t.decimalPlacesShownOnFocus)+o,Number(t.originalDecimalPlacesRawValue)+o)}},{key:"_calculateDecimalPlacesOnUpdate",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this._validateDecimalPlacesRawValue(t),s.isNull(o)&&s.throwError("When updating the settings, the previous ones should be passed as an argument.");var d="decimalPlaces"in t;if(d||"decimalPlacesRawValue"in t||"decimalPlacesShownOnFocus"in t||"decimalPlacesShownOnBlur"in t||"rawValueDivisor"in t){d?("decimalPlacesShownOnFocus"in t&&t.decimalPlacesShownOnFocus!==m.options.decimalPlacesShownOnFocus.useDefault||(t.decimalPlacesShownOnFocus=t.decimalPlaces),"decimalPlacesShownOnBlur"in t&&t.decimalPlacesShownOnBlur!==m.options.decimalPlacesShownOnBlur.useDefault||(t.decimalPlacesShownOnBlur=t.decimalPlaces),"decimalPlacesRawValue"in t&&t.decimalPlacesRawValue!==m.options.decimalPlacesRawValue.useDefault||(t.decimalPlacesRawValue=t.decimalPlaces)):(s.isUndefined(t.decimalPlacesShownOnFocus)&&(t.decimalPlacesShownOnFocus=o.decimalPlacesShownOnFocus),s.isUndefined(t.decimalPlacesShownOnBlur)&&(t.decimalPlacesShownOnBlur=o.decimalPlacesShownOnBlur));var u=0;t.rawValueDivisor&&t.rawValueDivisor!==m.options.rawValueDivisor.none&&(u=String(t.rawValueDivisor).length-1)<0&&(u=0),t.decimalPlaces||t.decimalPlacesRawValue?t.decimalPlacesRawValue=Math.max(Math.max(t.decimalPlacesShownOnBlur,t.decimalPlacesShownOnFocus)+u,Number(t.decimalPlacesRawValue)+u):t.decimalPlacesRawValue=Math.max(Math.max(t.decimalPlacesShownOnBlur,t.decimalPlacesShownOnFocus)+u,Number(o.originalDecimalPlacesRawValue)+u)}}},{key:"_cachesUsualRegularExpressions",value:function(t,o){var d;d=t.negativeSignCharacter!==m.options.negativeSignCharacter.hyphen?"([-\\".concat(t.negativeSignCharacter,"]?)"):"(-?)",o.aNegRegAutoStrip=d,t.allowedAutoStrip=new RegExp("[^-0123456789\\".concat(t.decimalCharacter,"]"),"g"),t.numRegAutoStrip=new RegExp("".concat(d,"(?:\\").concat(t.decimalCharacter,"?([0-9]+\\").concat(t.decimalCharacter,"[0-9]+)|([0-9]*(?:\\").concat(t.decimalCharacter,"[0-9]*)?))")),t.stripReg=new RegExp("^".concat(o.aNegRegAutoStrip,"0*([0-9])")),t.formulaChars=new RegExp("[0-9".concat(t.decimalCharacter,"+\\-*/() ]"))}},{key:"_convertOldOptionsToNewOnes",value:function(t){var o={aSep:"digitGroupSeparator",nSep:"showOnlyNumbersOnFocus",dGroup:"digitalGroupSpacing",aDec:"decimalCharacter",altDec:"decimalCharacterAlternative",aSign:"currencySymbol",pSign:"currencySymbolPlacement",pNeg:"negativePositiveSignPlacement",aSuffix:"suffixText",oLimits:"overrideMinMaxLimits",vMax:"maximumValue",vMin:"minimumValue",mDec:"decimalPlacesOverride",eDec:"decimalPlacesShownOnFocus",scaleDecimal:"decimalPlacesShownOnBlur",aStor:"saveValueToSessionStorage",mRound:"roundingMethod",aPad:"allowDecimalPadding",nBracket:"negativeBracketsTypeOnBlur",wEmpty:"emptyInputBehavior",lZero:"leadingZero",aForm:"formatOnPageLoad",sNumber:"selectNumberOnly",anDefault:"defaultValueOverride",unSetOnSubmit:"unformatOnSubmit",outputType:"outputFormat",debug:"showWarnings",allowDecimalPadding:!0,alwaysAllowDecimalCharacter:!0,caretPositionOnFocus:!0,createLocalList:!0,currencySymbol:!0,currencySymbolPlacement:!0,decimalCharacter:!0,decimalCharacterAlternative:!0,decimalPlaces:!0,decimalPlacesRawValue:!0,decimalPlacesShownOnBlur:!0,decimalPlacesShownOnFocus:!0,defaultValueOverride:!0,digitalGroupSpacing:!0,digitGroupSeparator:!0,divisorWhenUnfocused:!0,emptyInputBehavior:!0,eventBubbles:!0,eventIsCancelable:!0,failOnUnknownOption:!0,formatOnPageLoad:!0,formulaMode:!0,historySize:!0,isCancellable:!0,leadingZero:!0,maximumValue:!0,minimumValue:!0,modifyValueOnUpDownArrow:!0,modifyValueOnWheel:!0,negativeBracketsTypeOnBlur:!0,negativePositiveSignPlacement:!0,negativeSignCharacter:!0,negativePositiveSignBehavior:!0,noEventListeners:!0,onInvalidPaste:!0,outputFormat:!0,overrideMinMaxLimits:!0,positiveSignCharacter:!0,rawValueDivisor:!0,readOnly:!0,roundingMethod:!0,saveValueToSessionStorage:!0,selectNumberOnly:!0,selectOnFocus:!0,serializeSpaces:!0,showOnlyNumbersOnFocus:!0,showPositiveSign:!0,showWarnings:!0,styleRules:!0,suffixText:!0,symbolWhenUnfocused:!0,upDownStep:!0,unformatOnHover:!0,unformatOnSubmit:!0,valuesToStrings:!0,watchExternalChanges:!0,wheelOn:!0,wheelStep:!0,allowedAutoStrip:!0,formulaChars:!0,isNegativeSignAllowed:!0,isPositiveSignAllowed:!0,mIntNeg:!0,mIntPos:!0,numRegAutoStrip:!0,originalDecimalPlaces:!0,originalDecimalPlacesRawValue:!0,stripReg:!0};for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){if(o[d]===!0)continue;Object.prototype.hasOwnProperty.call(o,d)?(s.warning("You are using the deprecated option name '".concat(d,"'. Please use '").concat(o[d],"' instead from now on. The old option name will be dropped very soon\u2122."),!0),t[o[d]]=t[d],delete t[d]):t.failOnUnknownOption&&s.throwError("Option name '".concat(d,"' is unknown. Please fix the options passed to autoNumeric"))}"mDec"in t&&s.warning("The old `mDec` option has been deprecated in favor of more accurate options ; `decimalPlaces`, `decimalPlacesRawValue`, `decimalPlacesShownOnFocus` and `decimalPlacesShownOnBlur`.",!0)}},{key:"_setNegativePositiveSignPermissions",value:function(t){t.isNegativeSignAllowed=t.minimumValue<0,t.isPositiveSignAllowed=t.maximumValue>=0}},{key:"_toNumericValue",value:function(t,o){var d;return s.isNumber(Number(t))?(s.isNumberStrict(t)||(t=String(t).trim()),d=s.scientificToDecimal(t)):(d=this._convertToNumericString(t.toString(),o),s.isNumber(Number(d))||(s.warning('The given value "'.concat(t,'" cannot be converted to a numeric one and therefore cannot be used appropriately.'),o.showWarnings),d=NaN)),d}},{key:"_checkIfInRange",value:function(t,o,d){var u=s.parseStr(t);return s.testMinMax(o,u)>-1&&s.testMinMax(d,u)<1}},{key:"_shouldSkipEventKey",value:function(t){var o=s.isInArray(t,a.keyName._allFnKeys),d=t===a.keyName.OSLeft||t===a.keyName.OSRight,u=t===a.keyName.ContextMenu,p=s.isInArray(t,a.keyName._someNonPrintableKeys),b=t===a.keyName.NumLock||t===a.keyName.ScrollLock||t===a.keyName.Insert||t===a.keyName.Command,S=t===a.keyName.Unidentified;return o||d||u||p||S||b}},{key:"_serialize",value:function(t){var o,d=this,u=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unformatted",b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"+",S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,k=[];return ae(t)==="object"&&t.nodeName.toLowerCase()==="form"&&Array.prototype.slice.call(t.elements).forEach(function(A){if(A.name&&!A.disabled&&["file","reset","submit","button"].indexOf(A.type)===-1){if(A.type==="select-multiple")Array.prototype.slice.call(A.options).forEach(function(V){V.selected&&(u?k.push({name:A.name,value:V.value}):k.push("".concat(encodeURIComponent(A.name),"=").concat(encodeURIComponent(V.value))))});else if(["checkbox","radio"].indexOf(A.type)===-1||A.checked){var y,B;if(d.isManagedByAutoNumeric(A))switch(p){case"unformatted":B=d.getAutoNumericElement(A),s.isNull(B)||(y=d.unformat(A,B.getSettings()));break;case"localized":if(B=d.getAutoNumericElement(A),!s.isNull(B)){var T=s.cloneObject(B.getSettings());s.isNull(S)||(T.outputFormat=S),y=d.localize(A,T)}break;default:y=A.value}else y=A.value;s.isUndefined(y)&&s.throwError("This error should never be hit. If it has, something really wrong happened!"),u?k.push({name:A.name,value:y}):k.push("".concat(encodeURIComponent(A.name),"=").concat(encodeURIComponent(y)))}}}),u?o=k:(o=k.join("&"),b==="+"&&(o=o.replace(/%20/g,"+"))),o}},{key:"_serializeNumericString",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+";return this._serialize(t,!1,"unformatted",o)}},{key:"_serializeFormatted",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+";return this._serialize(t,!1,"formatted",o)}},{key:"_serializeLocalized",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+",d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return this._serialize(t,!1,"localized",o,d)}},{key:"_serializeNumericStringArray",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+";return this._serialize(t,!0,"unformatted",o)}},{key:"_serializeFormattedArray",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+";return this._serialize(t,!0,"formatted",o)}},{key:"_serializeLocalizedArray",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"+",d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return this._serialize(t,!0,"localized",o,d)}}],x&&hr(w.prototype,x),N&&hr(w,N),Object.defineProperty(w,"prototype",{writable:!1}),m}();wt(C,"options",void 0),wt(C,"events",void 0),wt(C,"defaultSettings",void 0),wt(C,"predefinedOptions",void 0),C.multiple=function(m){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,N=[];if(s.isObject(w)&&(x=w,w=null),s.isString(m))m=Ge(document.querySelectorAll(m));else if(s.isObject(m)){Object.prototype.hasOwnProperty.call(m,"rootElement")||s.throwError("The object passed to the 'multiple' function is invalid ; no 'rootElement' attribute found.");var t=Ge(m.rootElement.querySelectorAll("input"));Object.prototype.hasOwnProperty.call(m,"exclude")?(Array.isArray(m.exclude)||s.throwError("The 'exclude' array passed to the 'multiple' function is invalid."),m=s.filterOut(t,m.exclude)):m=t}else s.isArray(m)||s.throwError("The given parameters to the 'multiple' function are invalid.");if(m.length===0){var o=!0;return!s.isNull(x)&&s.isBoolean(x.showWarnings)&&(o=x.showWarnings),s.warning("No valid DOM elements were given hence no AutoNumeric objects were instantiated.",o),[]}var d=s.isArray(w)&&w.length>=1,u=!1,p=!1;if(d){var b=ae(Number(w[0]));(u=b==="number"&&!isNaN(Number(w[0])))||(b==="string"||isNaN(b)||b==="object")&&(p=!0)}var S,k=!1;if(s.isArray(x)&&x.length>=1){var A=ae(x[0]);A!=="string"&&A!=="object"||(k=!0)}S=p?C.mergeOptions(w):k?C.mergeOptions(x):x;var y,B=s.isNumber(w);return u&&(y=w.length),m.forEach(function(T,V){B?N.push(new C(T,w,S)):u&&V<=y?N.push(new C(T,w[V],S)):N.push(new C(T,null,S))}),N},C.events={correctedValue:"autoNumeric:correctedValue",initialized:"autoNumeric:initialized",invalidFormula:"autoNumeric:invalidFormula",invalidValue:"autoNumeric:invalidValue",formatted:"autoNumeric:formatted",rawValueModified:"autoNumeric:rawValueModified",minRangeExceeded:"autoNumeric:minExceeded",maxRangeExceeded:"autoNumeric:maxExceeded",native:{input:"input",change:"change"},validFormula:"autoNumeric:validFormula"},Object.freeze(C.events.native),Object.freeze(C.events),Object.defineProperty(C,"events",{configurable:!1,writable:!1}),C.options={allowDecimalPadding:{always:!0,never:!1,floats:"floats"},alwaysAllowDecimalCharacter:{alwaysAllow:!0,doNotAllow:!1},caretPositionOnFocus:{start:"start",end:"end",decimalLeft:"decimalLeft",decimalRight:"decimalRight",doNoForceCaretPosition:null},createLocalList:{createList:!0,doNotCreateList:!1},currencySymbol:{none:"",currencySign:"\xA4",austral:"\u20B3",australCentavo:"\xA2",baht:"\u0E3F",cedi:"\u20B5",cent:"\xA2",colon:"\u20A1",cruzeiro:"\u20A2",dollar:"$",dong:"\u20AB",drachma:"\u20AF",dram:"\u200B\u058F",european:"\u20A0",euro:"\u20AC",florin:"\u0192",franc:"\u20A3",guarani:"\u20B2",hryvnia:"\u20B4",kip:"\u20AD",att:"\u0EAD\u0EB1\u0E94",lepton:"\u039B.",lira:"\u20BA",liraOld:"\u20A4",lari:"\u20BE",mark:"\u2133",mill:"\u20A5",naira:"\u20A6",peseta:"\u20A7",peso:"\u20B1",pfennig:"\u20B0",pound:"\xA3",real:"R$ ",riel:"\u17DB",ruble:"\u20BD",rupee:"\u20B9",rupeeOld:"\u20A8",shekel:"\u20AA",shekelAlt:"\u05E9\u05F4\u05D7\u200E\u200E",taka:"\u09F3",tenge:"\u20B8",togrog:"\u20AE",won:"\u20A9",yen:"\xA5"},currencySymbolPlacement:{prefix:"p",suffix:"s"},decimalCharacter:{comma:",",dot:".",middleDot:"\xB7",arabicDecimalSeparator:"\u066B",decimalSeparatorKeySymbol:"\u2396"},decimalCharacterAlternative:{none:null,comma:",",dot:"."},decimalPlaces:{none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesRawValue:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnBlur:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnFocus:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},defaultValueOverride:{doNotOverride:null},digitalGroupSpacing:{two:"2",twoThree:"2t",twoScaled:"2s",three:"3",four:"4"},digitGroupSeparator:{comma:",",dot:".",normalSpace:" ",thinSpace:"\u2009",narrowNoBreakSpace:"\u202F",noBreakSpace:"\xA0",noSeparator:"",apostrophe:"'",arabicThousandsSeparator:"\u066C",dotAbove:"\u02D9",privateUseTwo:"\u2019"},divisorWhenUnfocused:{none:null,percentage:100,permille:1e3,basisPoint:1e4},emptyInputBehavior:{focus:"focus",press:"press",always:"always",zero:"zero",min:"min",max:"max",null:"null"},eventBubbles:{bubbles:!0,doesNotBubble:!1},eventIsCancelable:{isCancelable:!0,isNotCancelable:!1},failOnUnknownOption:{fail:!0,ignore:!1},formatOnPageLoad:{format:!0,doNotFormat:!1},formulaMode:{enabled:!0,disabled:!1},historySize:{verySmall:5,small:10,medium:20,large:50,veryLarge:100,insane:Number.MAX_SAFE_INTEGER},invalidClass:"an-invalid",isCancellable:{cancellable:!0,notCancellable:!1},leadingZero:{allow:"allow",deny:"deny",keep:"keep"},maximumValue:{tenTrillions:"10000000000000",oneBillion:"1000000000",zero:"0"},minimumValue:{tenTrillions:"-10000000000000",oneBillion:"-1000000000",zero:"0"},modifyValueOnUpDownArrow:{modifyValue:!0,doNothing:!1},modifyValueOnWheel:{modifyValue:!0,doNothing:!1},negativeBracketsTypeOnBlur:{parentheses:"(,)",brackets:"[,]",chevrons:"<,>",curlyBraces:"{,}",angleBrackets:"\u3008,\u3009",japaneseQuotationMarks:"\uFF62,\uFF63",halfBrackets:"\u2E24,\u2E25",whiteSquareBrackets:"\u27E6,\u27E7",quotationMarks:"\u2039,\u203A",guillemets:"\xAB,\xBB",none:null},negativePositiveSignPlacement:{prefix:"p",suffix:"s",left:"l",right:"r",none:null},negativeSignCharacter:{hyphen:"-",minus:"\u2212",heavyMinus:"\u2796",fullWidthHyphen:"\uFF0D",circledMinus:"\u2296",squaredMinus:"\u229F",triangleMinus:"\u2A3A",plusMinus:"\xB1",minusPlus:"\u2213",dotMinus:"\u2238",minusTilde:"\u2242",not:"\xAC"},negativePositiveSignBehavior:{toggle:!0,doNotToggle:!1},noEventListeners:{noEvents:!0,addEvents:!1},onInvalidPaste:{error:"error",ignore:"ignore",clamp:"clamp",truncate:"truncate",replace:"replace"},outputFormat:{string:"string",number:"number",dot:".",negativeDot:"-.",comma:",",negativeComma:"-,",dotNegative:".-",commaNegative:",-",none:null},overrideMinMaxLimits:{ceiling:"ceiling",floor:"floor",ignore:"ignore",invalid:"invalid",doNotOverride:null},positiveSignCharacter:{plus:"+",fullWidthPlus:"\uFF0B",heavyPlus:"\u2795",doublePlus:"\u29FA",triplePlus:"\u29FB",circledPlus:"\u2295",squaredPlus:"\u229E",trianglePlus:"\u2A39",plusMinus:"\xB1",minusPlus:"\u2213",dotPlus:"\u2214",altHebrewPlus:"\uFB29",normalSpace:" ",thinSpace:"\u2009",narrowNoBreakSpace:"\u202F",noBreakSpace:"\xA0"},rawValueDivisor:{none:null,percentage:100,permille:1e3,basisPoint:1e4},readOnly:{readOnly:!0,readWrite:!1},roundingMethod:{halfUpSymmetric:"S",halfUpAsymmetric:"A",halfDownSymmetric:"s",halfDownAsymmetric:"a",halfEvenBankersRounding:"B",upRoundAwayFromZero:"U",downRoundTowardZero:"D",toCeilingTowardPositiveInfinity:"C",toFloorTowardNegativeInfinity:"F",toNearest05:"N05",toNearest05Alt:"CHF",upToNext05:"U05",downToNext05:"D05"},saveValueToSessionStorage:{save:!0,doNotSave:!1},selectNumberOnly:{selectNumbersOnly:!0,selectAll:!1},selectOnFocus:{select:!0,doNotSelect:!1},serializeSpaces:{plus:"+",percent:"%20"},showOnlyNumbersOnFocus:{onlyNumbers:!0,showAll:!1},showPositiveSign:{show:!0,hide:!1},showWarnings:{show:!0,hide:!1},styleRules:{none:null,positiveNegative:{positive:"autoNumeric-positive",negative:"autoNumeric-negative"},range0To100With4Steps:{ranges:[{min:0,max:25,class:"autoNumeric-red"},{min:25,max:50,class:"autoNumeric-orange"},{min:50,max:75,class:"autoNumeric-yellow"},{min:75,max:100,class:"autoNumeric-green"}]},evenOdd:{userDefined:[{callback:function(m){return m%2==0},classes:["autoNumeric-even","autoNumeric-odd"]}]},rangeSmallAndZero:{userDefined:[{callback:function(m){return m>=-1&&m<0?0:Number(m)===0?1:m>0&&m<=1?2:null},classes:["autoNumeric-small-negative","autoNumeric-zero","autoNumeric-small-positive"]}]}},suffixText:{none:"",percentage:"%",permille:"\u2030",basisPoint:"\u2031"},symbolWhenUnfocused:{none:null,percentage:"%",permille:"\u2030",basisPoint:"\u2031"},unformatOnHover:{unformat:!0,doNotUnformat:!1},unformatOnSubmit:{unformat:!0,keepCurrentValue:!1},upDownStep:{progressive:"progressive"},valuesToStrings:{none:null,zeroDash:{0:"-"},oneAroundZero:{"-1":"Min",1:"Max"}},watchExternalChanges:{watch:!0,doNotWatch:!1},wheelOn:{focus:"focus",hover:"hover"},wheelStep:{progressive:"progressive"}},ke=C.options,Object.getOwnPropertyNames(ke).forEach(function(m){m==="valuesToStrings"?Object.getOwnPropertyNames(ke.valuesToStrings).forEach(function(w){ke.valuesToStrings[w]!==null&&Object.freeze(ke.valuesToStrings[w])}):m!=="styleRules"&&ke[m]!==null&&Object.freeze(ke[m])}),Object.freeze(ke),Object.defineProperty(C,"options",{configurable:!1,writable:!1}),C.defaultSettings={allowDecimalPadding:C.options.allowDecimalPadding.always,alwaysAllowDecimalCharacter:C.options.alwaysAllowDecimalCharacter.doNotAllow,caretPositionOnFocus:C.options.caretPositionOnFocus.doNoForceCaretPosition,createLocalList:C.options.createLocalList.createList,currencySymbol:C.options.currencySymbol.none,currencySymbolPlacement:C.options.currencySymbolPlacement.prefix,decimalCharacter:C.options.decimalCharacter.dot,decimalCharacterAlternative:C.options.decimalCharacterAlternative.none,decimalPlaces:C.options.decimalPlaces.two,decimalPlacesRawValue:C.options.decimalPlacesRawValue.useDefault,decimalPlacesShownOnBlur:C.options.decimalPlacesShownOnBlur.useDefault,decimalPlacesShownOnFocus:C.options.decimalPlacesShownOnFocus.useDefault,defaultValueOverride:C.options.defaultValueOverride.doNotOverride,digitalGroupSpacing:C.options.digitalGroupSpacing.three,digitGroupSeparator:C.options.digitGroupSeparator.comma,divisorWhenUnfocused:C.options.divisorWhenUnfocused.none,emptyInputBehavior:C.options.emptyInputBehavior.focus,eventBubbles:C.options.eventBubbles.bubbles,eventIsCancelable:C.options.eventIsCancelable.isCancelable,failOnUnknownOption:C.options.failOnUnknownOption.ignore,formatOnPageLoad:C.options.formatOnPageLoad.format,formulaMode:C.options.formulaMode.disabled,historySize:C.options.historySize.medium,invalidClass:C.options.invalidClass,isCancellable:C.options.isCancellable.cancellable,leadingZero:C.options.leadingZero.deny,maximumValue:C.options.maximumValue.tenTrillions,minimumValue:C.options.minimumValue.tenTrillions,modifyValueOnUpDownArrow:C.options.modifyValueOnUpDownArrow.modifyValue,modifyValueOnWheel:C.options.modifyValueOnWheel.modifyValue,negativeBracketsTypeOnBlur:C.options.negativeBracketsTypeOnBlur.none,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.none,negativeSignCharacter:C.options.negativeSignCharacter.hyphen,negativePositiveSignBehavior:C.options.negativePositiveSignBehavior.doNotToggle,noEventListeners:C.options.noEventListeners.addEvents,onInvalidPaste:C.options.onInvalidPaste.error,outputFormat:C.options.outputFormat.none,overrideMinMaxLimits:C.options.overrideMinMaxLimits.doNotOverride,positiveSignCharacter:C.options.positiveSignCharacter.plus,rawValueDivisor:C.options.rawValueDivisor.none,readOnly:C.options.readOnly.readWrite,roundingMethod:C.options.roundingMethod.halfUpSymmetric,saveValueToSessionStorage:C.options.saveValueToSessionStorage.doNotSave,selectNumberOnly:C.options.selectNumberOnly.selectNumbersOnly,selectOnFocus:C.options.selectOnFocus.select,serializeSpaces:C.options.serializeSpaces.plus,showOnlyNumbersOnFocus:C.options.showOnlyNumbersOnFocus.showAll,showPositiveSign:C.options.showPositiveSign.hide,showWarnings:C.options.showWarnings.show,styleRules:C.options.styleRules.none,suffixText:C.options.suffixText.none,symbolWhenUnfocused:C.options.symbolWhenUnfocused.none,unformatOnHover:C.options.unformatOnHover.unformat,unformatOnSubmit:C.options.unformatOnSubmit.keepCurrentValue,upDownStep:"1",valuesToStrings:C.options.valuesToStrings.none,watchExternalChanges:C.options.watchExternalChanges.doNotWatch,wheelOn:C.options.wheelOn.focus,wheelStep:C.options.wheelStep.progressive},Object.freeze(C.defaultSettings),Object.defineProperty(C,"defaultSettings",{configurable:!1,writable:!1});var ye={digitGroupSeparator:C.options.digitGroupSeparator.dot,decimalCharacter:C.options.decimalCharacter.comma,decimalCharacterAlternative:C.options.decimalCharacterAlternative.dot,currencySymbol:"\u202F\u20AC",currencySymbolPlacement:C.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.prefix},qe={digitGroupSeparator:C.options.digitGroupSeparator.comma,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.dollar,currencySymbolPlacement:C.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.right},pr={digitGroupSeparator:C.options.digitGroupSeparator.comma,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.yen,currencySymbolPlacement:C.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.right};s.cloneObject(ye).formulaMode=C.options.formulaMode.enabled;var fr=s.cloneObject(ye);fr.minimumValue=0;var mn=s.cloneObject(ye);mn.maximumValue=0,mn.negativePositiveSignPlacement=C.options.negativePositiveSignPlacement.prefix;var St=s.cloneObject(ye);St.digitGroupSeparator=C.options.digitGroupSeparator.normalSpace;var vr=s.cloneObject(St);vr.minimumValue=0;var hn=s.cloneObject(St);hn.maximumValue=0,hn.negativePositiveSignPlacement=C.options.negativePositiveSignPlacement.prefix;var Oe=s.cloneObject(ye);Oe.currencySymbol=C.options.currencySymbol.none,Oe.suffixText="\u202F".concat(C.options.suffixText.percentage),Oe.wheelStep=1e-4,Oe.rawValueDivisor=C.options.rawValueDivisor.percentage;var gn=s.cloneObject(Oe);gn.minimumValue=0;var Ft=s.cloneObject(Oe);Ft.maximumValue=0,Ft.negativePositiveSignPlacement=C.options.negativePositiveSignPlacement.prefix;var yr=s.cloneObject(Oe);yr.decimalPlaces=3;var Dr=s.cloneObject(gn);Dr.decimalPlaces=3;var Er=s.cloneObject(Ft);Er.decimalPlaces=3,s.cloneObject(qe).formulaMode=C.options.formulaMode.enabled;var br=s.cloneObject(qe);br.minimumValue=0;var Ct=s.cloneObject(qe);Ct.maximumValue=0,Ct.negativePositiveSignPlacement=C.options.negativePositiveSignPlacement.prefix;var wr=s.cloneObject(Ct);wr.negativeBracketsTypeOnBlur=C.options.negativeBracketsTypeOnBlur.parentheses;var xe=s.cloneObject(qe);xe.currencySymbol=C.options.currencySymbol.none,xe.suffixText=C.options.suffixText.percentage,xe.wheelStep=1e-4,xe.rawValueDivisor=C.options.rawValueDivisor.percentage;var pn=s.cloneObject(xe);pn.minimumValue=0;var Pt=s.cloneObject(xe);Pt.maximumValue=0,Pt.negativePositiveSignPlacement=C.options.negativePositiveSignPlacement.prefix;var Sr=s.cloneObject(xe);Sr.decimalPlaces=3;var Fr=s.cloneObject(pn);Fr.decimalPlaces=3;var Cr=s.cloneObject(Pt);Cr.decimalPlaces=3;var Pr=s.cloneObject(ye);Pr.currencySymbol=C.options.currencySymbol.lira,C.predefinedOptions={euro:ye,euroPos:fr,euroNeg:mn,euroSpace:St,euroSpacePos:vr,euroSpaceNeg:hn,percentageEU2dec:Oe,percentageEU2decPos:gn,percentageEU2decNeg:Ft,percentageEU3dec:yr,percentageEU3decPos:Dr,percentageEU3decNeg:Er,dollar:qe,dollarPos:br,dollarNeg:Ct,dollarNegBrackets:wr,percentageUS2dec:xe,percentageUS2decPos:pn,percentageUS2decNeg:Pt,percentageUS3dec:Sr,percentageUS3decPos:Fr,percentageUS3decNeg:Cr,French:ye,Spanish:ye,NorthAmerican:qe,British:{digitGroupSeparator:C.options.digitGroupSeparator.comma,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.pound,currencySymbolPlacement:C.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.right},Swiss:{digitGroupSeparator:C.options.digitGroupSeparator.apostrophe,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:"\u202FCHF",currencySymbolPlacement:C.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.prefix},Japanese:pr,Chinese:pr,Brazilian:{digitGroupSeparator:C.options.digitGroupSeparator.dot,decimalCharacter:C.options.decimalCharacter.comma,currencySymbol:C.options.currencySymbol.real,currencySymbolPlacement:C.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:C.options.negativePositiveSignPlacement.right},Turkish:Pr,dotDecimalCharCommaSeparator:{digitGroupSeparator:C.options.digitGroupSeparator.comma,decimalCharacter:C.options.decimalCharacter.dot},commaDecimalCharDotSeparator:{digitGroupSeparator:C.options.digitGroupSeparator.dot,decimalCharacter:C.options.decimalCharacter.comma,decimalCharacterAlternative:C.options.decimalCharacterAlternative.dot},integer:{decimalPlaces:0},integerPos:{minimumValue:C.options.minimumValue.zero,decimalPlaces:0},integerNeg:{maximumValue:C.options.maximumValue.zero,decimalPlaces:0},float:{allowDecimalPadding:C.options.allowDecimalPadding.never},floatPos:{allowDecimalPadding:C.options.allowDecimalPadding.never,minimumValue:C.options.minimumValue.zero,maximumValue:C.options.maximumValue.tenTrillions},floatNeg:{allowDecimalPadding:C.options.allowDecimalPadding.never,minimumValue:C.options.minimumValue.tenTrillions,maximumValue:C.options.maximumValue.zero},numeric:{digitGroupSeparator:C.options.digitGroupSeparator.noSeparator,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.none},numericPos:{digitGroupSeparator:C.options.digitGroupSeparator.noSeparator,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.none,minimumValue:C.options.minimumValue.zero,maximumValue:C.options.maximumValue.tenTrillions},numericNeg:{digitGroupSeparator:C.options.digitGroupSeparator.noSeparator,decimalCharacter:C.options.decimalCharacter.dot,currencySymbol:C.options.currencySymbol.none,minimumValue:C.options.minimumValue.tenTrillions,maximumValue:C.options.maximumValue.zero}},Object.getOwnPropertyNames(C.predefinedOptions).forEach(function(m){Object.freeze(C.predefinedOptions[m])}),Object.freeze(C.predefinedOptions),Object.defineProperty(C,"predefinedOptions",{configurable:!1,writable:!1});let _i=C;return r=r.default})(),typeof dt=="object"&&typeof vn=="object"?vn.exports=ct():typeof define=="function"&&define.amd?define([],ct):typeof dt=="object"?dt.AutoNumeric=ct():Ar.AutoNumeric=ct()});var Ve=(n,r,i)=>{n.classList.contains("is-open")?(n.classList.remove("max-h-96","is-open"),n.classList.add("max-h-0"),i.classList.remove("hidden"),r.classList.add("hidden")):(n.classList.remove("max-h-0"),n.classList.add("max-h-96","is-open"),r.classList.remove("hidden"),i.classList.add("hidden"))};var At=(n,r,i)=>{let a=document.getElementById(r);if(!a)return;let l=a.getElementsByTagName("tr");Array.from(l).forEach(c=>{let h=c.querySelector(`td:nth-child(${i})`);n==="All"||n==="Active"&&h.textContent.includes("Active")||n==="Inactive"&&h.textContent.includes("Inactive")?c.style.display="":c.style.display="none"})},st=(n,r,i,a,l)=>{let c=document.getElementById(n),h=document.getElementById(r),g=document.getElementById(i);!c||!h||!g||(c.addEventListener("click",()=>{At("Inactive",a,l),c.classList.add("hidden"),h.classList.remove("hidden")}),h.addEventListener("click",()=>{At("Active",a,l),h.classList.add("hidden"),c.classList.remove("hidden")}),g.addEventListener("click",()=>{At("All",a,l)}),At("Active",a,l))},ut=n=>{let r=document.getElementById(n);if(!r)return;let i=r.querySelectorAll("th[data-column]");i.forEach(a=>{a.classList.add("cursor-pointer","hover:bg-gray-200","sortable"),a.addEventListener("click",()=>{let l=a.dataset.column,c=a.classList.contains("asc")?"desc":"asc";i.forEach(g=>g.classList.remove("asc","desc")),a.classList.add(c);let h=Array.from(r.querySelector("tbody").rows);h.sort((g,f)=>{let v=g.querySelector(`td[data-column="${l}"]`),D=f.querySelector(`td[data-column="${l}"]`),s=v&&v.textContent.trim()||"",E=D&&D.textContent.trim()||"";return c==="asc"?s.localeCompare(E):E.localeCompare(s)}),h.forEach(g=>r.querySelector("tbody").appendChild(g))})})},lt=(n,r)=>{let i=document.getElementById(n),a=document.getElementById(r);!i||!a||i.addEventListener("input",()=>{let l=i.value.toLowerCase(),c=a.getElementsByTagName("tr");Array.from(c).forEach(h=>{let g=h.getElementsByTagName("td"),f=!1;Array.from(g).forEach(v=>{v.textContent.toLowerCase().includes(l)&&(f=!0)}),f?h.style.display="":h.style.display="none"})})};var _t=Nt(mt());var Tt=Nt(mt()),se=async(n,r,i,a,l=null,c=null,h=null)=>{try{let g=await fetch(n),v=await g.json();if(l&&l.split(".").forEach(D=>{v=v[D]}),v=c?v.filter(c):v,h&&v.sort(h),g.ok){let D=document.getElementById(r);D.innerHTML="",v.forEach(s=>{let{value:E,text:F}=a(s),P=document.createElement("option");P.value=E,P.textContent=F,D.appendChild(P)})}else console.error(`Error fetching ${i}:`,data.message)}catch(g){console.error(`Error fetching ${i}:`,g)}},Z=(n,r)=>{let i=new Date(n.value),a=new Date(r.value);return i.setHours(0,0,0,0),a.setHours(0,0,0,0),a<=i?(Y("The contract end date must be greater than the start date."),a="",!1):!0},le=n=>{let r=document.querySelector(".grid");document.getElementById("successMessage").classList.remove("hidden"),document.getElementById("errorMessage").classList.add("hidden"),document.getElementById("successMessage").textContent="",document.getElementById("successMessage").textContent=n,r.scrollTo({top:0,behavior:"smooth"})},Y=n=>{let r=document.querySelector(".grid");document.getElementById("errorMessage").classList.remove("hidden"),document.getElementById("successMessage").classList.add("hidden"),document.getElementById("errorMessage").textContent=`Error: ${n||"An error occurred"}`,document.getElementById("successMessage").textContent="",r.scrollTo({top:0,behavior:"smooth"})},Ye=async(n,r,i,a)=>{let l=0,c=0,h=0;try{let s=function(){l=f.getNumber()||0,c=v.getNumber()||0,h=D.getNumber()||0;let E=l+c+h;g.value=E.toFixed(2)},g=document.getElementById(n),f=new Tt.default(`#${r}`,{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0}),v=new Tt.default(`#${i}`,{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0}),D=new Tt.default(`#${a}`,{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0});f.domElement.addEventListener("input",s),v.domElement.addEventListener("input",s),D.domElement.addEventListener("input",s),s()}catch(g){console.log(g),Y("Error showing Contract Total Value:",g)}},Tr=async()=>{let n=document.getElementById("nationality");try{(await(await fetch("/resources/nationalities.json")).json()).forEach(a=>{let l=document.createElement("option");l.value=a,l.textContent=a,n.appendChild(l)})}catch(r){console.error(r)}};var Ki=async()=>{try{let n=await fetch("/api/v1/consultant-benifits"),r=await n.json();if(n.ok){let i=document.getElementById("benefitCheckboxes");r.data.data.forEach(a=>{let l=document.createElement("div");l.className="flex gap-2";let c=document.createElement("label");c.setAttribute("for",a.benefit.toLowerCase()),c.className="block text-sm font-medium text-gray-700",c.textContent=a.benefit;let h=document.createElement("input");h.type="checkbox",h.name="contractualBenefits",h.value=a.benefit,h.id=a.benefit.toLowerCase(),h.className="mt-1 h-4 w-4 text-secondary-600 border-gray-300 rounded focus:ring-secondary-500",l.appendChild(h),l.appendChild(c),i.appendChild(l)})}else console.error("Error fetching contractual benefits:",r.message)}catch(n){console.error("Error fetching contractual benefits:",n)}},_r=()=>{let n=document.getElementById("salaryRate"),r=document.getElementById("noOfWorkingHoursPerMonth"),i=document.getElementById("noOfWorkingDaysPerMonth");n&&r&&i&&(n.addEventListener("change",()=>{n.value==="Hourly"?(r.disabled=!1,r.value=""):(r.disabled=!0,r.value=i.value*8)}),n.value!=="Hourly"&&(r.disabled=!0,r.value=i.value*8),i.addEventListener("input",()=>{n.value!=="Hourly"&&(r.value=i.value*8)}))},Ir=()=>{let n=[];return document.querySelectorAll('#benefitCheckboxes input[type="checkbox"]:checked').forEach(r=>{n.push(r.value)}),n},Lr=n=>{let r=document.getElementById(n);return r.options[r.selectedIndex].text};var Vr=()=>{if(consultantForm){se("/api/v1/consultant-category","consultantCategory","consultant Category",r=>({value:r._id,text:r.category}),"data.data",null,(r,i)=>i.category.localeCompare(r.category)),se("https://restcountries.com/v3.1/all?fields=name","basedCountry","Country",r=>({value:r.name.common,text:r.name.common}),null,null,(r,i)=>r.name.common.localeCompare(i.name.common)),Tr(),se("/api/v1/consultants","lineManager","Line Manager",r=>({value:r._id,text:r.name}),"data.consultants",null,(r,i)=>r.name.localeCompare(i.name));let n=new _t.default("#salary",{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0});Ki(),_r(),consultantForm.addEventListener("submit",async function(r){r.preventDefault();let i=new FormData(consultantForm),a=Object.fromEntries(i.entries()),l=Ir();a.contractualBenefits=l;let c=Lr("consultantCategory");a.consultantCategory=c,a.contractUrl||delete a.contractUrl;let h=document.getElementById("contractStartDate"),g=document.getElementById("contractEndDate");if(!Z(h,g))return;h&&g&&(h.addEventListener("change",Z),g.addEventListener("change",Z));let v=document.getElementById("ir35Compliance"),D=document.getElementById("ir35Description");if(v.checked&&!D.value.trim()){Y("Please provide a description for IR35 compliance."),D.focus();return}else a.ir35Compliance={compliance:v.checked,description:D.value.trim()||null};try{let s=await fetch("/api/v1/consultants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),E=await s.json();s.ok?(le("Consultant created successfully!"),setTimeout(()=>{window.location.href="/consultants"},1e3)):Y(E.message)}catch(s){console.error("Error creating consultant:",s)}})}},Mr=()=>{let n=window.location.pathname.split("/"),r=n[n.length-2];fetch(`/api/v1/consultants/${r}`).then(i=>i.json()).then(i=>{if(i.status==="success"){let a=i.data.consultant;document.getElementById("name").value=a.name,document.getElementById("designation").value=a.designation,document.getElementById("companyEmailAddress").value=a.companyEmailAddress,document.getElementById("contractNumber").value=a.contractNumber,document.getElementById("contractUrl").value=a.contractUrl||"",document.getElementById("contractStartDate").value=new Date(a.contractStartDate).toISOString().split("T")[0],document.getElementById("contractEndDate").value=new Date(a.contractEndDate).toISOString().split("T")[0],document.getElementById("consultantStatus").value=a.consultantStatus,document.getElementById("salaryRate").value=a.salaryRate,document.getElementById("salary").value=a.salary,document.getElementById("noOfWorkingDaysPerMonth").value=a.noOfWorkingDaysPerMonth,document.getElementById("noOfWorkingHoursPerMonth").value=a.noOfWorkingHoursPerMonth,document.getElementById("address").value=a.address,document.getElementById("basedCountry").value=a.basedCountry,document.getElementById("nationality").value=a.nationality,document.getElementById("contactNumber").value=a.contactNumber,document.getElementById("emergencyContactNumber").value=a.emergencyContactNumber,document.getElementById("ir35Compliance").checked=a.ir35Compliance.compliance,document.getElementById("ir35Description").value=a.ir35Compliance.description||"";let l=a.contractualBenefits;document.querySelectorAll('#benefitCheckboxes input[type="checkbox"]').forEach(v=>{l.includes(v.value)&&(v.checked=!0)});let h=new _t.default("#salary",{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0}),g=a.lineManager;(async v=>{try{let F=(await(await fetch("/api/v1/consultants")).json()).data.consultants.map(O=>({name:O.name,id:O._id})).find(O=>O.id===v),P=document.getElementById("lineManager");F?P.value=v:console.warn("Line Manager not found in the dropdown options.")}catch(D){console.error("Error fetching or setting the Line Manager:",D)}})(g)}else console.error("Error fetching consultant data:",i.message)}).catch(i=>{console.error("Error fetching consultant data:",i)})},jr=()=>{_r();let n=new _t.default("#salary",{digitGroupSeparator:",",decimalCharacter:".",decimalPlaces:2,unformatOnSubmit:!0});consultantForm.addEventListener("submit",async function(r){r.preventDefault();let i=new FormData(consultantForm),a=Object.fromEntries(i.entries()),l=Ir();a.contractualBenefits=l;let c=Lr("consultantCategory");a.consultantCategory=c,a.contractUrl||delete a.contractUrl;let h=document.getElementById("contractStartDate"),g=document.getElementById("contractEndDate");if(!Z(h,g))return;h&&g&&(h.addEventListener("change",Z),g.addEventListener("change",Z));let v=document.getElementById("ir35Compliance"),D=document.getElementById("ir35Description");if(v.checked&&!D.value.trim()){Y("Please provide a description for IR35 compliance."),D.focus();return}try{let s=window.location.pathname.split("/"),E=s[s.length-2];console.log(a);let F=await fetch(`/api/v1/consultants/${E}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!F.ok){let P=await F.json();Y(P.message||"Error updating consultant.");return}le("Consultant updated successfully!"),setTimeout(()=>{window.location.href="/consultants"},1e3)}catch(s){console.error("Error updating consultant:",s),Y("Error updating consultant.")}})},Gi=async n=>{try{return(await(await fetch(`/api/v1/consultants/${n}`)).json()).data.consultant.name}catch(r){console.error("Error fetching consultant names:",r)}},Rr=async()=>{document.querySelectorAll(".milestone-card").forEach(async r=>{let i=r.querySelectorAll(".consultant-id"),a=r.querySelector(".consultant-names"),l=Array.from(i).map(h=>h.getAttribute("data-id")),c=await Promise.all(l.map(h=>Gi(h)));a.textContent=c.join(", ")})};var It=Nt(mt());var Ur=()=>{se("/api/v1/consultants","projectLeader","Project Leader",n=>({value:n._id,text:n.name}),"data.consultants",null,(n,r)=>n.name.localeCompare(r.name)),Ye("contractTotalValue","contractTotalFees","contractTotalExpenses","contractTotalOverhead"),projectForm.addEventListener("submit",async function(n){n.preventDefault();let r=new FormData(projectForm),i=Object.fromEntries(r.entries()),a=document.getElementById("bmgfProjectFinance");i.bmgfProjectFinance=a.checked,delete i.contractTotalValue;let l=document.getElementById("projectStartDate"),c=document.getElementById("projectDueDate");if(Z(l,c)){l&&c&&(l.addEventListener("change",Z),c.addEventListener("change",Z));try{let g=await fetch("/api/v1/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),f=await g.json();g.ok?(le("Project created successfully!"),setTimeout(()=>{window.location.href="/projects"},1e3)):Y(f.message)}catch(g){console.error("Error creating project:",g)}}})},$r=()=>{let n=window.location.pathname.split("/"),r=n[n.length-2];fetch(`/api/v1/projects/${r}`).then(i=>i.json()).then(i=>{if(i.status==="success"){let a=i.data.data;document.getElementById("name").value=a.name,document.getElementById("projectClientName").value=a.projectClientName,document.getElementById("description").value=a.description,document.getElementById("projectStartDate").value=new Date(a.projectStartDate).toISOString().split("T")[0],document.getElementById("projectDueDate").value=new Date(a.projectDueDate).toISOString().split("T")[0],document.getElementById("projectStatus").value=a.projectStatus,document.getElementById("contractTotalFees").value=a.contractTotalFees||0,document.getElementById("contractTotalExpenses").value=a.contractTotalExpenses||0,document.getElementById("contractTotalOverhead").value=a.contractTotalOverhead||0,document.getElementById("contractTotalValue").value=a.contractTotalValue||0,Ye("contractTotalValue","contractTotalFees","contractTotalExpenses","contractTotalOverhead"),document.getElementById("bmgfProjectFinance").checked=a.bmgfProjectFinance;let l=a.projectLeader;(async h=>{try{let v=(await(await fetch("/api/v1/consultants")).json()).data.consultants.map(E=>({name:E.name,id:E._id})),D=v.find(E=>E.id===h),s=document.getElementById("projectLeader");v.forEach(E=>{let F=document.createElement("option");F.value=E.id,F.textContent=E.name,s.appendChild(F)}),D?s.value=h:console.warn("Project Leader not found in the dropdown options.")}catch(g){console.error("Error fetching or setting the project leader:",g)}})(l)}}).catch(i=>{console.error("Error fetching project data:",i)})},Wr=()=>{projectForm.addEventListener("submit",async function(n){n.preventDefault();let r=new FormData(projectForm),i=Object.fromEntries(r.entries()),a=document.getElementById("bmgfProjectFinance");i.bmgfProjectFinance=a.checked;let l=It.default.getAutoNumericElement("#contractTotalFees").getNumber(),c=It.default.getAutoNumericElement("#contractTotalExpenses").getNumber(),h=It.default.getAutoNumericElement("#contractTotalOverhead").getNumber();i.contractTotalFees=l,i.contractTotalExpenses=c,i.contractTotalOverhead=h,delete i.contractTotalValue,i.projectStatus=document.getElementById("projectStatus").value;let g=document.getElementById("projectStartDate"),f=document.getElementById("projectDueDate");if(Z(g,f)){g&&f&&(g.addEventListener("change",Z),f.addEventListener("change",Z));try{let D=window.location.pathname.split("/"),s=D[D.length-2],E=await fetch(`/api/v1/projects/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),F=await E.json();E.ok?(le("Project updated successfully!"),setTimeout(()=>{window.location.href="/projects"},1e3)):Y(F.message)}catch(D){console.error("Error updating project:",D),Y("Error updating project.")}}})};var Lt=Nt(mt());var qi=async n=>{try{let i=await(await fetch("https://countriesnow.space/api/v0.1/countries/cities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({country:n})})).json();return i.error?(console.error("Error fetching cities:",i.error),[]):i.data}catch(r){return console.error("Error fetching cities:",r),[]}},zr=async n=>{try{let r=await qi(n),i=document.getElementById("cities");i.innerHTML="",r.forEach(a=>{let l=document.createElement("option");l.value=a,i.appendChild(l)})}catch(r){console.error("Error fetching cities:",r)}};async function Zi(){try{let a=(await(await fetch("/api/v1/consultants")).json()).data.consultants.sort((c,h)=>c.name.localeCompare(h.name));document.querySelectorAll(".consultant-select").forEach(c=>{let h=c.value;c.innerHTML="",a.forEach(g=>{let f=document.createElement("option");f.value=g._id,f.textContent=g.name,c.appendChild(f)}),c.value=h})}catch(n){console.error("Error fetching consultants:",n)}}var Hr=()=>{let n=document.getElementById("deliverableConsultantsContainer"),r=document.getElementById("addConsultantBtn"),i=0;r&&r.addEventListener("click",function(){i+=1;let a=i,l=`
        <div id="consultantDataRow${a}" class="grid grid-cols-1 md:grid-cols-12 mb-2 gap-6 items-center">
          <!-- Consultant -->
          <div class="md:col-span-3">
            <div>
              <label for="consultant" class="block text-sm font-medium text-gray-700">Consultant</label>
              <select name="consultant[]" class="consultant-select mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:ring-secondary-500 focus:border-secondary-500 sm:text-sm"></select>  
            </div>
          </div>

          <!-- Remove Button -->
          <div class="md:col-span-1">
            <div>
              <svg id="removeConsultantsIcon${a}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-secondary-500 hover:cursor-pointer">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </div>
          </div>
        </div>
      `;n.insertAdjacentHTML("beforeend",l),document.getElementById(`removeConsultantsIcon${a}`).addEventListener("click",function(){document.getElementById(`consultantDataRow${a}`).remove()}),Zi()})},Kr=()=>{se("https://restcountries.com/v3.1/all?fields=name","milestoneCountry","Country",n=>({value:n.name.common,text:n.name.common}),null,null,(n,r)=>n.name.common.localeCompare(r.name.common)),document.getElementById("milestoneCountry").addEventListener("change",function(){let n=this.value;zr(n)}),se("/api/v1/projects","projectName","Project",n=>({value:n._id,text:n.name}),"data.data",null,(n,r)=>n.name.localeCompare(r.name)),Ye("milestoneTotalValue","milestoneTotalFeeBudget","milestoneTotalExpenseBudget","milestoneTotalOverhead"),se("/api/v1/consultants","milestoneLeader","Milestone Leader",n=>({value:n._id,text:n.name}),"data.consultants",null,(n,r)=>n.name.localeCompare(r.name)),Hr(),milestoneForm.addEventListener("submit",async function(n){n.preventDefault();let r=new FormData(milestoneForm),i=Object.fromEntries(r.entries()),a=document.getElementById("projectName");i.project=a.value;let l=a.value,c=[];document.querySelectorAll(".consultant-select").forEach((v,D)=>{let s={consultant:v.value};c.push(s)}),i.consultants=c;let h=document.getElementById("milestoneStartDate"),g=document.getElementById("milestoneDueDate");if(Z(h,g)){h&&g&&(h.addEventListener("change",Z),g.addEventListener("change",Z));try{let v=await fetch("/api/v1/milestones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),D=await v.json();v.ok?(le("Deliverable created successfully!"),setTimeout(()=>{window.location.href=`/projects/${l}`},1e3)):Y(D.message)}catch(v){console.error("Error Creating Deliverable:",v)}}})};async function Yi(n){try{let a=(await(await fetch("/api/v1/consultants")).json()).data.consultants,l=document.getElementById("deliverableConsultantsContainer");l.innerHTML="",n.forEach((c,h)=>{let g=h+1,f=`
        <div id="consultantDataRow${g}" class="grid grid-cols-1 md:grid-cols-12 mb-2 gap-6 items-center">
          <!-- Consultant -->
          <div class="md:col-span-3">
            <div>
              <label for="consultant" class="block text-sm font-medium text-gray-700">Consultant</label>
              <select name="consultant[]" class="consultant-select mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:ring-secondary-500 focus:border-secondary-500 sm:text-sm"></select>  
            </div>
          </div>

          <!-- Remove Button -->
          <div class="md:col-span-1">
            <div>
              <svg id="removeConsultantsIcon${g}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-secondary-500 hover:cursor-pointer">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </div>
          </div>
        </div>
      `;l.insertAdjacentHTML("beforeend",f);let v=document.querySelector(`#consultantDataRow${g} .consultant-select`);a.forEach(s=>{let E=document.createElement("option");E.value=s._id,E.textContent=s.name,v.appendChild(E)}),v.value=c.consultant,document.getElementById(`removeConsultantsIcon${g}`).addEventListener("click",function(){document.getElementById(`consultantDataRow${g}`).remove()})})}catch(r){console.error("Error fetching consultants:",r)}}var Gr=()=>{let n=window.location.pathname.split("/"),r=n[n.length-2];fetch(`/api/v1/milestones/${r}`).then(i=>i.json()).then(i=>{if(i.status==="success"){let a=i.data.data;document.getElementById("name").value=a.name,document.getElementById("description").value=a.description,document.getElementById("milestoneNote").value=a.milestoneNote,document.getElementById("milestoneCountry").value=a.milestoneCountry,document.getElementById("milestoneLocation").value=a.milestoneLocation||"",document.getElementById("milestoneStartDate").value=new Date(a.milestoneStartDate).toISOString().split("T")[0],document.getElementById("milestoneDueDate").value=new Date(a.milestoneDueDate).toISOString().split("T")[0],document.getElementById("milestoneStatus").value=a.milestoneStatus,document.getElementById("milestoneTotalFeeBudget").value=a.milestoneTotalFeeBudget||0,document.getElementById("milestoneTotalExpenseBudget").value=a.milestoneTotalExpenseBudget||0,document.getElementById("milestoneTotalOverhead").value=a.milestoneTotalOverhead||0,se("https://restcountries.com/v3.1/all?fields=name","milestoneCountry","Country",h=>({value:h.name.common,text:h.name.common}),null,null,(h,g)=>h.name.common.localeCompare(g.name.common)).then(()=>{document.getElementById("milestoneCountry").value=a.milestoneCountry}),se("/api/v1/projects","projectName","Project",h=>({value:h._id,text:h.name}),"data.data",null,(h,g)=>h.name.localeCompare(g.name)).then(()=>{document.getElementById("projectName").value=a.project}),document.getElementById("milestoneCountry").addEventListener("change",function(){let h=this.value;zr(h)}),Ye("milestoneTotalValue","milestoneTotalFeeBudget","milestoneTotalExpenseBudget","milestoneTotalOverhead"),Hr(),Yi(a.consultants);let l=a.milestoneLeader;(async h=>{try{let v=(await(await fetch("/api/v1/consultants")).json()).data.consultants.map(E=>({name:E.name,id:E._id})),D=v.find(E=>E.id===h),s=document.getElementById("milestoneLeader");v.forEach(E=>{let F=document.createElement("option");F.value=E.id,F.textContent=E.name,s.appendChild(F)}),D?s.value=h:console.warn("Milestone Leader not found in the dropdown options.")}catch(g){console.error("Error fetching or setting the Milestone leader:",g)}})(l)}}).catch(i=>{console.error("Error fetching milestone data:",i)}),milestoneForm.addEventListener("submit",async function(i){i.preventDefault();let a=new FormData(milestoneForm),l=Object.fromEntries(a.entries()),c=[];document.querySelectorAll(".consultant-select").forEach(E=>{let F={consultant:E.value};c.push(F)}),l.consultants=c;let h=Lt.default.getAutoNumericElement("#milestoneTotalFeeBudget").getNumber(),g=Lt.default.getAutoNumericElement("#milestoneTotalExpenseBudget").getNumber(),f=Lt.default.getAutoNumericElement("#milestoneTotalOverhead").getNumber();l.milestoneTotalFeeBudget=h,l.milestoneTotalExpenseBudget=g,l.milestoneTotalOverhead=f,delete l.milestoneTotalValue,l.milestoneCountry=document.getElementById("milestoneCountry").value,l.milestoneLocation=document.getElementById("milestoneLocation").value;let v=document.getElementById("milestoneStartDate"),D=document.getElementById("milestoneDueDate");if(Z(v,D)){v&&D&&(v.addEventListener("change",Z),D.addEventListener("change",Z)),l.milestoneStatus=document.getElementById("milestoneStatus").value;try{let E=await fetch(`/api/v1/milestones/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),F=await E.json();E.ok?(le("Deliverable updated successfully!"),setTimeout(()=>{window.location.href=`/milestones/${r}`},1e3)):Y(F.message)}catch(E){console.error("Error Updating Deliverable:",E)}}})};var qr=()=>{let n=document.getElementById("dateFied"),i=new Date().toDateString("default",{weekday:"long"});n.innerHTML=i},H=(n,r="confirm")=>new Promise(i=>{let a=document.getElementById("customModal"),l=document.getElementById("modalTitle"),c=document.getElementById("modalMessage"),h=document.getElementById("modalCancel"),g=document.getElementById("modalConfirm");if(!a||!l||!c||!h||!g)return console.error("Modal elements not found in the DOM."),i(!1);l.textContent=r==="alert"?"Notice":"Confirmation",c.textContent=n,r==="confirm"?h.classList.remove("hidden"):h.classList.add("hidden"),a.classList.remove("hidden"),h.onclick=()=>{a.classList.add("hidden"),i(!1)},g.onclick=()=>{a.classList.add("hidden"),i(!0)}});var Zr=()=>{let n=document.getElementById("loginForm");n&&n.addEventListener("submit",async function(r){r.preventDefault();let i=document.getElementById("email").value,a=document.getElementById("password").value;try{let l=await fetch("/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:a})}),c=await l.json();if(l.ok)sessionStorage.clear(),localStorage.clear(),window.location.href="/";else{let h=c.message||c.error||"Something went wrong";l.status===429||h.toLowerCase().includes("too many")?H("You\u2019ve reached the maximum number of login attempts. Please wait 15 minutes before trying again.","alert"):H(h,"alert")}}catch(l){console.error("Error during login:",l),H("An error occurred. Please try again later.","alert")}})},Yr=async()=>{try{let n=await fetch("/api/v1/users/logout",{method:"GET"});sessionStorage.clear(),localStorage.clear(),n.ok?(await H("Logged out Successfully","alert"),setTimeout(()=>{location.replace("/login")},1e3)):H("Error logging out! Try again","alert")}catch{H("Error logging out! Try again","alert")}};var ht="",re="",jt=null,Mt=null,Rt="Draft",Qr=async()=>{if(!document.getElementById("timesheetApprovalView-module"))try{let{name:r,designation:i,noOfWorkingDaysPerMonth:a,noOfWorkingHoursPerMonth:l}=await Qi(),c=document.getElementById("consultant-name"),h=document.getElementById("consultant-designation"),g=document.getElementById("consultant-working-hours-days");c.textContent=r,h.textContent=i,g.textContent=`${l} / ${a}`}catch(r){console.error("Error initializing basic data:",r)}},Je=async(n,r)=>{try{let i=parseInt(n.value),a=parseInt(r.value),l=new Date(a,i+1,0).getDate(),c=new Date(a,i,1).getDay();c=c===0?6:c-1;let h=[];for(let g=1;g<=l;g++){let f=(new Date(a,i,g).getDay()+6)%7;(f===5||f===6)&&h.push(g)}gt(c,l,h),await pt(n,r,ht),oa("Draft","submitButton")}catch(i){console.error("Error in getMonthAndYear:",i)}},Fn=async n=>{if(document.getElementById("timesheetApprovalView-module")){await H("Timesheet data cannot cannot be modified by Line Manager.","alert");return}if(Rt!=="Draft"){await H("This timesheet has been submitted and cannot be modified.","alert");return}try{let i=document.getElementById("timesheetModal"),a=document.getElementById("modalDate"),l=document.getElementById("modalBackdrop"),c=document.getElementById("milestoneSelect"),h=document.getElementById("weekendInput"),g=document.getElementById("existingEntries"),f=document.getElementById("leaveSelect"),v=document.getElementById("statusSelect"),D=document.getElementById("workedFields"),s=document.getElementById("leaveFields"),E=document.getElementById("leavePeriodFields"),F=document.getElementById("leavePeriodSelect");g.innerHTML="";let P=parseInt(document.getElementById("month").value),O=parseInt(document.getElementById("year").value);if(isNaN(P)||isNaN(O)){console.error("Month or year is invalid.");return}let _=new Date(O,P,n),I=new Date(O,P,n).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"});a.textContent=`${I}`,i.setAttribute("data-day",n),i.setAttribute("data-month",P),i.setAttribute("data-year",O),i.classList.remove("hidden"),l.classList.remove("hidden"),c.innerHTML='<option value="">Select an activity</option>';let j=jt;if(!j||!j.milestones){console.error("No milestones found in consultant data");return}f.innerHTML='<option value="">Select a leave type</option>',Mt.forEach(U=>{let W=document.createElement("option");W.value=U._id,W.textContent=`${U.type}`,f.appendChild(W)}),f.addEventListener("change",function(){let U=f.value,W=Mt.find(G=>G._id===U)?.halfdayEligible||!1;U&&(W?E.classList.remove("hidden"):(E.classList.add("hidden"),F.value="Full Day"))});let L=j.currentConsultantId;j.milestones.forEach(U=>{let W=document.createElement("option");W.value=U.id,W.textContent=`${U.name} (${U.project})`,c.appendChild(W)});let M=_.getDay()===0||_.getDay()===6;h.checked=M,v.addEventListener("change",()=>{v.value==="worked"?(D.classList.remove("hidden"),s.classList.add("hidden"),E.classList.add("hidden")):v.value==="leave"&&(s.classList.remove("hidden"),D.classList.add("hidden"))});let $=await Xi(L,O,P+1,n),K=$.flatMap(U=>U.leaves.map(W=>({leaveId:W._id,leaveType:W.leave,dayId:U._id})));K.length>0&&K.forEach(U=>{let W=Mt.find(he=>he._id===U.leaveType),G=document.createElement("div");G.classList.add("p-2","mt-2","bg-gray-100","rounded","flex","justify-between"),G.innerHTML=`
          <span>${W?W.type:"Unknown Leave"}</span>
          <button class="bg-red-500 text-white px-2 py-1 rounded delete-day-entry"
            data-entry-id="${U.dayId}" 
            data-leave-id="${U.leaveId}"> 
            Delete
          </button>
        `,g.appendChild(G)}),$.length>0&&($.forEach(U=>{U.milestones.forEach(W=>{let G=document.createElement("div");G.classList.add("p-2","mt-2","bg-gray-100","rounded","flex","justify-between"),G.innerHTML=`
        <span>${W.milestone_id.name} - ${W.hours}h (${W.status})</span>
        <button class="bg-red-500 text-white px-2 py-1 rounded delete-entry"
          data-entry-id="${U._id}"
          data-milestone-id="${W._id}">
          Delete
        </button>
      `,g.appendChild(G)})}),document.querySelectorAll(".delete-entry").forEach(U=>{U.addEventListener("click",async W=>{let G=W.target.getAttribute("data-entry-id"),he=W.target.getAttribute("data-milestone-id");await ea(G,he),Fn(n)})}),document.querySelectorAll(".delete-day-entry").forEach(U=>{U.addEventListener("click",async W=>{let G=W.target.getAttribute("data-entry-id"),he=W.target.getAttribute("data-leave-id");await ta(G,he),Fn(n)})}))}catch(i){console.error("Error opening modal:",i)}},Ji=async()=>{try{let n=document.getElementById("timesheetModal"),r=parseInt(n.getAttribute("data-day")),i=document.getElementById("milestoneSelect").value,a=parseFloat(document.getElementById("hoursInput").value),l=document.getElementById("statusSelect").value,c=document.getElementById("weekendInput").checked,h=document.getElementById("leaveSelect").value,g=document.getElementById("leavePeriodSelect").value,f=parseInt(document.getElementById("year").value),v=parseInt(document.getElementById("month").value)+1,D={consultantId:ht,year:f,month:v,day:r,milestones:[]};if(l==="worked"){if(!i||!a){await H("Please fill in all required fields.","alert");return}let P=jt.milestones.find(O=>O.id===i);D.milestones=[{milestone_id:i,hours:a,status:l}]}if(l==="leave"){if(!h){await H("Please select a leave type.","alert");return}let F=[{leave:h,period:g}];D.leaves=F}let s=await fetch("/api/v1/timesheet/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!s.ok)throw new Error("Failed to submit timesheet entry");let E=await s.json();Xr(),await Je(document.getElementById("month"),document.getElementById("year"))}catch(n){console.error("Error submitting timesheet entry:",n)}},Qi=async()=>{try{let r=await(await fetch("/api/v1/users/me")).json();console.log(r);let i=r.data.data.consultant_id;ht=i,console.log("running getCOnsultant data - user route"),console.log(i);let l=await(await fetch(`/api/v1/consultants/${i}`)).json();console.log("running get consultant route"),console.log(l);let c=l.data.consultant.name,h=l.data.consultant.designation,g=l.data.consultant.noOfWorkingDaysPerMonth,f=l.data.consultant.noOfWorkingHoursPerMonth,D=[...l.data.consultant.assignedMilestones.filter(s=>s.milestoneStatus==="Active").map(s=>({id:s.id,name:s.name,project:s.project}))];return jt={name:c,designation:h,noOfWorkingDaysPerMonth:g,noOfWorkingHoursPerMonth:f,milestones:D,currentConsultantId:ht},jt}catch(n){console.error("Error fetching consultant data:",n)}},gt=(n,r,i)=>{let a=document.getElementById("calendarBody"),l=document.getElementById("calendarHead");a.innerHTML="",l.innerHTML="",l.innerHTML=`<tr class="bg-gray-100 text-center font-bold text-sm uppercase">
        <th class="p-2 border border-gray-300">Mon</th>
        <th class="p-2 border border-gray-300">Tue</th>
        <th class="p-2 border border-gray-300">Wed</th>
        <th class="p-2 border border-gray-300">Thu</th>
        <th class="p-2 border border-gray-300">Fri</th>
        <th class="p-2 border border-gray-300">Sat</th>
        <th class="p-2 border border-gray-300">Sun</th>
      </tr>`;let c=1;for(let h=0;h<6;h++){let g=document.createElement("tr");for(let f=0;f<7;f++){let v=document.createElement("td");if(v.classList.add("w-24","p-2","border","border-gray-300","align-top"),h===0&&f<n||c>r)v.classList.add("bg-gray-50");else{v.classList.add("bg-gray-100","cursor-pointer");let D=i.includes(c);v.setAttribute("data-day",c),v.addEventListener("click",E=>{E.stopPropagation(),Fn(parseInt(v.getAttribute("data-day")))}),D&&v.classList.add("bg-gray-200");let s=document.createElement("div");s.classList.add("font-bold","text-lg","p-1","rounded-full"),s.textContent=c,v.appendChild(s),c++}g.appendChild(v)}if(a.appendChild(g),c>r)break}},pt=async(n,r,i)=>{try{let a=parseInt(n.value)+1,l=parseInt(r.value);if(!i){console.info("Skipping timesheet fetch \u2014 consultant ID missing.");return}let c=`/api/v1/timesheet/${i}/${l}/${a}`,h=await fetch(c);if(!h.ok)throw new Error(`Failed to fetch timesheet data: ${h.statusText}`);if(re=(await h.json()).data.timesheetEntries,document.getElementById("timesheetApprovalView-module")){if(re.some(O=>O.status==="Draft"))return await H("There are no submitted timesheet data for the selected month!","alert"),Be("revertToDraftButton"),Be("approveButton"),ia(),console.warn("Draft entries detected. Approval process halted."),!1;if(re.some(O=>O.status==="Approved")){await H("Entries for this month are already approved!","alert"),Be("revertToDraftButton"),Be("approveButton");let{totalWorkedHours:O,totalWorkedDays:_,leaveSummary:I}=yn(re);Dn(O,_,I),bn(re),await En(re);return}Vt("revertToDraftButton"),Vt("approveButton")}if(document.getElementById("timesheetProcessView-module")){if(re.some(O=>O.status==="Draft"||O.status==="Submitted"))return await H("There are no approved timesheet data for the selected month!","alert"),Be("processButton"),Be("revertToApproveButton"),console.warn("Draft entries or submitted entries detected. Processing operation halted."),!1;if(re.some(O=>O.status==="Processed")){await H("Entries for this month are already processed!","alert"),Be("revertToApproveButton"),Be("processButton");let{totalWorkedHours:O,totalWorkedDays:_,leaveSummary:I}=yn(re);Dn(O,_,I),bn(re),await En(re);return}Vt("revertToApproveButton"),Vt("processButton")}let{totalWorkedHours:D,totalWorkedDays:s,leaveSummary:E}=yn(re);Dn(D,s,E),bn(re),await En(re)}catch(a){console.error("Error fetching timesheet data:",a)}},Xr=()=>{document.getElementById("timesheetModal").classList.add("hidden"),document.getElementById("modalBackdrop").classList.add("hidden");let n=document.getElementById("existingEntries");n&&(n.innerHTML="")},Xi=async(n,r,i,a)=>{try{let l=`/api/v1/timesheet/${n}/${r}/${i}/${a}`,c=await fetch(l);if(!c.ok)throw new Error(`Failed to fetch timesheet entries: ${c.statusText}`);return(await c.json()).data.timesheetEntries||[]}catch(l){return console.error("Error fetching timesheet entries:",l),[]}},ea=async(n,r)=>{if(await H("Are you sure you want to delete this entry?","confirm"))try{let a=await fetch(`/api/v1/timesheet/${n}/milestones/${r}`,{method:"DELETE"});if(!a.ok)throw new Error(`Failed to delete timesheet entry: ${a.statusText}`);let l=document.getElementById("month"),c=document.getElementById("year");Je(l,c)}catch(a){console.error("Error deleting timesheet entry:",a)}},ta=async(n,r)=>{if(await H("Are you sure you want to delete this entry?","confirm"))try{let a=await fetch(`/api/v1/timesheet/${n}/${r}`,{method:"DELETE"});if(!a.ok)throw new Error(`Failed to delete timesheet entry: ${a.statusText}`);let l=document.getElementById("month"),c=document.getElementById("year");Je(l,c)}catch(a){console.error("Error deleting timesheet entry:",a)}},yn=n=>{let r=0,i=0,a={};return n.forEach(l=>{let{totalWorkedHours:c,milestones:h,leaveSummary:g}=l;if(r+=c,i=(r/8).toFixed(2),g)for(let[f,v]of Object.entries(g))a[f]=(a[f]||0)+v}),{totalWorkedHours:r,totalWorkedDays:i,leaveSummary:a}},Dn=(n,r,i)=>{let a=document.getElementById("reported-time"),l=document.getElementById("leave-summary");a&&(a.textContent=`${n}h / ${r} Days`),l.innerHTML="";for(let[c,h]of Object.entries(i)){let g=document.createElement("div");g.classList.add("text-sm","gap-2","flex","flex-col","items-center","mx-2"),g.innerHTML=`
      <div class="text-black font-medium">${c}</div>
      <div class="text-2xl font-bold">${h} days</div>
    `,l.appendChild(g)}},En=async n=>{Rt="Draft";for(let r of n){let{day:i,milestones:a,leaves:l,status:c}=r,h=document.querySelector(`#calendarBody td[data-day="${i}"]`);if(c!=="Draft"&&(Rt=c),h){h.querySelectorAll("div:not(:first-child)").forEach(f=>f.remove());let g=document.createElement("div");g.classList.add("mt-2"),l&&l.length>0&&l.forEach(f=>{let v=document.createElement("div");v.classList.add("text-sm","text-red-600","font-bold"),v.textContent=f?.type||"Unknown Leave",g.appendChild(v)}),a.length>0&&a.forEach(f=>{let v=document.createElement("div");v.classList.add("p-2","mt-2","mb-2","rounded-md","text-white",ra(f.milestone_id)),v.textContent=`${f.name} - ${f.hours}h`,g.appendChild(v)}),h.appendChild(g)}}},bn=n=>{let r=new Map;n.forEach(a=>{a.milestones.forEach(l=>{let{milestone_id:c,name:h,hours:g,status:f}=l;f!=="day-off"&&(r.has(h)?r.set(h,r.get(h)+g):r.set(h,g))})});let i=document.getElementById("milestone-box");i.innerHTML="",r.forEach(async(a,l)=>{let c=document.createElement("div");c.classList.add("flex","gap-5","items-center","justify-between","p-4","border","border-gray-300","bg-white","rounded-lg","min-w-[200px]","max-h-2"),c.innerHTML=`
      <div>
        <div class="text-base text-black">${l}</div>
      </div>
      <div class="text-base font-bold">${a}h ${(a/8).toFixed(2)} days </div>
    `,i.appendChild(c)})},na=async()=>{let n=ht,r=parseInt(document.getElementById("year").value),i=parseInt(document.getElementById("month").value)+1;if(await H("Are you sure you want to submit all draft timesheets?","confirm"))try{let l=await fetch(`/api/v1/timesheet/submit/${n}/${r}/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),c=await l.json();if(l.ok)H(c.message,"alert"),Je(document.getElementById("month"),document.getElementById("year"));else throw new Error(c.message)}catch(l){console.error("Error submitting timesheets:",l)}},Jr=["bg-secondary-200","bg-secondary-500","bg-secondary-600","bg-green-600","bg-black"],wn={},Sn=0,ra=n=>{if(wn[n])return wn[n];let r=Jr[Sn];return Sn=(Sn+1)%Jr.length,wn[n]=r,r},eo=async()=>{try{let r=await fetch("/api/v1/consultant-leaves/");if(!r.ok)throw new Error(`Failed to fetch timesheet entries: ${r.statusText}`);Mt=(await r.json()).data.data||[]}catch(n){return console.error("Error fetching timesheet entries:",n),[]}};String.prototype.hashCode=function(){let n=0;for(let r=0;r<this.length;r++)n=this.charCodeAt(r)+((n<<5)-n);return n};var oa=(n,r)=>{let i=document.getElementById(r);i&&(Rt!==n?(i.disabled=!0,i.classList.add("bg-secondary-900","cursor-not-allowed"),i.classList.remove("bg-secondary-600","hover:bg-secondary-200")):(i.disabled=!1,i.classList.add("bg-secondary-600","hover:bg-secondary-200"),i.classList.remove("bg-secondary-900","cursor-not-allowed")))},Be=n=>{let r=document.getElementById(n);r.disabled=!0,r.classList.add("bg-secondary-900","cursor-not-allowed"),r.classList.remove("bg-secondary-600","hover:bg-secondary-200")},Vt=n=>{let r=document.getElementById(n);r.disabled=!1,r.classList.add("bg-secondary-600","hover:bg-secondary-200"),r.classList.remove("bg-secondary-900","cursor-not-allowed")};var ia=()=>{let n=document.getElementById("reported-time"),r=document.getElementById("leave-summary"),i=document.getElementById("milestone-box");r.innerHTML="",n.innerHTML="",i.innerHTML=""};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("timesheet-module")&&(document.getElementById("modalClose")?.addEventListener("click",Xr),document.getElementById("submitEntry")?.addEventListener("click",Ji),document.getElementById("submitButton").addEventListener("click",na))});var Ut="",to=null,no=async()=>{await sa();let n=document.getElementById("lineManagerConsultant");n&&n.addEventListener("change",async()=>{await ro()})},aa=async n=>{try{let r=await fetch(`/api/v1/consultants/line-manager/${n}`);if(!r.ok)throw new Error(`Failed to fetch consultant entries: ${r.statusText}`);return(await r.json()).data.consultants||[]}catch(r){return console.error("Error fetching consultants:",r),[]}},sa=async()=>{try{let i=(await(await fetch("/api/v1/users/me")).json()).data.data.consultant_id;if(!i){console.warn("No consultant ID found for the user.");return}let a=await aa(i),l=document.getElementById("lineManagerConsultant");if(!l){console.error("Consultant dropdown element not found.");return}l.innerHTML='<option value="">Select a Consultant</option>',a.forEach(c=>{let h=document.createElement("option");h.value=c._id,h.textContent=c.name,l.appendChild(h)}),a.length>0&&(l.value=a[0]._id,await ro())}catch(n){console.error("Error setting consultant dropdown:",n)}},ua=async()=>{let n=document.getElementById("lineManagerConsultant").value;Ut=n;try{let a=(await(await fetch(`/api/v1/consultants/${n}`)).json()).data.consultant;return to={name:a.name,designation:a.designation,noOfWorkingDaysPerMonth:a.noOfWorkingDaysPerMonth,noOfWorkingHoursPerMonth:a.noOfWorkingHoursPerMonth,milestones:a.assignedMilestones.filter(l=>l.milestoneStatus==="Active").map(l=>({id:l.id,name:l.name,project:l.project}))},to}catch(r){console.error("Error fetching consultant data:",r)}},ro=async()=>{try{let n=await ua();if(!n){console.warn("No consultant data available.");return}document.getElementById("consultant-name").textContent=n.name,document.getElementById("consultant-designation").textContent=n.designation,document.getElementById("consultant-working-hours-days").textContent=`${n.noOfWorkingHoursPerMonth} / ${n.noOfWorkingDaysPerMonth}`}catch(n){console.error("Error initializing basic data:",n)}},$t=async(n,r)=>{try{let i=parseInt(n.value),a=parseInt(r.value),l=new Date(a,i+1,0).getDate(),c=new Date(a,i,1).getDay();c=c===0?6:c-1;let h=[];for(let g=1;g<=l;g++){let f=(new Date(a,i,g).getDay()+6)%7;(f===5||f===6)&&h.push(g)}gt(c,l,h),await pt(n,r,Ut)}catch(i){console.error("Error in getMonthAndYear:",i)}},la=async()=>{let n=document.getElementById("revertToDraftButton"),r=Ut,i=parseInt(document.getElementById("year").value),a=parseInt(document.getElementById("month").value)+1;if(await H("Are you sure you want to revert this submitted timesheet?","confirm")&&n)try{let c=await fetch(`/api/v1/timesheet/revert/${r}/${i}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),h=await c.json();if(c.ok)await H(h.message,"alert"),$t(document.getElementById("month"),document.getElementById("year"));else throw new Error(h.message)}catch(c){console.log(c)}},ca=async()=>{let n=document.getElementById("approveButton"),r=Ut,i=parseInt(document.getElementById("year").value),a=parseInt(document.getElementById("month").value)+1;if(await H("Are you sure you want to approve this timesheet?","confirm")&&n)try{let c=await fetch(`/api/v1/timesheet/approve/${r}/${i}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),h=await c.json();if(c.ok)await H(h.message,"alert"),$t(document.getElementById("month"),document.getElementById("year"));else throw new Error(h.message)}catch(c){console.log(c)}};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("timesheetApprovalView-module")&&(document.getElementById("revertToDraftButton")?.addEventListener("click",la),document.getElementById("approveButton")?.addEventListener("click",ca))});var Cn=async()=>{try{return(await(await fetch("/api/v1/users/me")).json()).data.data.name}catch(n){return console.error("Failed to fetch current user:",n),null}};var Pn=async()=>{let n=document.getElementById("year").value,r=parseInt(document.getElementById("month").value)+1;try{let i=await fetch(`/api/v1/timesheet/${n}/${r}`),a=await i.json();if(i.ok){let l=da(a.data.consultantsTimesheets);ma(l)}else console.error("Error fetching timesheet summary:",a.message)}catch(i){console.error("Error fetching timesheet summary:",i)}},da=n=>n.map(r=>{let i=0,a=new Set,l={},c={};return r.timesheets.forEach(h=>{h.totalWorkedHours>0&&a.add(h.day),h.milestones&&Array.isArray(h.milestones)&&h.milestones.forEach(g=>{c[g.name]||(c[g.name]=0),c[g.name]+=g.hours,i+=g.hours}),h.leaves&&Array.isArray(h.leaves)&&h.leaves.forEach(g=>{let f=g.type||"Unknown Leave",v=g.period==="Full Day"?1:.5;l[f]=(l[f]||0)+v})}),{consultantName:r.consultantName,workedHours:i,workedDays:a.size,leaveSummary:l,milestoneSummary:c}}),ma=n=>{let r=document.getElementById("timesheetTableBody");r.innerHTML="";let i=0;n.forEach(a=>{let l=Object.keys(a.milestoneSummary||{}).length;l>i&&(i=l)}),n.forEach(a=>{let l=document.createElement("tr");l.innerHTML=`
      <td class="border px-4 py-2">${a.consultantName}</td>
      <td class="border px-4 py-2">${a.workedHours} hrs</td>
      <td class="border px-4 py-2">${(a.workedHours/8).toFixed(2)} days</td>
      ${pa(a.milestoneSummary)}
      <td class="border px-4 py-2">${ga(a.leaveSummary)}</td>
      
    `,r.appendChild(l)})},ha=n=>{switch(n.toLowerCase()){case"annual leave":return"bg-secondary-100";case"medical leave":return"bg-secondary-300";case"public holiday":return"bg-green-100";default:return"bg-gray-100 text-gray-800"}},ga=n=>!n||Object.keys(n).length===0?'<span class="text-gray-400 italic">No Leaves</span>':Object.entries(n).map(([r,i])=>`<div class="mb-2 inline-flex items-center badge ${ha(r)} text-xs font-medium p-2 py-1 rounded-lg shadow-lg">
          <span class="mr-1 badge-bold">${r}: </span>
          <span class="font-bold badge-value"> ${i} days</span>
        </div>`).join(""),pa=n=>!n||Object.keys(n).length===0?'<td class="border px-4 py-2 text-gray-400 italic">No Deliverables</td>':`<td class="border px-4 py-2 whitespace-normal break-words max-w-sm">${Object.entries(n).map(([i,a])=>`<div class="mb-2 inline-flex items-center badge  text-xs font-medium px-2 py-1 rounded-lg shadow-md bg-gray-100">
          <span class="mr-1 ">${i}:</span>
          <span class="font-bold badge-bold badge-value"> ${a} hrs</span>
        </div>`).join("")}</td>`,oo=async()=>{let n=document.getElementById("timesheetTable"),r=document.getElementById("month"),i=document.getElementById("year"),a=await Cn();if(!n){console.error("Error: Table not found!"),alert("Table not found! Please generate the timesheet before printing.");return}let l=r.options[r.selectedIndex].text,c=i.options[i.selectedIndex].text,h=window.open("","","width=900,height=700"),g=h.document;g.open(),g.close();let f=g.querySelector("head"),v=g.querySelector("body"),D=g.createElement("title");D.textContent="Print Timesheet Summary",f.appendChild(D);let s=g.createElement("style");s.textContent=`
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { width: 100%; border-collapse: collapse; padding: 10px;}
  th, td { border: 1px solid #000; padding: 8px; text-align: left; vertical-align: top; padding-left: 12px;}
  th { background-color: #f4f4f4; padding-left: 12px; }

  /* Leave & Milestone badge styles */
  .badge {
    display: inline-flex;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 4px 8px;
    margin: 2px;
  }

  .badge-bold {
    font-weight: 700;
  }



  .bg-secondary-100 {
    background-color: #e0f2fe;
    color: #0369a1;
  }
  
   .bg-secondary-300 {
    background-color: #f3f4f6;
    color: #d0383f;
  }

  .bg-green-100 {
    background-color: #dcfce7;
    color: #166534;
  }

  .bg-gray-100 {
    background-color: #f3f4f6;
    color: #374151;
  }
  
  .badge-value {
  margin-left: 4px;
}

  @media print {
    body { padding: 2px; }
    button { display: none; }
  }
`,f.appendChild(s);let E=g.createElement("h2");E.textContent="Timesheet Summary",v.appendChild(E);let F=g.createElement("h4");F.textContent=`Month: ${l} | Year: ${c}`,v.appendChild(F);let P=n.cloneNode(!0);v.appendChild(P);let O=g.createElement("button");O.textContent="Print",O.style.margin="20px 0",O.style.padding="8px 16px",O.onclick=function(){h.print()},v.appendChild(O);let _=g.createElement("footer");_.style.marginTop="40px",_.style.paddingTop="20px",_.style.borderTop="1px solid #ccc",_.style.textAlign="center",_.style.fontSize="12px",_.style.color="#666";let I=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});_.textContent=`\xA9 ${c} HRIS - Buddhika Thanura Jayasingha. | Designed & Develpoed by @cyberBuddhika. This timesheet summary was automatically generated by ${a} on ${I}.`,v.appendChild(_);let j=g.createElement("style");j.textContent=`
  @media print {
    footer {
      position: fixed;
      bottom: 20px;
      left: 0;
      right: 0;
      text-align: center;
    }
  }
`,f.appendChild(j),h.print(),h.close()};var fa=Object.create,Hn=Object.defineProperty,va=Object.getOwnPropertyDescriptor,ya=Object.getOwnPropertyNames,Da=Object.getPrototypeOf,Ea=Object.prototype.hasOwnProperty,Vo=n=>{throw TypeError(n)},Mo=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),Kn=(n,r)=>{for(var i in r)Hn(n,i,{get:r[i],enumerable:!0})},ba=(n,r,i,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let l of ya(r))!Ea.call(n,l)&&l!==i&&Hn(n,l,{get:()=>r[l],enumerable:!(a=va(r,l))||a.enumerable});return n},Qt=(n,r,i)=>(i=n!=null?fa(Da(n)):{},ba(r||!n||!n.__esModule?Hn(i,"default",{value:n,enumerable:!0}):i,n)),wa=(n,r,i)=>r.has(n)||Vo("Cannot "+i),Sa=(n,r,i)=>r.has(n)?Vo("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,i),ft=(n,r,i)=>(wa(n,r,"access private method"),i),Gn=Mo((n,r)=>{"use strict";var i=new Proxy(String,{get:()=>i});r.exports=i}),Fa=Mo(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){return new Proxy({},{get:()=>c=>c})}var i=/\r\n|[\n\r\u2028\u2029]/;function a(c,h,g){let f=Object.assign({column:0,line:-1},c.start),v=Object.assign({},f,c.end),{linesAbove:D=2,linesBelow:s=3}=g||{},E=f.line,F=f.column,P=v.line,O=v.column,_=Math.max(E-(D+1),0),I=Math.min(h.length,P+s);E===-1&&(_=0),P===-1&&(I=h.length);let j=P-E,L={};if(j)for(let M=0;M<=j;M++){let $=M+E;if(!F)L[$]=!0;else if(M===0){let K=h[$-1].length;L[$]=[F,K-F+1]}else if(M===j)L[$]=[0,O];else{let K=h[$-M].length;L[$]=[0,K]}}else F===O?F?L[E]=[F,0]:L[E]=!0:L[E]=[F,O-F];return{start:_,end:I,markerLines:L}}function l(c,h,g={}){let f=r(!1),v=c.split(i),{start:D,end:s,markerLines:E}=a(h,v,g),F=h.start&&typeof h.start.column=="number",P=String(s).length,O=c.split(i,s).slice(D,s).map((_,I)=>{let j=D+1+I,L=` ${` ${j}`.slice(-P)} |`,M=E[j],$=!E[j+1];if(M){let K="";if(Array.isArray(M)){let U=_.slice(0,Math.max(M[0]-1,0)).replace(/[^\t]/g," "),W=M[1]||1;K=[`
 `,f.gutter(L.replace(/\d/g," "))," ",U,f.marker("^").repeat(W)].join(""),$&&g.message&&(K+=" "+f.message(g.message))}return[f.marker(">"),f.gutter(L),_.length>0?` ${_}`:"",K].join("")}else return` ${f.gutter(L)}${_.length>0?` ${_}`:""}`}).join(`
`);return g.message&&!F&&(O=`${" ".repeat(P+1)}${g.message}
${O}`),O}n.codeFrameColumns=l}),Ca={};Kn(Ca,{__debug:()=>Tl,check:()=>Nl,doc:()=>Ei,format:()=>Si,formatWithCursor:()=>wi,getSupportInfo:()=>Al,util:()=>bi,version:()=>il});var Pa=(n,r,i,a)=>{if(!(n&&r==null))return r.replaceAll?r.replaceAll(i,a):i.global?r.replace(i,a):r.split(i).join(a)},Xt=Pa;function me(){}me.prototype={diff:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=a.callback;typeof a=="function"&&(l=a,a={});var c=this;function h(L){return L=c.postProcess(L,a),l?(setTimeout(function(){l(L)},0),!0):L}n=this.castInput(n,a),r=this.castInput(r,a),n=this.removeEmpty(this.tokenize(n,a)),r=this.removeEmpty(this.tokenize(r,a));var g=r.length,f=n.length,v=1,D=g+f;a.maxEditLength!=null&&(D=Math.min(D,a.maxEditLength));var s=(i=a.timeout)!==null&&i!==void 0?i:1/0,E=Date.now()+s,F=[{oldPos:-1,lastComponent:void 0}],P=this.extractCommon(F[0],r,n,0,a);if(F[0].oldPos+1>=f&&P+1>=g)return h(io(c,F[0].lastComponent,r,n,c.useLongestToken));var O=-1/0,_=1/0;function I(){for(var L=Math.max(O,-v);L<=Math.min(_,v);L+=2){var M=void 0,$=F[L-1],K=F[L+1];$&&(F[L-1]=void 0);var U=!1;if(K){var W=K.oldPos-L;U=K&&0<=W&&W<g}var G=$&&$.oldPos+1<f;if(!U&&!G){F[L]=void 0;continue}if(!G||U&&$.oldPos<K.oldPos?M=c.addToPath(K,!0,!1,0,a):M=c.addToPath($,!1,!0,1,a),P=c.extractCommon(M,r,n,L,a),M.oldPos+1>=f&&P+1>=g)return h(io(c,M.lastComponent,r,n,c.useLongestToken));F[L]=M,M.oldPos+1>=f&&(_=Math.min(_,L-1)),P+1>=g&&(O=Math.max(O,L+1))}v++}if(l)(function L(){setTimeout(function(){if(v>D||Date.now()>E)return l();I()||L()},0)})();else for(;v<=D&&Date.now()<=E;){var j=I();if(j)return j}},addToPath:function(n,r,i,a,l){var c=n.lastComponent;return c&&!l.oneChangePerToken&&c.added===r&&c.removed===i?{oldPos:n.oldPos+a,lastComponent:{count:c.count+1,added:r,removed:i,previousComponent:c.previousComponent}}:{oldPos:n.oldPos+a,lastComponent:{count:1,added:r,removed:i,previousComponent:c}}},extractCommon:function(n,r,i,a,l){for(var c=r.length,h=i.length,g=n.oldPos,f=g-a,v=0;f+1<c&&g+1<h&&this.equals(i[g+1],r[f+1],l);)f++,g++,v++,l.oneChangePerToken&&(n.lastComponent={count:1,previousComponent:n.lastComponent,added:!1,removed:!1});return v&&!l.oneChangePerToken&&(n.lastComponent={count:v,previousComponent:n.lastComponent,added:!1,removed:!1}),n.oldPos=g,f},equals:function(n,r,i){return i.comparator?i.comparator(n,r):n===r||i.ignoreCase&&n.toLowerCase()===r.toLowerCase()},removeEmpty:function(n){for(var r=[],i=0;i<n.length;i++)n[i]&&r.push(n[i]);return r},castInput:function(n){return n},tokenize:function(n){return Array.from(n)},join:function(n){return n.join("")},postProcess:function(n){return n}};function io(n,r,i,a,l){for(var c=[],h;r;)c.push(r),h=r.previousComponent,delete r.previousComponent,r=h;c.reverse();for(var g=0,f=c.length,v=0,D=0;g<f;g++){var s=c[g];if(s.removed)s.value=n.join(a.slice(D,D+s.count)),D+=s.count;else{if(!s.added&&l){var E=i.slice(v,v+s.count);E=E.map(function(F,P){var O=a[D+P];return O.length>F.length?O:F}),s.value=n.join(E)}else s.value=n.join(i.slice(v,v+s.count));v+=s.count,s.added||(D+=s.count)}}return c}var cc=new me;function ao(n,r){var i;for(i=0;i<n.length&&i<r.length;i++)if(n[i]!=r[i])return n.slice(0,i);return n.slice(0,i)}function so(n,r){var i;if(!n||!r||n[n.length-1]!=r[r.length-1])return"";for(i=0;i<n.length&&i<r.length;i++)if(n[n.length-(i+1)]!=r[r.length-(i+1)])return n.slice(-i);return n.slice(-i)}function Tn(n,r,i){if(n.slice(0,r.length)!=r)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(r),"; this is a bug"));return i+n.slice(r.length)}function _n(n,r,i){if(!r)return n+i;if(n.slice(-r.length)!=r)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(r),"; this is a bug"));return n.slice(0,-r.length)+i}function vt(n,r){return Tn(n,r,"")}function Wt(n,r){return _n(n,r,"")}function uo(n,r){return r.slice(0,ka(n,r))}function ka(n,r){var i=0;n.length>r.length&&(i=n.length-r.length);var a=r.length;n.length<r.length&&(a=n.length);var l=Array(a),c=0;l[0]=0;for(var h=1;h<a;h++){for(r[h]==r[c]?l[h]=l[c]:l[h]=c;c>0&&r[h]!=r[c];)c=l[c];r[h]==r[c]&&c++}c=0;for(var g=i;g<n.length;g++){for(;c>0&&n[g]!=r[c];)c=l[c];n[g]==r[c]&&c++}return c}var Zt="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Oa=new RegExp("[".concat(Zt,"]+|\\s+|[^").concat(Zt,"]"),"ug"),en=new me;en.equals=function(n,r,i){return i.ignoreCase&&(n=n.toLowerCase(),r=r.toLowerCase()),n.trim()===r.trim()};en.tokenize=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i;if(r.intlSegmenter){if(r.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');i=Array.from(r.intlSegmenter.segment(n),function(c){return c.segment})}else i=n.match(Oa)||[];var a=[],l=null;return i.forEach(function(c){/\s/.test(c)?l==null?a.push(c):a.push(a.pop()+c):/\s/.test(l)?a[a.length-1]==l?a.push(a.pop()+c):a.push(l+c):a.push(c),l=c}),a};en.join=function(n){return n.map(function(r,i){return i==0?r:r.replace(/^\s+/,"")}).join("")};en.postProcess=function(n,r){if(!n||r.oneChangePerToken)return n;var i=null,a=null,l=null;return n.forEach(function(c){c.added?a=c:c.removed?l=c:((a||l)&&lo(i,l,a,c),i=c,a=null,l=null)}),(a||l)&&lo(i,l,a,null),n};function lo(n,r,i,a){if(r&&i){var l=r.value.match(/^\s*/)[0],c=r.value.match(/\s*$/)[0],h=i.value.match(/^\s*/)[0],g=i.value.match(/\s*$/)[0];if(n){var f=ao(l,h);n.value=_n(n.value,h,f),r.value=vt(r.value,f),i.value=vt(i.value,f)}if(a){var v=so(c,g);a.value=Tn(a.value,g,v),r.value=Wt(r.value,v),i.value=Wt(i.value,v)}}else if(i)n&&(i.value=i.value.replace(/^\s*/,"")),a&&(a.value=a.value.replace(/^\s*/,""));else if(n&&a){var D=a.value.match(/^\s*/)[0],s=r.value.match(/^\s*/)[0],E=r.value.match(/\s*$/)[0],F=ao(D,s);r.value=vt(r.value,F);var P=so(vt(D,F),E);r.value=Wt(r.value,P),a.value=Tn(a.value,D,P),n.value=_n(n.value,D,D.slice(0,D.length-P.length))}else if(a){var O=a.value.match(/^\s*/)[0],_=r.value.match(/\s*$/)[0],I=uo(_,O);r.value=Wt(r.value,I)}else if(n){var j=n.value.match(/\s*$/)[0],L=r.value.match(/^\s*/)[0],M=uo(j,L);r.value=vt(r.value,M)}}var xa=new me;xa.tokenize=function(n){var r=new RegExp("(\\r?\\n)|[".concat(Zt,"]+|[^\\S\\n\\r]+|[^").concat(Zt,"]"),"ug");return n.match(r)||[]};var qn=new me;qn.tokenize=function(n,r){r.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var i=[],a=n.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(var l=0;l<a.length;l++){var c=a[l];l%2&&!r.newlineIsToken?i[i.length-1]+=c:i.push(c)}return i};qn.equals=function(n,r,i){return i.ignoreWhitespace?((!i.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!i.newlineIsToken||!r.includes(`
`))&&(r=r.trim())):i.ignoreNewlineAtEof&&!i.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),r.endsWith(`
`)&&(r=r.slice(0,-1))),me.prototype.equals.call(this,n,r,i)};var Ba=new me;Ba.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var Na=new me;Na.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function In(n){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},In(n)}var Dt=new me;Dt.useLongestToken=!0;Dt.tokenize=qn.tokenize;Dt.castInput=function(n,r){var i=r.undefinedReplacement,a=r.stringifyReplacer,l=a===void 0?function(c,h){return typeof h>"u"?i:h}:a;return typeof n=="string"?n:JSON.stringify(Ln(n,null,null,l),l,"  ")};Dt.equals=function(n,r,i){return me.prototype.equals.call(Dt,n.replace(/,([\r\n])/g,"$1"),r.replace(/,([\r\n])/g,"$1"),i)};function Ln(n,r,i,a,l){r=r||[],i=i||[],a&&(n=a(l,n));var c;for(c=0;c<r.length;c+=1)if(r[c]===n)return i[c];var h;if(Object.prototype.toString.call(n)==="[object Array]"){for(r.push(n),h=new Array(n.length),i.push(h),c=0;c<n.length;c+=1)h[c]=Ln(n[c],r,i,a,l);return r.pop(),i.pop(),h}if(n&&n.toJSON&&(n=n.toJSON()),In(n)==="object"&&n!==null){r.push(n),h={},i.push(h);var g=[],f;for(f in n)Object.prototype.hasOwnProperty.call(n,f)&&g.push(f);for(g.sort(),c=0;c<g.length;c+=1)f=g[c],h[f]=Ln(n[f],r,i,a,f);r.pop(),i.pop()}else h=n;return h}var Yt=new me;Yt.tokenize=function(n){return n.slice()};Yt.join=Yt.removeEmpty=function(n){return n};function Aa(n,r,i){return Yt.diff(n,r,i)}function Ta(n){let r=n.indexOf("\r");return r!==-1?n.charAt(r+1)===`
`?"crlf":"cr":"lf"}function Zn(n){switch(n){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function jo(n,r){let i;switch(r){case`
`:i=/\n/gu;break;case"\r":i=/\r/gu;break;case`\r
`:i=/\r\n/gu;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(r)}.`)}let a=n.match(i);return a?a.length:0}function _a(n){return Xt(!1,n,/\r\n?/gu,`
`)}var ze="string",Ee="array",He="cursor",be="indent",we="align",Se="trim",ie="group",fe="fill",ue="if-break",Fe="indent-if-break",Ce="line-suffix",Pe="line-suffix-boundary",Q="line",ve="label",ce="break-parent",Ro=new Set([He,be,we,Se,ie,fe,ue,Fe,Ce,Pe,Q,ve,ce]),Ia=(n,r,i)=>{if(!(n&&r==null))return Array.isArray(r)||typeof r=="string"?r[i<0?r.length+i:i]:r.at(i)},J=Ia;function La(n){if(typeof n=="string")return ze;if(Array.isArray(n))return Ee;if(!n)return;let{type:r}=n;if(Ro.has(r))return r}var Ke=La,Va=n=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(n);function Ma(n){let r=n===null?"null":typeof n;if(r!=="string"&&r!=="object")return`Unexpected doc '${r}', 
Expected it to be 'string' or 'object'.`;if(Ke(n))throw new Error("doc is valid.");let i=Object.prototype.toString.call(n);if(i!=="[object Object]")return`Unexpected doc '${i}'.`;let a=Va([...Ro].map(l=>`'${l}'`));return`Unexpected doc.type '${n.type}'.
Expected it to be ${a}.`}var ja=class extends Error{name="InvalidDocError";constructor(n){super(Ma(n)),this.doc=n}},rt=ja,co={};function Ra(n,r,i,a){let l=[n];for(;l.length>0;){let c=l.pop();if(c===co){i(l.pop());continue}i&&l.push(c,co);let h=Ke(c);if(!h)throw new rt(c);if(r?.(c)!==!1)switch(h){case Ee:case fe:{let g=h===Ee?c:c.parts;for(let f=g.length,v=f-1;v>=0;--v)l.push(g[v]);break}case ue:l.push(c.flatContents,c.breakContents);break;case ie:if(a&&c.expandedStates)for(let g=c.expandedStates.length,f=g-1;f>=0;--f)l.push(c.expandedStates[f]);else l.push(c.contents);break;case we:case be:case Fe:case ve:case Ce:l.push(c.contents);break;case ze:case He:case Se:case Pe:case Q:case ce:break;default:throw new rt(c)}}}var Yn=Ra;function tn(n,r){if(typeof n=="string")return r(n);let i=new Map;return a(n);function a(c){if(i.has(c))return i.get(c);let h=l(c);return i.set(c,h),h}function l(c){switch(Ke(c)){case Ee:return r(c.map(a));case fe:return r({...c,parts:c.parts.map(a)});case ue:return r({...c,breakContents:a(c.breakContents),flatContents:a(c.flatContents)});case ie:{let{expandedStates:h,contents:g}=c;return h?(h=h.map(a),g=h[0]):g=a(g),r({...c,contents:g,expandedStates:h})}case we:case be:case Fe:case ve:case Ce:return r({...c,contents:a(c.contents)});case ze:case He:case Se:case Pe:case Q:case ce:return r(c);default:throw new rt(c)}}}function Jn(n,r,i){let a=i,l=!1;function c(h){if(l)return!1;let g=r(h);g!==void 0&&(l=!0,a=g)}return Yn(n,c),a}function Ua(n){if(n.type===ie&&n.break||n.type===Q&&n.hard||n.type===ce)return!0}function $a(n){return Jn(n,Ua,!1)}function mo(n){if(n.length>0){let r=J(!1,n,-1);!r.expandedStates&&!r.break&&(r.break="propagated")}return null}function Wa(n){let r=new Set,i=[];function a(c){if(c.type===ce&&mo(i),c.type===ie){if(i.push(c),r.has(c))return!1;r.add(c)}}function l(c){c.type===ie&&i.pop().break&&mo(i)}Yn(n,a,l,!0)}function za(n){return n.type===Q&&!n.hard?n.soft?"":" ":n.type===ue?n.flatContents:n}function Ha(n){return tn(n,za)}function ho(n){for(n=[...n];n.length>=2&&J(!1,n,-2).type===Q&&J(!1,n,-1).type===ce;)n.length-=2;if(n.length>0){let r=yt(J(!1,n,-1));n[n.length-1]=r}return n}function yt(n){switch(Ke(n)){case be:case Fe:case ie:case Ce:case ve:{let r=yt(n.contents);return{...n,contents:r}}case ue:return{...n,breakContents:yt(n.breakContents),flatContents:yt(n.flatContents)};case fe:return{...n,parts:ho(n.parts)};case Ee:return ho(n);case ze:return n.replace(/[\n\r]*$/u,"");case we:case He:case Se:case Pe:case Q:case ce:break;default:throw new rt(n)}return n}function Uo(n){return yt(Ga(n))}function Ka(n){switch(Ke(n)){case fe:if(n.parts.every(r=>r===""))return"";break;case ie:if(!n.contents&&!n.id&&!n.break&&!n.expandedStates)return"";if(n.contents.type===ie&&n.contents.id===n.id&&n.contents.break===n.break&&n.contents.expandedStates===n.expandedStates)return n.contents;break;case we:case be:case Fe:case Ce:if(!n.contents)return"";break;case ue:if(!n.flatContents&&!n.breakContents)return"";break;case Ee:{let r=[];for(let i of n){if(!i)continue;let[a,...l]=Array.isArray(i)?i:[i];typeof a=="string"&&typeof J(!1,r,-1)=="string"?r[r.length-1]+=a:r.push(a),r.push(...l)}return r.length===0?"":r.length===1?r[0]:r}case ze:case He:case Se:case Pe:case Q:case ve:case ce:break;default:throw new rt(n)}return n}function Ga(n){return tn(n,r=>Ka(r))}function qa(n,r=Ko){return tn(n,i=>typeof i=="string"?Go(r,i.split(`
`)):i)}function Za(n){if(n.type===Q)return!0}function Ya(n){return Jn(n,Za,!1)}function Kt(n,r){return n.type===ve?{...n,contents:r(n.contents)}:r(n)}var Qn=()=>{},pe=Qn,$o=Qn,Ja=Qn;function Jt(n){return pe(n),{type:be,contents:n}}function ot(n,r){return pe(r),{type:we,contents:r,n}}function Wo(n,r={}){return pe(n),$o(r.expandedStates,!0),{type:ie,id:r.id,contents:n,break:!!r.shouldBreak,expandedStates:r.expandedStates}}function Qa(n){return ot(Number.NEGATIVE_INFINITY,n)}function Xa(n){return ot({type:"root"},n)}function es(n){return ot(-1,n)}function ts(n,r){return Wo(n[0],{...r,expandedStates:n})}function ns(n){return Ja(n),{type:fe,parts:n}}function rs(n,r="",i={}){return pe(n),r!==""&&pe(r),{type:ue,breakContents:n,flatContents:r,groupId:i.groupId}}function os(n,r){return pe(n),{type:Fe,contents:n,groupId:r.groupId,negate:r.negate}}function Vn(n){return pe(n),{type:Ce,contents:n}}var is={type:Pe},nn={type:ce},as={type:Se},Xn={type:Q,hard:!0},zo={type:Q,hard:!0,literal:!0},Ho={type:Q},ss={type:Q,soft:!0},$e=[Xn,nn],Ko=[zo,nn],Ue={type:He};function Go(n,r){pe(n),$o(r);let i=[];for(let a=0;a<r.length;a++)a!==0&&i.push(n),i.push(r[a]);return i}function qo(n,r,i){pe(n);let a=n;if(r>0){for(let l=0;l<Math.floor(r/i);++l)a=Jt(a);a=ot(r%i,a),a=ot(Number.NEGATIVE_INFINITY,a)}return a}function us(n,r){return pe(r),n?{type:ve,label:n,contents:r}:r}function De(n){var r;if(!n)return"";if(Array.isArray(n)){let i=[];for(let a of n)if(Array.isArray(a))i.push(...De(a));else{let l=De(a);l!==""&&i.push(l)}return i}return n.type===ue?{...n,breakContents:De(n.breakContents),flatContents:De(n.flatContents)}:n.type===ie?{...n,contents:De(n.contents),expandedStates:(r=n.expandedStates)==null?void 0:r.map(De)}:n.type===fe?{type:"fill",parts:n.parts.map(De)}:n.contents?{...n,contents:De(n.contents)}:n}function ls(n){let r=Object.create(null),i=new Set;return a(De(n));function a(c,h,g){var f,v;if(typeof c=="string")return JSON.stringify(c);if(Array.isArray(c)){let D=c.map(a).filter(Boolean);return D.length===1?D[0]:`[${D.join(", ")}]`}if(c.type===Q){let D=((f=g?.[h+1])==null?void 0:f.type)===ce;return c.literal?D?"literalline":"literallineWithoutBreakParent":c.hard?D?"hardline":"hardlineWithoutBreakParent":c.soft?"softline":"line"}if(c.type===ce)return((v=g?.[h-1])==null?void 0:v.type)===Q&&g[h-1].hard?void 0:"breakParent";if(c.type===Se)return"trim";if(c.type===be)return"indent("+a(c.contents)+")";if(c.type===we)return c.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+a(c.contents)+")":c.n<0?"dedent("+a(c.contents)+")":c.n.type==="root"?"markAsRoot("+a(c.contents)+")":"align("+JSON.stringify(c.n)+", "+a(c.contents)+")";if(c.type===ue)return"ifBreak("+a(c.breakContents)+(c.flatContents?", "+a(c.flatContents):"")+(c.groupId?(c.flatContents?"":', ""')+`, { groupId: ${l(c.groupId)} }`:"")+")";if(c.type===Fe){let D=[];c.negate&&D.push("negate: true"),c.groupId&&D.push(`groupId: ${l(c.groupId)}`);let s=D.length>0?`, { ${D.join(", ")} }`:"";return`indentIfBreak(${a(c.contents)}${s})`}if(c.type===ie){let D=[];c.break&&c.break!=="propagated"&&D.push("shouldBreak: true"),c.id&&D.push(`id: ${l(c.id)}`);let s=D.length>0?`, { ${D.join(", ")} }`:"";return c.expandedStates?`conditionalGroup([${c.expandedStates.map(E=>a(E)).join(",")}]${s})`:`group(${a(c.contents)}${s})`}if(c.type===fe)return`fill([${c.parts.map(D=>a(D)).join(", ")}])`;if(c.type===Ce)return"lineSuffix("+a(c.contents)+")";if(c.type===Pe)return"lineSuffixBoundary";if(c.type===ve)return`label(${JSON.stringify(c.label)}, ${a(c.contents)})`;throw new Error("Unknown doc type "+c.type)}function l(c){if(typeof c!="symbol")return JSON.stringify(String(c));if(c in r)return r[c];let h=c.description||"symbol";for(let g=0;;g++){let f=h+(g>0?` #${g}`:"");if(!i.has(f))return i.add(f),r[c]=`Symbol.for(${JSON.stringify(f)})`}}}var cs=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function ds(n){return n===12288||n>=65281&&n<=65376||n>=65504&&n<=65510}function ms(n){return n>=4352&&n<=4447||n===8986||n===8987||n===9001||n===9002||n>=9193&&n<=9196||n===9200||n===9203||n===9725||n===9726||n===9748||n===9749||n>=9776&&n<=9783||n>=9800&&n<=9811||n===9855||n>=9866&&n<=9871||n===9875||n===9889||n===9898||n===9899||n===9917||n===9918||n===9924||n===9925||n===9934||n===9940||n===9962||n===9970||n===9971||n===9973||n===9978||n===9981||n===9989||n===9994||n===9995||n===10024||n===10060||n===10062||n>=10067&&n<=10069||n===10071||n>=10133&&n<=10135||n===10160||n===10175||n===11035||n===11036||n===11088||n===11093||n>=11904&&n<=11929||n>=11931&&n<=12019||n>=12032&&n<=12245||n>=12272&&n<=12287||n>=12289&&n<=12350||n>=12353&&n<=12438||n>=12441&&n<=12543||n>=12549&&n<=12591||n>=12593&&n<=12686||n>=12688&&n<=12773||n>=12783&&n<=12830||n>=12832&&n<=12871||n>=12880&&n<=42124||n>=42128&&n<=42182||n>=43360&&n<=43388||n>=44032&&n<=55203||n>=63744&&n<=64255||n>=65040&&n<=65049||n>=65072&&n<=65106||n>=65108&&n<=65126||n>=65128&&n<=65131||n>=94176&&n<=94180||n===94192||n===94193||n>=94208&&n<=100343||n>=100352&&n<=101589||n>=101631&&n<=101640||n>=110576&&n<=110579||n>=110581&&n<=110587||n===110589||n===110590||n>=110592&&n<=110882||n===110898||n>=110928&&n<=110930||n===110933||n>=110948&&n<=110951||n>=110960&&n<=111355||n>=119552&&n<=119638||n>=119648&&n<=119670||n===126980||n===127183||n===127374||n>=127377&&n<=127386||n>=127488&&n<=127490||n>=127504&&n<=127547||n>=127552&&n<=127560||n===127568||n===127569||n>=127584&&n<=127589||n>=127744&&n<=127776||n>=127789&&n<=127797||n>=127799&&n<=127868||n>=127870&&n<=127891||n>=127904&&n<=127946||n>=127951&&n<=127955||n>=127968&&n<=127984||n===127988||n>=127992&&n<=128062||n===128064||n>=128066&&n<=128252||n>=128255&&n<=128317||n>=128331&&n<=128334||n>=128336&&n<=128359||n===128378||n===128405||n===128406||n===128420||n>=128507&&n<=128591||n>=128640&&n<=128709||n===128716||n>=128720&&n<=128722||n>=128725&&n<=128727||n>=128732&&n<=128735||n===128747||n===128748||n>=128756&&n<=128764||n>=128992&&n<=129003||n===129008||n>=129292&&n<=129338||n>=129340&&n<=129349||n>=129351&&n<=129535||n>=129648&&n<=129660||n>=129664&&n<=129673||n>=129679&&n<=129734||n>=129742&&n<=129756||n>=129759&&n<=129769||n>=129776&&n<=129784||n>=131072&&n<=196605||n>=196608&&n<=262141}var hs=n=>!(ds(n)||ms(n)),gs=/[^\x20-\x7F]/u;function ps(n){if(!n)return 0;if(!gs.test(n))return n.length;n=n.replace(cs(),"  ");let r=0;for(let i of n){let a=i.codePointAt(0);a<=31||a>=127&&a<=159||a>=768&&a<=879||(r+=hs(a)?1:2)}return r}var er=ps,oe=Symbol("MODE_BREAK"),ge=Symbol("MODE_FLAT"),Qe=Symbol("cursor"),Mn=Symbol("DOC_FILL_PRINTED_LENGTH");function Zo(){return{value:"",length:0,queue:[]}}function fs(n,r){return jn(n,{type:"indent"},r)}function vs(n,r,i){return r===Number.NEGATIVE_INFINITY?n.root||Zo():r<0?jn(n,{type:"dedent"},i):r?r.type==="root"?{...n,root:n}:jn(n,{type:typeof r=="string"?"stringAlign":"numberAlign",n:r},i):n}function jn(n,r,i){let a=r.type==="dedent"?n.queue.slice(0,-1):[...n.queue,r],l="",c=0,h=0,g=0;for(let P of a)switch(P.type){case"indent":D(),i.useTabs?f(1):v(i.tabWidth);break;case"stringAlign":D(),l+=P.n,c+=P.n.length;break;case"numberAlign":h+=1,g+=P.n;break;default:throw new Error(`Unexpected type '${P.type}'`)}return E(),{...n,value:l,length:c,queue:a};function f(P){l+="	".repeat(P),c+=i.tabWidth*P}function v(P){l+=" ".repeat(P),c+=P}function D(){i.useTabs?s():E()}function s(){h>0&&f(h),F()}function E(){g>0&&v(g),F()}function F(){h=0,g=0}}function Rn(n){let r=0,i=0,a=n.length;e:for(;a--;){let l=n[a];if(l===Qe){i++;continue}for(let c=l.length-1;c>=0;c--){let h=l[c];if(h===" "||h==="	")r++;else{n[a]=l.slice(0,c+1);break e}}}if(r>0||i>0)for(n.length=a+1;i-- >0;)n.push(Qe);return r}function zt(n,r,i,a,l,c){if(i===Number.POSITIVE_INFINITY)return!0;let h=r.length,g=[n],f=[];for(;i>=0;){if(g.length===0){if(h===0)return!0;g.push(r[--h]);continue}let{mode:v,doc:D}=g.pop(),s=Ke(D);switch(s){case ze:f.push(D),i-=er(D);break;case Ee:case fe:{let E=s===Ee?D:D.parts,F=D[Mn]??0;for(let P=E.length-1;P>=F;P--)g.push({mode:v,doc:E[P]});break}case be:case we:case Fe:case ve:g.push({mode:v,doc:D.contents});break;case Se:i+=Rn(f);break;case ie:{if(c&&D.break)return!1;let E=D.break?oe:v,F=D.expandedStates&&E===oe?J(!1,D.expandedStates,-1):D.contents;g.push({mode:E,doc:F});break}case ue:{let E=(D.groupId?l[D.groupId]||ge:v)===oe?D.breakContents:D.flatContents;E&&g.push({mode:v,doc:E});break}case Q:if(v===oe||D.hard)return!0;D.soft||(f.push(" "),i--);break;case Ce:a=!0;break;case Pe:if(a)return!1;break}}return!1}function rn(n,r){let i={},a=r.printWidth,l=Zn(r.endOfLine),c=0,h=[{ind:Zo(),mode:oe,doc:n}],g=[],f=!1,v=[],D=0;for(Wa(n);h.length>0;){let{ind:E,mode:F,doc:P}=h.pop();switch(Ke(P)){case ze:{let O=l!==`
`?Xt(!1,P,`
`,l):P;g.push(O),h.length>0&&(c+=er(O));break}case Ee:for(let O=P.length-1;O>=0;O--)h.push({ind:E,mode:F,doc:P[O]});break;case He:if(D>=2)throw new Error("There are too many 'cursor' in doc.");g.push(Qe),D++;break;case be:h.push({ind:fs(E,r),mode:F,doc:P.contents});break;case we:h.push({ind:vs(E,P.n,r),mode:F,doc:P.contents});break;case Se:c-=Rn(g);break;case ie:switch(F){case ge:if(!f){h.push({ind:E,mode:P.break?oe:ge,doc:P.contents});break}case oe:{f=!1;let O={ind:E,mode:ge,doc:P.contents},_=a-c,I=v.length>0;if(!P.break&&zt(O,h,_,I,i))h.push(O);else if(P.expandedStates){let j=J(!1,P.expandedStates,-1);if(P.break){h.push({ind:E,mode:oe,doc:j});break}else for(let L=1;L<P.expandedStates.length+1;L++)if(L>=P.expandedStates.length){h.push({ind:E,mode:oe,doc:j});break}else{let M=P.expandedStates[L],$={ind:E,mode:ge,doc:M};if(zt($,h,_,I,i)){h.push($);break}}}else h.push({ind:E,mode:oe,doc:P.contents});break}}P.id&&(i[P.id]=J(!1,h,-1).mode);break;case fe:{let O=a-c,_=P[Mn]??0,{parts:I}=P,j=I.length-_;if(j===0)break;let L=I[_+0],M=I[_+1],$={ind:E,mode:ge,doc:L},K={ind:E,mode:oe,doc:L},U=zt($,[],O,v.length>0,i,!0);if(j===1){U?h.push($):h.push(K);break}let W={ind:E,mode:ge,doc:M},G={ind:E,mode:oe,doc:M};if(j===2){U?h.push(W,$):h.push(G,K);break}let he=I[_+2],at={ind:E,mode:F,doc:{...P,[Mn]:_+2}};zt({ind:E,mode:ge,doc:[L,M,he]},[],O,v.length>0,i,!0)?h.push(at,W,$):U?h.push(at,G,$):h.push(at,G,K);break}case ue:case Fe:{let O=P.groupId?i[P.groupId]:F;if(O===oe){let _=P.type===ue?P.breakContents:P.negate?P.contents:Jt(P.contents);_&&h.push({ind:E,mode:F,doc:_})}if(O===ge){let _=P.type===ue?P.flatContents:P.negate?Jt(P.contents):P.contents;_&&h.push({ind:E,mode:F,doc:_})}break}case Ce:v.push({ind:E,mode:F,doc:P.contents});break;case Pe:v.length>0&&h.push({ind:E,mode:F,doc:Xn});break;case Q:switch(F){case ge:if(P.hard)f=!0;else{P.soft||(g.push(" "),c+=1);break}case oe:if(v.length>0){h.push({ind:E,mode:F,doc:P},...v.reverse()),v.length=0;break}P.literal?E.root?(g.push(l,E.root.value),c=E.root.length):(g.push(l),c=0):(c-=Rn(g),g.push(l+E.value),c=E.length);break}break;case ve:h.push({ind:E,mode:F,doc:P.contents});break;case ce:break;default:throw new rt(P)}h.length===0&&v.length>0&&(h.push(...v.reverse()),v.length=0)}let s=g.indexOf(Qe);if(s!==-1){let E=g.indexOf(Qe,s+1);if(E===-1)return{formatted:g.filter(_=>_!==Qe).join("")};let F=g.slice(0,s).join(""),P=g.slice(s+1,E).join(""),O=g.slice(E+1).join("");return{formatted:F+P+O,cursorNodeStart:F.length,cursorNodeText:P}}return{formatted:g.join("")}}function ys(n,r,i=0){let a=0;for(let l=i;l<n.length;++l)n[l]==="	"?a=a+r-a%r:a++;return a}var tr=ys,Me,Un,Gt,Ds=class{constructor(n){Sa(this,Me),this.stack=[n]}get key(){let{stack:n,siblings:r}=this;return J(!1,n,r===null?-2:-4)??null}get index(){return this.siblings===null?null:J(!1,this.stack,-2)}get node(){return J(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return this.siblings!==null}get siblings(){let{stack:n}=this,r=J(!1,n,-3);return Array.isArray(r)?r:null}get next(){let{siblings:n}=this;return n===null?null:n[this.index+1]}get previous(){let{siblings:n}=this;return n===null?null:n[this.index-1]}get isFirst(){return this.index===0}get isLast(){let{siblings:n,index:r}=this;return n!==null&&r===n.length-1}get isRoot(){return this.stack.length===1}get root(){return this.stack[0]}get ancestors(){return[...ft(this,Me,Gt).call(this)]}getName(){let{stack:n}=this,{length:r}=n;return r>1?J(!1,n,-2):null}getValue(){return J(!1,this.stack,-1)}getNode(n=0){let r=ft(this,Me,Un).call(this,n);return r===-1?null:this.stack[r]}getParentNode(n=0){return this.getNode(n+1)}call(n,...r){let{stack:i}=this,{length:a}=i,l=J(!1,i,-1);for(let c of r)l=l[c],i.push(c,l);try{return n(this)}finally{i.length=a}}callParent(n,r=0){let i=ft(this,Me,Un).call(this,r+1),a=this.stack.splice(i+1);try{return n(this)}finally{this.stack.push(...a)}}each(n,...r){let{stack:i}=this,{length:a}=i,l=J(!1,i,-1);for(let c of r)l=l[c],i.push(c,l);try{for(let c=0;c<l.length;++c)i.push(c,l[c]),n(this,c,l),i.length-=2}finally{i.length=a}}map(n,...r){let i=[];return this.each((a,l,c)=>{i[l]=n(a,l,c)},...r),i}match(...n){let r=this.stack.length-1,i=null,a=this.stack[r--];for(let l of n){if(a===void 0)return!1;let c=null;if(typeof i=="number"&&(c=i,i=this.stack[r--],a=this.stack[r--]),l&&!l(a,i,c))return!1;i=this.stack[r--],a=this.stack[r--]}return!0}findAncestor(n){for(let r of ft(this,Me,Gt).call(this))if(n(r))return r}hasAncestor(n){for(let r of ft(this,Me,Gt).call(this))if(n(r))return!0;return!1}};Me=new WeakSet,Un=function(n){let{stack:r}=this;for(let i=r.length-1;i>=0;i-=2)if(!Array.isArray(r[i])&&--n<0)return i;return-1},Gt=function*(){let{stack:n}=this;for(let r=n.length-3;r>=0;r-=2){let i=n[r];Array.isArray(i)||(yield i)}};var Es=Ds,Yo=new Proxy(()=>{},{get:()=>Yo}),$n=Yo;function bs(n){return n!==null&&typeof n=="object"}var ws=bs;function*on(n,r){let{getVisitorKeys:i,filter:a=()=>!0}=r,l=c=>ws(c)&&a(c);for(let c of i(n)){let h=n[c];if(Array.isArray(h))for(let g of h)l(g)&&(yield g);else l(h)&&(yield h)}}function*Ss(n,r){let i=[n];for(let a=0;a<i.length;a++){let l=i[a];for(let c of on(l,r))yield c,i.push(c)}}function Fs(n,r){return on(n,r).next().done}function Et(n){return(r,i,a)=>{let l=!!(a!=null&&a.backwards);if(i===!1)return!1;let{length:c}=r,h=i;for(;h>=0&&h<c;){let g=r.charAt(h);if(n instanceof RegExp){if(!n.test(g))return h}else if(!n.includes(g))return h;l?h--:h++}return h===-1||h===c?h:!1}}var Cs=Et(/\s/u),Ae=Et(" 	"),Jo=Et(",; 	"),Qo=Et(/[^\n\r]/u);function Ps(n,r,i){let a=!!(i!=null&&i.backwards);if(r===!1)return!1;let l=n.charAt(r);if(a){if(n.charAt(r-1)==="\r"&&l===`
`)return r-2;if(l===`
`||l==="\r"||l==="\u2028"||l==="\u2029")return r-1}else{if(l==="\r"&&n.charAt(r+1)===`
`)return r+2;if(l===`
`||l==="\r"||l==="\u2028"||l==="\u2029")return r+1}return r}var We=Ps;function ks(n,r,i={}){let a=Ae(n,i.backwards?r-1:r,i),l=We(n,a,i);return a!==l}var Ne=ks;function Os(n){return Array.isArray(n)&&n.length>0}var xs=Os,Xo=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),Bs=n=>Object.keys(n).filter(r=>!Xo.has(r));function Ns(n){return n?r=>n(r,Xo):Bs}var an=Ns;function As(n){let r=n.type||n.kind||"(unknown type)",i=String(n.name||n.id&&(typeof n.id=="object"?n.id.name:n.id)||n.key&&(typeof n.key=="object"?n.key.name:n.key)||n.value&&(typeof n.value=="object"?"":String(n.value))||n.operator||"");return i.length>20&&(i=i.slice(0,19)+"\u2026"),r+(i?" "+i:"")}function nr(n,r){(n.comments??(n.comments=[])).push(r),r.printed=!1,r.nodeDescription=As(n)}function Xe(n,r){r.leading=!0,r.trailing=!1,nr(n,r)}function je(n,r,i){r.leading=!1,r.trailing=!1,i&&(r.marker=i),nr(n,r)}function et(n,r){r.leading=!1,r.trailing=!0,nr(n,r)}var kn=new WeakMap;function rr(n,r){if(kn.has(n))return kn.get(n);let{printer:{getCommentChildNodes:i,canAttachComment:a,getVisitorKeys:l},locStart:c,locEnd:h}=r;if(!a)return[];let g=(i?.(n,r)??[...on(n,{getVisitorKeys:an(l)})]).flatMap(f=>a(f)?[f]:rr(f,r));return g.sort((f,v)=>c(f)-c(v)||h(f)-h(v)),kn.set(n,g),g}function ei(n,r,i,a){let{locStart:l,locEnd:c}=i,h=l(r),g=c(r),f=rr(n,i),v,D,s=0,E=f.length;for(;s<E;){let F=s+E>>1,P=f[F],O=l(P),_=c(P);if(O<=h&&g<=_)return ei(P,r,i,P);if(_<=h){v=P,s=F+1;continue}if(g<=O){D=P,E=F;continue}throw new Error("Comment location overlaps with node location")}if(a?.type==="TemplateLiteral"){let{quasis:F}=a,P=xn(F,r,i);v&&xn(F,v,i)!==P&&(v=null),D&&xn(F,D,i)!==P&&(D=null)}return{enclosingNode:a,precedingNode:v,followingNode:D}}var On=()=>!1;function Ts(n,r){let{comments:i}=n;if(delete n.comments,!xs(i)||!r.printer.canAttachComment)return;let a=[],{locStart:l,locEnd:c,printer:{experimentalFeatures:{avoidAstMutation:h=!1}={},handleComments:g={}},originalText:f}=r,{ownLine:v=On,endOfLine:D=On,remaining:s=On}=g,E=i.map((F,P)=>({...ei(n,F,r),comment:F,text:f,options:r,ast:n,isLastComment:i.length-1===P}));for(let[F,P]of E.entries()){let{comment:O,precedingNode:_,enclosingNode:I,followingNode:j,text:L,options:M,ast:$,isLastComment:K}=P;if(M.parser==="json"||M.parser==="json5"||M.parser==="jsonc"||M.parser==="__js_expression"||M.parser==="__ts_expression"||M.parser==="__vue_expression"||M.parser==="__vue_ts_expression"){if(l(O)-l($)<=0){Xe($,O);continue}if(c(O)-c($)>=0){et($,O);continue}}let U;if(h?U=[P]:(O.enclosingNode=I,O.precedingNode=_,O.followingNode=j,U=[O,L,M,$,K]),_s(L,M,E,F))O.placement="ownLine",v(...U)||(j?Xe(j,O):_?et(_,O):je(I||$,O));else if(Is(L,M,E,F))O.placement="endOfLine",D(...U)||(_?et(_,O):j?Xe(j,O):je(I||$,O));else if(O.placement="remaining",!s(...U))if(_&&j){let W=a.length;W>0&&a[W-1].followingNode!==j&&go(a,M),a.push(P)}else _?et(_,O):j?Xe(j,O):je(I||$,O)}if(go(a,r),!h)for(let F of i)delete F.precedingNode,delete F.enclosingNode,delete F.followingNode}var ti=n=>!/[\S\n\u2028\u2029]/u.test(n);function _s(n,r,i,a){let{comment:l,precedingNode:c}=i[a],{locStart:h,locEnd:g}=r,f=h(l);if(c)for(let v=a-1;v>=0;v--){let{comment:D,precedingNode:s}=i[v];if(s!==c||!ti(n.slice(g(D),f)))break;f=h(D)}return Ne(n,f,{backwards:!0})}function Is(n,r,i,a){let{comment:l,followingNode:c}=i[a],{locStart:h,locEnd:g}=r,f=g(l);if(c)for(let v=a+1;v<i.length;v++){let{comment:D,followingNode:s}=i[v];if(s!==c||!ti(n.slice(f,h(D))))break;f=g(D)}return Ne(n,f)}function go(n,r){var i,a;let l=n.length;if(l===0)return;let{precedingNode:c,followingNode:h}=n[0],g=r.locStart(h),f;for(f=l;f>0;--f){let{comment:v,precedingNode:D,followingNode:s}=n[f-1];$n.strictEqual(D,c),$n.strictEqual(s,h);let E=r.originalText.slice(r.locEnd(v),g);if(((a=(i=r.printer).isGap)==null?void 0:a.call(i,E,r))??/^[\s(]*$/u.test(E))g=r.locStart(v);else break}for(let[v,{comment:D}]of n.entries())v<f?et(c,D):Xe(h,D);for(let v of[c,h])v.comments&&v.comments.length>1&&v.comments.sort((D,s)=>r.locStart(D)-r.locStart(s));n.length=0}function xn(n,r,i){let a=i.locStart(r)-1;for(let l=1;l<n.length;++l)if(a<i.locStart(n[l]))return l-1;return 0}function Ls(n,r){let i=r-1;i=Ae(n,i,{backwards:!0}),i=We(n,i,{backwards:!0}),i=Ae(n,i,{backwards:!0});let a=We(n,i,{backwards:!0});return i!==a}var or=Ls;function ni(n,r){let i=n.node;return i.printed=!0,r.printer.printComment(n,r)}function Vs(n,r){var i;let a=n.node,l=[ni(n,r)],{printer:c,originalText:h,locStart:g,locEnd:f}=r;if((i=c.isBlockComment)!=null&&i.call(c,a)){let D=Ne(h,f(a))?Ne(h,g(a),{backwards:!0})?$e:Ho:" ";l.push(D)}else l.push($e);let v=We(h,Ae(h,f(a)));return v!==!1&&Ne(h,v)&&l.push($e),l}function Ms(n,r,i){var a;let l=n.node,c=ni(n,r),{printer:h,originalText:g,locStart:f}=r,v=(a=h.isBlockComment)==null?void 0:a.call(h,l);if(i!=null&&i.hasLineSuffix&&!(i!=null&&i.isBlock)||Ne(g,f(l),{backwards:!0})){let D=or(g,f(l));return{doc:Vn([$e,D?$e:"",c]),isBlock:v,hasLineSuffix:!0}}return!v||i!=null&&i.hasLineSuffix?{doc:[Vn([" ",c]),nn],isBlock:v,hasLineSuffix:!0}:{doc:[" ",c],isBlock:v,hasLineSuffix:!1}}function js(n,r){let i=n.node;if(!i)return{};let a=r[Symbol.for("printedComments")];if((i.comments||[]).filter(g=>!a.has(g)).length===0)return{leading:"",trailing:""};let l=[],c=[],h;return n.each(()=>{let g=n.node;if(a!=null&&a.has(g))return;let{leading:f,trailing:v}=g;f?l.push(Vs(n,r)):v&&(h=Ms(n,r,h),c.push(h.doc))},"comments"),{leading:l,trailing:c}}function Rs(n,r,i){let{leading:a,trailing:l}=js(n,i);return!a&&!l?r:Kt(r,c=>[a,c,l])}function Us(n){let{[Symbol.for("comments")]:r,[Symbol.for("printedComments")]:i}=n;for(let a of r){if(!a.printed&&!i.has(a))throw new Error('Comment "'+a.value.trim()+'" was not printed. Please report this error!');delete a.printed}}function $s(n){return()=>{}}var Ws=$s,ri=class extends Error{name="ConfigError"},po=class extends Error{name="UndefinedParserError"},zs={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:"Print (to stderr) where a cursor at the given position would move to after formatting.",cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:`Maintain existing
(mixed values within one file are normalised by looking at what's used after the first line)`}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:n=>typeof n=="string"||typeof n=="function",choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"jsonc",description:"JSON with Comments"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:n=>typeof n=="string"||typeof n=="object",cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:`Format code ending at a given character offset (exclusive).
The range will extend forwards to the end of the selected statement.`,cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:`Format code starting at a given character offset.
The range will extend backwards to the start of the first line containing the selected statement.`,cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:`Require either '@prettier' or '@format' to be present in the file's first docblock comment
in order for it to be formatted.`,cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function oi({plugins:n=[],showDeprecated:r=!1}={}){let i=n.flatMap(l=>l.languages??[]),a=[];for(let l of Ks(Object.assign({},...n.map(({options:c})=>c),zs)))!r&&l.deprecated||(Array.isArray(l.choices)&&(r||(l.choices=l.choices.filter(c=>!c.deprecated)),l.name==="parser"&&(l.choices=[...l.choices,...Hs(l.choices,i,n)])),l.pluginDefaults=Object.fromEntries(n.filter(c=>{var h;return((h=c.defaultOptions)==null?void 0:h[l.name])!==void 0}).map(c=>[c.name,c.defaultOptions[l.name]])),a.push(l));return{languages:i,options:a}}function*Hs(n,r,i){let a=new Set(n.map(l=>l.value));for(let l of r)if(l.parsers){for(let c of l.parsers)if(!a.has(c)){a.add(c);let h=i.find(f=>f.parsers&&Object.prototype.hasOwnProperty.call(f.parsers,c)),g=l.name;h!=null&&h.name&&(g+=` (plugin: ${h.name})`),yield{value:c,description:g}}}}function Ks(n){let r=[];for(let[i,a]of Object.entries(n)){let l={name:i,...a};Array.isArray(l.default)&&(l.default=J(!1,l.default,-1).value),r.push(l)}return r}var Gs=n=>String(n).split(/[/\\]/u).pop();function fo(n,r){if(!r)return;let i=Gs(r).toLowerCase();return n.find(({filenames:a})=>a?.some(l=>l.toLowerCase()===i))??n.find(({extensions:a})=>a?.some(l=>i.endsWith(l)))}function qs(n,r){if(r)return n.find(({name:i})=>i.toLowerCase()===r)??n.find(({aliases:i})=>i?.includes(r))??n.find(({extensions:i})=>i?.includes(`.${r}`))}function Zs(n,r){let i=n.plugins.flatMap(l=>l.languages??[]),a=qs(i,r.language)??fo(i,r.physicalFile)??fo(i,r.file)??(r.physicalFile,void 0);return a?.parsers[0]}var Ys=Zs,tt={key:n=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(n)?n:JSON.stringify(n),value(n){if(n===null||typeof n!="object")return JSON.stringify(n);if(Array.isArray(n))return`[${n.map(i=>tt.value(i)).join(", ")}]`;let r=Object.keys(n);return r.length===0?"{}":`{ ${r.map(i=>`${tt.key(i)}: ${tt.value(n[i])}`).join(", ")} }`},pair:({key:n,value:r})=>tt.value({[n]:r})},vo=Qt(Gn(),1),Js=(n,r,{descriptor:i})=>{let a=[`${vo.default.yellow(typeof n=="string"?i.key(n):i.pair(n))} is deprecated`];return r&&a.push(`we now treat it as ${vo.default.blue(typeof r=="string"?i.key(r):i.pair(r))}`),a.join("; ")+"."},nt=Qt(Gn(),1),ii=Symbol.for("vnopts.VALUE_NOT_EXIST"),qt=Symbol.for("vnopts.VALUE_UNCHANGED"),yo=" ".repeat(2),Qs=(n,r,i)=>{let{text:a,list:l}=i.normalizeExpectedResult(i.schemas[n].expected(i)),c=[];return a&&c.push(Do(n,r,a,i.descriptor)),l&&c.push([Do(n,r,l.title,i.descriptor)].concat(l.values.map(h=>ai(h,i.loggerPrintWidth))).join(`
`)),si(c,i.loggerPrintWidth)};function Do(n,r,i,a){return[`Invalid ${nt.default.red(a.key(n))} value.`,`Expected ${nt.default.blue(i)},`,`but received ${r===ii?nt.default.gray("nothing"):nt.default.red(a.value(r))}.`].join(" ")}function ai({text:n,list:r},i){let a=[];return n&&a.push(`- ${nt.default.blue(n)}`),r&&a.push([`- ${nt.default.blue(r.title)}:`].concat(r.values.map(l=>ai(l,i-yo.length).replace(/^|\n/g,`$&${yo}`))).join(`
`)),si(a,i)}function si(n,r){if(n.length===1)return n[0];let[i,a]=n,[l,c]=n.map(h=>h.split(`
`,1)[0].length);return l>r&&l>c?a:i}var Eo=Qt(Gn(),1),Bn=[],bo=[];function Xs(n,r){if(n===r)return 0;let i=n;n.length>r.length&&(n=r,r=i);let a=n.length,l=r.length;for(;a>0&&n.charCodeAt(~-a)===r.charCodeAt(~-l);)a--,l--;let c=0;for(;c<a&&n.charCodeAt(c)===r.charCodeAt(c);)c++;if(a-=c,l-=c,a===0)return l;let h,g,f,v,D=0,s=0;for(;D<a;)bo[D]=n.charCodeAt(c+D),Bn[D]=++D;for(;s<l;)for(h=r.charCodeAt(c+s),f=s++,g=s,D=0;D<a;D++)v=h===bo[D]?f:f+1,f=Bn[D],g=Bn[D]=f>g?v>g?g+1:v:v>f?f+1:v;return g}var ui=(n,r,{descriptor:i,logger:a,schemas:l})=>{let c=[`Ignored unknown option ${Eo.default.yellow(i.pair({key:n,value:r}))}.`],h=Object.keys(l).sort().find(g=>Xs(n,g)<3);h&&c.push(`Did you mean ${Eo.default.blue(i.key(h))}?`),a.warn(c.join(" "))},eu=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];function tu(n,r){let i=new n(r),a=Object.create(i);for(let l of eu)l in r&&(a[l]=nu(r[l],i,Te.prototype[l].length));return a}var Te=class{static create(n){return tu(this,n)}constructor(n){this.name=n.name}default(n){}expected(n){return"nothing"}validate(n,r){return!1}deprecated(n,r){return!1}forward(n,r){}redirect(n,r){}overlap(n,r,i){return n}preprocess(n,r){return n}postprocess(n,r){return qt}};function nu(n,r,i){return typeof n=="function"?(...a)=>n(...a.slice(0,i-1),r,...a.slice(i-1)):()=>n}var ru=class extends Te{constructor(n){super(n),this._sourceName=n.sourceName}expected(n){return n.schemas[this._sourceName].expected(n)}validate(n,r){return r.schemas[this._sourceName].validate(n,r)}redirect(n,r){return this._sourceName}},ou=class extends Te{expected(){return"anything"}validate(){return!0}},iu=class extends Te{constructor({valueSchema:n,name:r=n.name,...i}){super({...i,name:r}),this._valueSchema=n}expected(n){let{text:r,list:i}=n.normalizeExpectedResult(this._valueSchema.expected(n));return{text:r&&`an array of ${r}`,list:i&&{title:"an array of the following values",values:[{list:i}]}}}validate(n,r){if(!Array.isArray(n))return!1;let i=[];for(let a of n){let l=r.normalizeValidateResult(this._valueSchema.validate(a,r),a);l!==!0&&i.push(l.value)}return i.length===0?!0:{value:i}}deprecated(n,r){let i=[];for(let a of n){let l=r.normalizeDeprecatedResult(this._valueSchema.deprecated(a,r),a);l!==!1&&i.push(...l.map(({value:c})=>({value:[c]})))}return i}forward(n,r){let i=[];for(let a of n){let l=r.normalizeForwardResult(this._valueSchema.forward(a,r),a);i.push(...l.map(wo))}return i}redirect(n,r){let i=[],a=[];for(let l of n){let c=r.normalizeRedirectResult(this._valueSchema.redirect(l,r),l);"remain"in c&&i.push(c.remain),a.push(...c.redirect.map(wo))}return i.length===0?{redirect:a}:{redirect:a,remain:i}}overlap(n,r){return n.concat(r)}};function wo({from:n,to:r}){return{from:[n],to:r}}var au=class extends Te{expected(){return"true or false"}validate(n){return typeof n=="boolean"}};function su(n,r){let i=Object.create(null);for(let a of n){let l=a[r];if(i[l])throw new Error(`Duplicate ${r} ${JSON.stringify(l)}`);i[l]=a}return i}function uu(n,r){let i=new Map;for(let a of n){let l=a[r];if(i.has(l))throw new Error(`Duplicate ${r} ${JSON.stringify(l)}`);i.set(l,a)}return i}function lu(){let n=Object.create(null);return r=>{let i=JSON.stringify(r);return n[i]?!0:(n[i]=!0,!1)}}function cu(n,r){let i=[],a=[];for(let l of n)r(l)?i.push(l):a.push(l);return[i,a]}function du(n){return n===Math.floor(n)}function mu(n,r){if(n===r)return 0;let i=typeof n,a=typeof r,l=["undefined","object","boolean","number","string"];return i!==a?l.indexOf(i)-l.indexOf(a):i!=="string"?Number(n)-Number(r):n.localeCompare(r)}function hu(n){return(...r)=>{let i=n(...r);return typeof i=="string"?new Error(i):i}}function So(n){return n===void 0?{}:n}function li(n){if(typeof n=="string")return{text:n};let{text:r,list:i}=n;return gu((r||i)!==void 0,"Unexpected `expected` result, there should be at least one field."),i?{text:r,list:{title:i.title,values:i.values.map(li)}}:{text:r}}function Fo(n,r){return n===!0?!0:n===!1?{value:r}:n}function Co(n,r,i=!1){return n===!1?!1:n===!0?i?!0:[{value:r}]:"value"in n?[n]:n.length===0?!1:n}function Po(n,r){return typeof n=="string"||"key"in n?{from:r,to:n}:"from"in n?{from:n.from,to:n.to}:{from:r,to:n.to}}function Wn(n,r){return n===void 0?[]:Array.isArray(n)?n.map(i=>Po(i,r)):[Po(n,r)]}function ko(n,r){let i=Wn(typeof n=="object"&&"redirect"in n?n.redirect:n,r);return i.length===0?{remain:r,redirect:i}:typeof n=="object"&&"remain"in n?{remain:n.remain,redirect:i}:{redirect:i}}function gu(n,r){if(!n)throw new Error(r)}var pu=class extends Te{constructor(n){super(n),this._choices=uu(n.choices.map(r=>r&&typeof r=="object"?r:{value:r}),"value")}expected({descriptor:n}){let r=Array.from(this._choices.keys()).map(l=>this._choices.get(l)).filter(({hidden:l})=>!l).map(l=>l.value).sort(mu).map(n.value),i=r.slice(0,-2),a=r.slice(-2);return{text:i.concat(a.join(" or ")).join(", "),list:{title:"one of the following values",values:r}}}validate(n){return this._choices.has(n)}deprecated(n){let r=this._choices.get(n);return r&&r.deprecated?{value:n}:!1}forward(n){let r=this._choices.get(n);return r?r.forward:void 0}redirect(n){let r=this._choices.get(n);return r?r.redirect:void 0}},fu=class extends Te{expected(){return"a number"}validate(n,r){return typeof n=="number"}},vu=class extends fu{expected(){return"an integer"}validate(n,r){return r.normalizeValidateResult(super.validate(n,r),n)===!0&&du(n)}},Oo=class extends Te{expected(){return"a string"}validate(n){return typeof n=="string"}},yu=tt,Du=ui,Eu=Qs,bu=Js,wu=class{constructor(n,r){let{logger:i=console,loggerPrintWidth:a=80,descriptor:l=yu,unknown:c=Du,invalid:h=Eu,deprecated:g=bu,missing:f=()=>!1,required:v=()=>!1,preprocess:D=E=>E,postprocess:s=()=>qt}=r||{};this._utils={descriptor:l,logger:i||{warn:()=>{}},loggerPrintWidth:a,schemas:su(n,"name"),normalizeDefaultResult:So,normalizeExpectedResult:li,normalizeDeprecatedResult:Co,normalizeForwardResult:Wn,normalizeRedirectResult:ko,normalizeValidateResult:Fo},this._unknownHandler=c,this._invalidHandler=hu(h),this._deprecatedHandler=g,this._identifyMissing=(E,F)=>!(E in F)||f(E,F),this._identifyRequired=v,this._preprocess=D,this._postprocess=s,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=lu()}normalize(n){let r={},i=[this._preprocess(n,this._utils)],a=()=>{for(;i.length!==0;){let l=i.shift(),c=this._applyNormalization(l,r);i.push(...c)}};a();for(let l of Object.keys(this._utils.schemas)){let c=this._utils.schemas[l];if(!(l in r)){let h=So(c.default(this._utils));"value"in h&&i.push({[l]:h.value})}}a();for(let l of Object.keys(this._utils.schemas)){if(!(l in r))continue;let c=this._utils.schemas[l],h=r[l],g=c.postprocess(h,this._utils);g!==qt&&(this._applyValidation(g,l,c),r[l]=g)}return this._applyPostprocess(r),this._applyRequiredCheck(r),r}_applyNormalization(n,r){let i=[],{knownKeys:a,unknownKeys:l}=this._partitionOptionKeys(n);for(let c of a){let h=this._utils.schemas[c],g=h.preprocess(n[c],this._utils);this._applyValidation(g,c,h);let f=({from:s,to:E})=>{i.push(typeof E=="string"?{[E]:s}:{[E.key]:E.value})},v=({value:s,redirectTo:E})=>{let F=Co(h.deprecated(s,this._utils),g,!0);if(F!==!1)if(F===!0)this._hasDeprecationWarned(c)||this._utils.logger.warn(this._deprecatedHandler(c,E,this._utils));else for(let{value:P}of F){let O={key:c,value:P};if(!this._hasDeprecationWarned(O)){let _=typeof E=="string"?{key:E,value:P}:E;this._utils.logger.warn(this._deprecatedHandler(O,_,this._utils))}}};Wn(h.forward(g,this._utils),g).forEach(f);let D=ko(h.redirect(g,this._utils),g);if(D.redirect.forEach(f),"remain"in D){let s=D.remain;r[c]=c in r?h.overlap(r[c],s,this._utils):s,v({value:s})}for(let{from:s,to:E}of D.redirect)v({value:s,redirectTo:E})}for(let c of l){let h=n[c];this._applyUnknownHandler(c,h,r,(g,f)=>{i.push({[g]:f})})}return i}_applyRequiredCheck(n){for(let r of Object.keys(this._utils.schemas))if(this._identifyMissing(r,n)&&this._identifyRequired(r))throw this._invalidHandler(r,ii,this._utils)}_partitionOptionKeys(n){let[r,i]=cu(Object.keys(n).filter(a=>!this._identifyMissing(a,n)),a=>a in this._utils.schemas);return{knownKeys:r,unknownKeys:i}}_applyValidation(n,r,i){let a=Fo(i.validate(n,this._utils),n);if(a!==!0)throw this._invalidHandler(r,a.value,this._utils)}_applyUnknownHandler(n,r,i,a){let l=this._unknownHandler(n,r,this._utils);if(l)for(let c of Object.keys(l)){if(this._identifyMissing(c,l))continue;let h=l[c];c in this._utils.schemas?a(c,h):i[c]=h}}_applyPostprocess(n){let r=this._postprocess(n,this._utils);if(r!==qt){if(r.delete)for(let i of r.delete)delete n[i];if(r.override){let{knownKeys:i,unknownKeys:a}=this._partitionOptionKeys(r.override);for(let l of i){let c=r.override[l];this._applyValidation(c,l,this._utils.schemas[l]),n[l]=c}for(let l of a){let c=r.override[l];this._applyUnknownHandler(l,c,n,(h,g)=>{let f=this._utils.schemas[h];this._applyValidation(g,h,f),n[h]=g})}}}}},Nn;function Su(n,r,{logger:i=!1,isCLI:a=!1,passThrough:l=!1,FlagSchema:c,descriptor:h}={}){if(a){if(!c)throw new Error("'FlagSchema' option is required.");if(!h)throw new Error("'descriptor' option is required.")}else h=tt;let g=l?Array.isArray(l)?(E,F)=>l.includes(E)?{[E]:F}:void 0:(E,F)=>({[E]:F}):(E,F,P)=>{let{_:O,..._}=P.schemas;return ui(E,F,{...P,schemas:_})},f=Fu(r,{isCLI:a,FlagSchema:c}),v=new wu(f,{logger:i,unknown:g,descriptor:h}),D=i!==!1;D&&Nn&&(v._hasDeprecationWarned=Nn);let s=v.normalize(n);return D&&(Nn=v._hasDeprecationWarned),s}function Fu(n,{isCLI:r,FlagSchema:i}){let a=[];r&&a.push(ou.create({name:"_"}));for(let l of n)a.push(Cu(l,{isCLI:r,optionInfos:n,FlagSchema:i})),l.alias&&r&&a.push(ru.create({name:l.alias,sourceName:l.name}));return a}function Cu(n,{isCLI:r,optionInfos:i,FlagSchema:a}){let{name:l}=n,c={name:l},h,g={};switch(n.type){case"int":h=vu,r&&(c.preprocess=Number);break;case"string":h=Oo;break;case"choice":h=pu,c.choices=n.choices.map(f=>f!=null&&f.redirect?{...f,redirect:{to:{key:n.name,value:f.redirect}}}:f);break;case"boolean":h=au;break;case"flag":h=a,c.flags=i.flatMap(f=>[f.alias,f.description&&f.name,f.oppositeDescription&&`no-${f.name}`].filter(Boolean));break;case"path":h=Oo;break;default:throw new Error(`Unexpected type ${n.type}`)}if(n.exception?c.validate=(f,v,D)=>n.exception(f)||v.validate(f,D):c.validate=(f,v,D)=>f===void 0||v.validate(f,D),n.redirect&&(g.redirect=f=>f?{to:typeof n.redirect=="string"?n.redirect:{key:n.redirect.option,value:n.redirect.value}}:void 0),n.deprecated&&(g.deprecated=!0),r&&!n.array){let f=c.preprocess||(v=>v);c.preprocess=(v,D,s)=>D.preprocess(f(Array.isArray(v)?J(!1,v,-1):v),s)}return n.array?iu.create({...r?{preprocess:f=>Array.isArray(f)?f:[f]}:{},...g,valueSchema:h.create(c)}):h.create({...c,...g})}var Pu=Su,ku=(n,r,i)=>{if(!(n&&r==null)){if(r.findLast)return r.findLast(i);for(let a=r.length-1;a>=0;a--){let l=r[a];if(i(l,a,r))return l}}},ci=ku;function di(n,r){if(!r)throw new Error("parserName is required.");let i=ci(!1,n,l=>l.parsers&&Object.prototype.hasOwnProperty.call(l.parsers,r));if(i)return i;let a=`Couldn't resolve parser "${r}".`;throw a+=" Plugins must be explicitly added to the standalone bundle.",new ri(a)}function Ou(n,r){if(!r)throw new Error("astFormat is required.");let i=ci(!1,n,l=>l.printers&&Object.prototype.hasOwnProperty.call(l.printers,r));if(i)return i;let a=`Couldn't find plugin for AST format "${r}".`;throw a+=" Plugins must be explicitly added to the standalone bundle.",new ri(a)}function mi({plugins:n,parser:r}){let i=di(n,r);return hi(i,r)}function hi(n,r){let i=n.parsers[r];return typeof i=="function"?i():i}function xu(n,r){let i=n.printers[r];return typeof i=="function"?i():i}var xo={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};async function Bu(n,r={}){var i;let a={...n};if(!a.parser)if(a.filepath){if(a.parser=Ys(a,{physicalFile:a.filepath}),!a.parser)throw new po(`No parser could be inferred for file "${a.filepath}".`)}else throw new po("No parser and no file path given, couldn't infer a parser.");let l=oi({plugins:n.plugins,showDeprecated:!0}).options,c={...xo,...Object.fromEntries(l.filter(E=>E.default!==void 0).map(E=>[E.name,E.default]))},h=di(a.plugins,a.parser),g=await hi(h,a.parser);a.astFormat=g.astFormat,a.locEnd=g.locEnd,a.locStart=g.locStart;let f=(i=h.printers)!=null&&i[g.astFormat]?h:Ou(a.plugins,g.astFormat),v=await xu(f,g.astFormat);a.printer=v;let D=f.defaultOptions?Object.fromEntries(Object.entries(f.defaultOptions).filter(([,E])=>E!==void 0)):{},s={...c,...D};for(let[E,F]of Object.entries(s))(a[E]===null||a[E]===void 0)&&(a[E]=F);return a.parser==="json"&&(a.trailingComma="none"),Pu(a,l,{passThrough:Object.keys(xo),...r})}var it=Bu,Nu=Qt(Fa(),1);async function Au(n,r){let i=await mi(r),a=i.preprocess?i.preprocess(n,r):n;r.originalText=a;let l;try{l=await i.parse(a,r,r)}catch(c){Tu(c,n)}return{text:a,ast:l}}function Tu(n,r){let{loc:i}=n;if(i){let a=(0,Nu.codeFrameColumns)(r,i,{highlightCode:!0});throw n.message+=`
`+a,n.codeFrame=a,n}throw n}var bt=Au;async function _u(n,r,i,a,l){let{embeddedLanguageFormatting:c,printer:{embed:h,hasPrettierIgnore:g=()=>!1,getVisitorKeys:f}}=i;if(!h||c!=="auto")return;if(h.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/plugins#optional-embed");let v=an(h.getVisitorKeys??f),D=[];F();let s=n.stack;for(let{print:P,node:O,pathStack:_}of D)try{n.stack=_;let I=await P(E,r,n,i);I&&l.set(O,I)}catch(I){if(globalThis.PRETTIER_DEBUG)throw I}n.stack=s;function E(P,O){return Iu(P,O,i,a)}function F(){let{node:P}=n;if(P===null||typeof P!="object"||g(n))return;for(let _ of v(P))Array.isArray(P[_])?n.each(F,_):n.call(F,_);let O=h(n,i);if(O){if(typeof O=="function"){D.push({print:O,node:P,pathStack:[...n.stack]});return}l.set(P,O)}}}async function Iu(n,r,i,a){let l=await it({...i,...r,parentParser:i.parser,originalText:n},{passThrough:!0}),{ast:c}=await bt(n,l),h=await a(c,l);return Uo(h)}function Lu(n,r){let{originalText:i,[Symbol.for("comments")]:a,locStart:l,locEnd:c,[Symbol.for("printedComments")]:h}=r,{node:g}=n,f=l(g),v=c(g);for(let D of a)l(D)>=f&&c(D)<=v&&h.add(D);return i.slice(f,v)}var Vu=Lu;async function sn(n,r){({ast:n}=await gi(n,r));let i=new Map,a=new Es(n),l=Ws(r),c=new Map;await _u(a,g,r,sn,c);let h=await Bo(a,r,g,void 0,c);if(Us(r),r.nodeAfterCursor&&!r.nodeBeforeCursor)return[Ue,h];if(r.nodeBeforeCursor&&!r.nodeAfterCursor)return[h,Ue];return h;function g(v,D){return v===void 0||v===a?f(D):Array.isArray(v)?a.call(()=>f(D),...v):a.call(()=>f(D),v)}function f(v){l(a);let D=a.node;if(D==null)return"";let s=D&&typeof D=="object"&&v===void 0;if(s&&i.has(D))return i.get(D);let E=Bo(a,r,g,v,c);return s&&i.set(D,E),E}}function Bo(n,r,i,a,l){var c;let{node:h}=n,{printer:g}=r,f;switch((c=g.hasPrettierIgnore)!=null&&c.call(g,n)?f=Vu(n,r):l.has(h)?f=l.get(h):f=g.print(n,r,i,a),h){case r.cursorNode:f=Kt(f,v=>[Ue,v,Ue]);break;case r.nodeBeforeCursor:f=Kt(f,v=>[v,Ue]);break;case r.nodeAfterCursor:f=Kt(f,v=>[Ue,v]);break}return g.printComment&&(!g.willPrintOwnComments||!g.willPrintOwnComments(n,r))&&(f=Rs(n,f,r)),f}async function gi(n,r){let i=n.comments??[];r[Symbol.for("comments")]=i,r[Symbol.for("tokens")]=n.tokens??[],r[Symbol.for("printedComments")]=new Set,Ts(n,r);let{printer:{preprocess:a}}=r;return n=a?await a(n,r):n,{ast:n,comments:i}}function Mu(n,r){let{cursorOffset:i,locStart:a,locEnd:l}=r,c=an(r.printer.getVisitorKeys),h=F=>a(F)<=i&&l(F)>=i,g=n,f=[n];for(let F of Ss(n,{getVisitorKeys:c,filter:h}))f.push(F),g=F;if(Fs(g,{getVisitorKeys:c}))return{cursorNode:g};let v,D,s=-1,E=Number.POSITIVE_INFINITY;for(;f.length>0&&(v===void 0||D===void 0);){g=f.pop();let F=v!==void 0,P=D!==void 0;for(let O of on(g,{getVisitorKeys:c})){if(!F){let _=l(O);_<=i&&_>s&&(v=O,s=_)}if(!P){let _=a(O);_>=i&&_<E&&(D=O,E=_)}}}return{nodeBeforeCursor:v,nodeAfterCursor:D}}var ju=Mu;function Ru(n,r){let{printer:{massageAstNode:i,getVisitorKeys:a}}=r;if(!i)return n;let l=an(a),c=i.ignoredProperties??new Set;return h(n);function h(g,f){if(!(g!==null&&typeof g=="object"))return g;if(Array.isArray(g))return g.map(E=>h(E,f)).filter(Boolean);let v={},D=new Set(l(g));for(let E in g)!Object.prototype.hasOwnProperty.call(g,E)||c.has(E)||(D.has(E)?v[E]=h(g[E],g):v[E]=g[E]);let s=i(g,v,f);if(s!==null)return s??v}}var Uu=Ru,$u=(n,r,i)=>{if(!(n&&r==null)){if(r.findLastIndex)return r.findLastIndex(i);for(let a=r.length-1;a>=0;a--){let l=r[a];if(i(l,a,r))return a}return-1}},Wu=$u,zu=({parser:n})=>n==="json"||n==="json5"||n==="jsonc"||n==="json-stringify";function Hu(n,r){let i=[n.node,...n.parentNodes],a=new Set([r.node,...r.parentNodes]);return i.find(l=>pi.has(l.type)&&a.has(l))}function No(n){let r=Wu(!1,n,i=>i.type!=="Program"&&i.type!=="File");return r===-1?n:n.slice(0,r+1)}function Ku(n,r,{locStart:i,locEnd:a}){let l=n.node,c=r.node;if(l===c)return{startNode:l,endNode:c};let h=i(n.node);for(let f of No(r.parentNodes))if(i(f)>=h)c=f;else break;let g=a(r.node);for(let f of No(n.parentNodes)){if(a(f)<=g)l=f;else break;if(l===c)break}return{startNode:l,endNode:c}}function zn(n,r,i,a,l=[],c){let{locStart:h,locEnd:g}=i,f=h(n),v=g(n);if(!(r>v||r<f||c==="rangeEnd"&&r===f||c==="rangeStart"&&r===v)){for(let D of rr(n,i)){let s=zn(D,r,i,a,[n,...l],c);if(s)return s}if(!a||a(n,l[0]))return{node:n,parentNodes:l}}}function Gu(n,r){return r!=="DeclareExportDeclaration"&&n!=="TypeParameterDeclaration"&&(n==="Directive"||n==="TypeAlias"||n==="TSExportAssignment"||n.startsWith("Declare")||n.startsWith("TSDeclare")||n.endsWith("Statement")||n.endsWith("Declaration"))}var pi=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),qu=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function Ao(n,r,i){if(!r)return!1;switch(n.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return Gu(r.type,i?.type);case"json":case"json5":case"jsonc":case"json-stringify":return pi.has(r.type);case"graphql":return qu.has(r.kind);case"vue":return r.tag!=="root"}return!1}function Zu(n,r,i){let{rangeStart:a,rangeEnd:l,locStart:c,locEnd:h}=r;$n.ok(l>a);let g=n.slice(a,l).search(/\S/u),f=g===-1;if(!f)for(a+=g;l>a&&!/\S/u.test(n[l-1]);--l);let v=zn(i,a,r,(F,P)=>Ao(r,F,P),[],"rangeStart"),D=f?v:zn(i,l,r,F=>Ao(r,F),[],"rangeEnd");if(!v||!D)return{rangeStart:0,rangeEnd:0};let s,E;if(zu(r)){let F=Hu(v,D);s=F,E=F}else({startNode:s,endNode:E}=Ku(v,D,r));return{rangeStart:Math.min(c(s),c(E)),rangeEnd:Math.max(h(s),h(E))}}var fi="\uFEFF",To=Symbol("cursor");async function vi(n,r,i=0){if(!n||n.trim().length===0)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:a,text:l}=await bt(n,r);r.cursorOffset>=0&&(r={...r,...ju(a,r)});let c=await sn(a,r,i);i>0&&(c=qo([$e,c],i,r.tabWidth));let h=rn(c,r);if(i>0){let f=h.formatted.trim();h.cursorNodeStart!==void 0&&(h.cursorNodeStart-=h.formatted.indexOf(f),h.cursorNodeStart<0&&(h.cursorNodeStart=0,h.cursorNodeText=h.cursorNodeText.trimStart()),h.cursorNodeStart+h.cursorNodeText.length>f.length&&(h.cursorNodeText=h.cursorNodeText.trimEnd())),h.formatted=f+Zn(r.endOfLine)}let g=r[Symbol.for("comments")];if(r.cursorOffset>=0){let f,v,D,s;if((r.cursorNode||r.nodeBeforeCursor||r.nodeAfterCursor)&&h.cursorNodeText)if(D=h.cursorNodeStart,s=h.cursorNodeText,r.cursorNode)f=r.locStart(r.cursorNode),v=l.slice(f,r.locEnd(r.cursorNode));else{if(!r.nodeBeforeCursor&&!r.nodeAfterCursor)throw new Error("Cursor location must contain at least one of cursorNode, nodeBeforeCursor, nodeAfterCursor");f=r.nodeBeforeCursor?r.locEnd(r.nodeBeforeCursor):0;let I=r.nodeAfterCursor?r.locStart(r.nodeAfterCursor):l.length;v=l.slice(f,I)}else f=0,v=l,D=0,s=h.formatted;let E=r.cursorOffset-f;if(v===s)return{formatted:h.formatted,cursorOffset:D+E,comments:g};let F=v.split("");F.splice(E,0,To);let P=s.split(""),O=Aa(F,P),_=D;for(let I of O)if(I.removed){if(I.value.includes(To))break}else _+=I.count;return{formatted:h.formatted,cursorOffset:_,comments:g}}return{formatted:h.formatted,cursorOffset:-1,comments:g}}async function Yu(n,r){let{ast:i,text:a}=await bt(n,r),{rangeStart:l,rangeEnd:c}=Zu(a,r,i),h=a.slice(l,c),g=Math.min(l,a.lastIndexOf(`
`,l)+1),f=a.slice(g,l).match(/^\s*/u)[0],v=tr(f,r.tabWidth),D=await vi(h,{...r,rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:r.cursorOffset>l&&r.cursorOffset<=c?r.cursorOffset-l:-1,endOfLine:"lf"},v),s=D.formatted.trimEnd(),{cursorOffset:E}=r;E>c?E+=s.length-h.length:D.cursorOffset>=0&&(E=D.cursorOffset+l);let F=a.slice(0,l)+s+a.slice(c);if(r.endOfLine!=="lf"){let P=Zn(r.endOfLine);E>=0&&P===`\r
`&&(E+=jo(F.slice(0,E),`
`)),F=Xt(!1,F,`
`,P)}return{formatted:F,cursorOffset:E,comments:D.comments}}function An(n,r,i){return typeof r!="number"||Number.isNaN(r)||r<0||r>n.length?i:r}function _o(n,r){let{cursorOffset:i,rangeStart:a,rangeEnd:l}=r;return i=An(n,i,-1),a=An(n,a,0),l=An(n,l,n.length),{...r,cursorOffset:i,rangeStart:a,rangeEnd:l}}function yi(n,r){let{cursorOffset:i,rangeStart:a,rangeEnd:l,endOfLine:c}=_o(n,r),h=n.charAt(0)===fi;if(h&&(n=n.slice(1),i--,a--,l--),c==="auto"&&(c=Ta(n)),n.includes("\r")){let g=f=>jo(n.slice(0,Math.max(f,0)),`\r
`);i-=g(i),a-=g(a),l-=g(l),n=_a(n)}return{hasBOM:h,text:n,options:_o(n,{...r,cursorOffset:i,rangeStart:a,rangeEnd:l,endOfLine:c})}}async function Io(n,r){let i=await mi(r);return!i.hasPragma||i.hasPragma(n)}async function Di(n,r){let{hasBOM:i,text:a,options:l}=yi(n,await it(r));if(l.rangeStart>=l.rangeEnd&&a!==""||l.requirePragma&&!await Io(a,l))return{formatted:n,cursorOffset:r.cursorOffset,comments:[]};let c;return l.rangeStart>0||l.rangeEnd<a.length?c=await Yu(a,l):(!l.requirePragma&&l.insertPragma&&l.printer.insertPragma&&!await Io(a,l)&&(a=l.printer.insertPragma(a)),c=await vi(a,l)),i&&(c.formatted=fi+c.formatted,c.cursorOffset>=0&&c.cursorOffset++),c}async function Ju(n,r,i){let{text:a,options:l}=yi(n,await it(r)),c=await bt(a,l);return i&&(i.preprocessForPrint&&(c.ast=await gi(c.ast,l)),i.massage&&(c.ast=Uu(c.ast,l))),c}async function Qu(n,r){r=await it(r);let i=await sn(n,r);return rn(i,r)}async function Xu(n,r){let i=ls(n),{formatted:a}=await Di(i,{...r,parser:"__js_expression"});return a}async function el(n,r){r=await it(r);let{ast:i}=await bt(n,r);return sn(i,r)}async function tl(n,r){return rn(n,await it(r))}var Ei={};Kn(Ei,{builders:()=>nl,printer:()=>rl,utils:()=>ol});var nl={join:Go,line:Ho,softline:ss,hardline:$e,literalline:Ko,group:Wo,conditionalGroup:ts,fill:ns,lineSuffix:Vn,lineSuffixBoundary:is,cursor:Ue,breakParent:nn,ifBreak:rs,trim:as,indent:Jt,indentIfBreak:os,align:ot,addAlignmentToDoc:qo,markAsRoot:Xa,dedentToRoot:Qa,dedent:es,hardlineWithoutBreakParent:Xn,literallineWithoutBreakParent:zo,label:us,concat:n=>n},rl={printDocToString:rn},ol={willBreak:$a,traverseDoc:Yn,findInDoc:Jn,mapDoc:tn,removeLines:Ha,stripTrailingHardline:Uo,replaceEndOfLine:qa,canBreak:Ya},il="3.5.3",bi={};Kn(bi,{addDanglingComment:()=>je,addLeadingComment:()=>Xe,addTrailingComment:()=>et,getAlignmentSize:()=>tr,getIndentSize:()=>dl,getMaxContinuousCount:()=>gl,getNextNonSpaceNonCommentCharacter:()=>fl,getNextNonSpaceNonCommentCharacterIndex:()=>Pl,getPreferredQuote:()=>yl,getStringWidth:()=>er,hasNewline:()=>Ne,hasNewlineInRange:()=>El,hasSpaces:()=>wl,isNextLineEmpty:()=>Bl,isNextLineEmptyAfterIndex:()=>ur,isPreviousLineEmpty:()=>Ol,makeString:()=>Fl,skip:()=>Et,skipEverythingButNewLine:()=>Qo,skipInlineComment:()=>ir,skipNewline:()=>We,skipSpaces:()=>Ae,skipToLineEnd:()=>Jo,skipTrailingComment:()=>ar,skipWhitespace:()=>Cs});function al(n,r){if(r===!1)return!1;if(n.charAt(r)==="/"&&n.charAt(r+1)==="*"){for(let i=r+2;i<n.length;++i)if(n.charAt(i)==="*"&&n.charAt(i+1)==="/")return i+2}return r}var ir=al;function sl(n,r){return r===!1?!1:n.charAt(r)==="/"&&n.charAt(r+1)==="/"?Qo(n,r):r}var ar=sl;function ul(n,r){let i=null,a=r;for(;a!==i;)i=a,a=Ae(n,a),a=ir(n,a),a=ar(n,a),a=We(n,a);return a}var sr=ul;function ll(n,r){let i=null,a=r;for(;a!==i;)i=a,a=Jo(n,a),a=ir(n,a),a=Ae(n,a);return a=ar(n,a),a=We(n,a),a!==!1&&Ne(n,a)}var ur=ll;function cl(n,r){let i=n.lastIndexOf(`
`);return i===-1?0:tr(n.slice(i+1).match(/^[\t ]*/u)[0],r)}var dl=cl;function ml(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function hl(n,r){let i=n.match(new RegExp(`(${ml(r)})+`,"gu"));return i===null?0:i.reduce((a,l)=>Math.max(a,l.length/r.length),0)}var gl=hl;function pl(n,r){let i=sr(n,r);return i===!1?"":n.charAt(i)}var fl=pl,Ht="'",Lo='"';function vl(n,r){let i=r===!0||r===Ht?Ht:Lo,a=i===Ht?Lo:Ht,l=0,c=0;for(let h of n)h===i?l++:h===a&&c++;return l>c?a:i}var yl=vl;function Dl(n,r,i){for(let a=r;a<i;++a)if(n.charAt(a)===`
`)return!0;return!1}var El=Dl;function bl(n,r,i={}){return Ae(n,i.backwards?r-1:r,i)!==r}var wl=bl;function Sl(n,r,i){let a=r==='"'?"'":'"',l=Xt(!1,n,/\\(.)|(["'])/gsu,(c,h,g)=>h===a?h:g===r?"\\"+g:g||(i&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/u.test(h)?h:"\\"+h));return r+l+r}var Fl=Sl;function Cl(n,r,i){return sr(n,i(r))}function Pl(n,r){return arguments.length===2||typeof r=="number"?sr(n,r):Cl(...arguments)}function kl(n,r,i){return or(n,i(r))}function Ol(n,r){return arguments.length===2||typeof r=="number"?or(n,r):kl(...arguments)}function xl(n,r,i){return ur(n,i(r))}function Bl(n,r){return arguments.length===2||typeof r=="number"?ur(n,r):xl(...arguments)}function Re(n,r=1){return async(...i)=>{let a=i[r]??{},l=a.plugins??[];return i[r]={...a,plugins:Array.isArray(l)?l:Object.values(l)},n(...i)}}var wi=Re(Di);async function Si(n,r){let{formatted:i}=await wi(n,{...r,cursorOffset:-1});return i}async function Nl(n,r){return await Si(n,r)===n}var Al=Re(oi,0),Tl={parse:Re(Ju),formatAST:Re(Qu),formatDoc:Re(Xu),printToDoc:Re(el),printDocToString:Re(tl)};var un;var _l=async()=>{let n=document.getElementById("milestoneList").value,r=document.getElementById("fromYear").value,i=parseInt(document.getElementById("fromMonth").value)+1,a=document.getElementById("toYear").value,l=parseInt(document.getElementById("toMonth").value)+1;try{let c=await fetch(`/api/v1/timesheet/${n}/${r}/${i}/${a}/${l}`),h=await c.json();if(!c.ok){console.error("Failed to fetch milestone hours report:",h.message);return}let{deliverable:g,consultants:f,totalHours:v}=h.data;Ll(g,r,i,a,l,f,v),document.getElementById("printReportTableBtn").classList.remove("hidden")}catch(c){console.error("Error fetching milestone hours report:",c)}},Fi=async()=>{let n=document.getElementById("reportType").value;n==="milestoneHours"?_l():n==="allMilestones"&&Il()},Il=async()=>{let n=document.getElementById("fromYear").value,r=parseInt(document.getElementById("fromMonth").value)+1,i=document.getElementById("toYear").value,a=parseInt(document.getElementById("toMonth").value)+1;try{let l=await fetch(`/api/v1/timesheet/milestones/${n}/${r}/${i}/${a}`),c=await l.json();if(!l.ok){console.error("Failed to fetch milestone hours report:",c.message);return}let{from:h,to:g,deliverables:f}=c.data;if(!Array.isArray(f)){console.warn("No deliverables found for this period.");return}let v=document.getElementById("milestone-report-table-head"),D=document.getElementById("milestone-report-table-body");v.innerHTML="",D.innerHTML="";for(let E of f){let{deliverable:F,consultants:P,totalHours:O}=E;Vl(h.year,h.month,g.year,g.month,f)}document.getElementById("printReportTableBtn").classList.remove("hidden")}catch(l){console.error("Error fetching milestones report:",l)}},Ll=(n,r,i,a,l,c,h)=>{let g=document.getElementById("milestone-report-table-head"),f=document.getElementById("milestone-report-table-body");g.innerHTML=`
    <tr>
      <th colspan="4" class="text-left py-2 px-4 font-bold">
         ${n} 
      </th>
    </tr>
    <tr>
      <th class="border px-4 py-2">Consultant</th>
      <th class="border px-4 py-2">Role</th>
      <th class="border px-4 py-2">Hours</th>
      <th class="border px-4 py-2 w-[100px]">Days</th>
    </tr>
  `;let v=0,D=c.map(E=>{let F=+(E.hours/8).toFixed(2);return v+=F,`
        <tr>
          <td class="border px-4 py-2">${E.name}</td>
          <td class="border px-4 py-2">${E.role}</td>
          <td class="border px-4 py-2">${E.hours}</td>
          <td class="border px-4 py-2">${F} days</td>
        </tr>
      `}).join(""),s=`
    <tr>
      <td class="border px-4 py-2 font-bold">Total</td>
      <td class="border px-4 py-2"></td>
      <td class="border px-4 py-2 font-bold">${h}</td>
      <td class="border px-4 py-2 font-bold">${v.toFixed(2)} days</td>
    </tr>
  `;f.innerHTML=D+s,un=`Deliverable monthly report - ${n}`},Vl=(n,r,i,a,l)=>{let c=document.getElementById("milestone-report-table-head"),h=document.getElementById("milestone-report-table-body");c.innerHTML="",h.innerHTML="",c.innerHTML=`
    <tr>
      <th colspan="4" class="text-left py-2 px-4 font-bold">
        Deliverables Report (${r}/${n} to ${a}/${i})
      </th>
    </tr>
    <tr>
      <th class="border px-4 py-2">Consultant</th>
      <th class="border px-4 py-2">Role</th>
      <th class="border px-4 py-2">Hours</th>
      <th class="border px-4 py-2">Days</th>
    </tr>
  `,l.forEach(({deliverable:g,consultants:f,totalHours:v})=>{let D=`
      <tr>
        <td colspan="4" class="border px-4 py-2 font-semibold bg-gray-100">
          Deliverable: ${g}
        </td>
      </tr>
    `,s=f.map(F=>{let P=parseFloat(F.hours||0),O=(P/8).toFixed(2);return`
          <tr>
            <td class="border px-4 py-2">${F.name}</td>
            <td class="border px-4 py-2">${F.role}</td>
            <td class="border px-4 py-2">${P.toFixed(2)}</td>
            <td class="border px-4 py-2">${O}</td>
          </tr>
        `}).join(""),E=`
      <tr>
        <td class="border px-4 py-2 font-bold">Total</td>
        <td class="border px-4 py-2"></td>
        <td class="border px-4 py-2 font-bold">${v.toFixed(2)}</td>
        <td class="border px-4 py-2 font-bold">${(v/8).toFixed(2)}</td>
      </tr>
    `;h.innerHTML+=D+s+E}),un=`Deliverable Period Summary (${r}/${n} to ${a}/${i})`},Ci=async()=>{let n=document.getElementById("milestone-report-table"),r=document.getElementById("fromMonth"),i=document.getElementById("fromYear"),a=document.getElementById("toMonth"),l=document.getElementById("toYear"),c=await Cn();if(!n){console.error("Error: Table not found!"),alert("Table not found! Please generate the timesheet before printing.");return}let h=r.options[r.selectedIndex].text,g=a.options[a.selectedIndex].text,f=i.options[i.selectedIndex].text,v=l.options[l.selectedIndex].text,D=window.open("","","width=900,height=700"),s=D.document;s.open(),s.close();let E=s.querySelector("head"),F=s.querySelector("body"),P=s.createElement("title");P.textContent=un,E.appendChild(P);let O=s.createElement("style");O.textContent=`
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { width: 100%; border-collapse: collapse; padding: 10px;}
  th, td { border: 1px solid #000; padding: 8px; text-align: left; vertical-align: top; padding-left: 12px;}
  th { background-color: #f4f4f4; padding-left: 12px; }

  /* Leave & Milestone badge styles */
  .badge {
    display: inline-flex;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 4px 8px;
    margin: 2px;
  }

  .badge-bold {
    font-weight: 700;
  }



  .bg-secondary-100 {
    background-color: #e0f2fe;
    color: #0369a1;
  }
  
   .bg-secondary-300 {
    background-color: #f3f4f6;
    color: #d0383f;
  }

  .bg-green-100 {
    background-color: #dcfce7;
    color: #166534;
  }

  .bg-gray-100 {
    background-color: #f3f4f6;
    color: #374151;
  }
  
  .badge-value {
  margin-left: 4px;
}

  @media print {
    body { padding: 2px; margin-bottom: 100px; }
    button { display: none; }
    print-spacer {
      height: 100px;
      margin-top: 50px;
    }
    tfoot td { height: 120px;
    border: none !important;
    background-color: transparent !important; }

  }
`,E.appendChild(O);let _=s.createElement("h2");_.textContent=un,F.appendChild(_);let I=s.createElement("h4");I.textContent=`From: ${h} ${f} | To: ${g} ${v}`,F.appendChild(I),F.innerHTML+=n.outerHTML;let j=s.createElement("button");j.textContent="Print",j.style.margin="20px 0",j.style.padding="8px 16px",j.onclick=function(){D.print()},F.appendChild(j);let L=s.createElement("div");L.style.height="100px",L.style.display="block",L.className="print-spacer",F.appendChild(L);let M=s.createElement("footer");M.style.marginTop="240px",M.style.paddingTop="20px",M.style.borderTop="1px solid #ccc",M.style.textAlign="center",M.style.fontSize="12px",M.style.color="#666";let $=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),K=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),W=new Date().getFullYear();M.textContent=`\xA9 ${W} HRIS - Buddhika Thanura Jayasingha. | Designed & Develpoed by @cyberBuddhika. This timesheet summary was automatically generated by ${c} on ${$} at ${K}.`,F.appendChild(M);let G=s.createElement("style");G.textContent=`
  @media print {
    footer {
      position: fixed;
      bottom: 20px;
      left: 0;
      right: 0;
      text-align: center;
    }

    .print-spacer {
      height: 100px;
    }
  }
`,E.appendChild(G),D.print(),D.close()},Pi=async()=>{let i=(await(await fetch("/api/v1/milestones")).json()).data.data,a=document.getElementById("milestoneList");a.innerHTML="",i.forEach(l=>{let c=document.createElement("option");c.value=l._id,c.textContent=l.name,a.appendChild(c)})};var ln="",ki=null,Ml=async()=>{let n=document.getElementById("timesheet-Process-consultant").value;ln=n;try{let a=(await(await fetch(`/api/v1/consultants/${n}`)).json()).data.consultant;return ki={name:a.name,designation:a.designation,noOfWorkingDaysPerMonth:a.noOfWorkingDaysPerMonth,noOfWorkingHoursPerMonth:a.noOfWorkingHoursPerMonth,milestones:a.assignedMilestones.filter(l=>l.milestoneStatus==="Active").map(l=>({id:l.id,name:l.name,project:l.project}))},ki}catch(r){console.error("Error fetching consultant data:",r)}},Oi=async()=>{try{let n=await Ml();if(!n){console.warn("No consultant data available.");return}document.getElementById("consultant-name").textContent=n.name,document.getElementById("consultant-designation").textContent=n.designation,document.getElementById("consultant-working-hours-days").textContent=`${n.noOfWorkingHoursPerMonth} / ${n.noOfWorkingDaysPerMonth}`}catch(n){console.error("Error initializing basic data:",n)}},cn=async(n,r)=>{try{let i=parseInt(n.value),a=parseInt(r.value),l=new Date(a,i+1,0).getDate(),c=new Date(a,i,1).getDay();c=c===0?6:c-1;let h=[];for(let g=1;g<=l;g++){let f=(new Date(a,i,g).getDay()+6)%7;(f===5||f===6)&&h.push(g)}gt(c,l,h),await pt(n,r,ln)}catch(i){console.error("Error in getMonthAndYear:",i)}},jl=async()=>{let n=document.getElementById("processButton"),r=ln,i=parseInt(document.getElementById("year").value),a=parseInt(document.getElementById("month").value)+1;if(await H("Are you sure you want to process this timesheet?","confirm")&&n)try{let c=await fetch(`/api/v1/timesheet/process/${r}/${i}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),h=await c.json();if(c.ok)await H(h.message,"alert"),cn(document.getElementById("month"),document.getElementById("year"));else throw new Error(h.message)}catch(c){console.log(c)}},Rl=async()=>{let n=document.getElementById("revertToApproveButton"),r=ln,i=parseInt(document.getElementById("year").value),a=parseInt(document.getElementById("month").value)+1;if(await H("Are you sure you want to revert this approved timesheet?","confirm")&&n)try{let c=await fetch(`/api/v1/timesheet/revertApproved/${r}/${i}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),h=await c.json();if(c.ok)await H(h.message,"alert"),cn(document.getElementById("month"),document.getElementById("year"));else throw new Error(h.message)}catch(c){console.log(c)}};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("timesheetProcessView-module")&&(document.getElementById("revertToApproveButton")?.addEventListener("click",Rl),document.getElementById("processButton")?.addEventListener("click",jl))});var xi=async()=>{if(!document.getElementById("UserForm")){console.error("User form not found!");return}let r=document.getElementById("userName").value,i=document.getElementById("userEmail").value,a=document.getElementById("userRole").value,l=document.getElementById("userStatus").value==="true",c={role:a,active:l};try{let h=window.location.pathname.split("/"),g=h[h.indexOf("users")+1],f=await fetch(`/api/v1/users/${g}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),v=await f.json();if(!f.ok){console.error("Error Response:",v),Y(v.message||"Error updating user.");return}le("User updated successfully!"),setTimeout(()=>{window.location.href="/users"},1e3)}catch(h){console.error("Error updating user:",h),Y("Error updating user.")}},Bi=async()=>{if(!document.getElementById("userCreateForm")){console.error("User form not found!");return}let r=document.getElementById("userName").value.trim(),i=document.getElementById("userEmail").value.trim(),a=document.getElementById("userRole").value,l=document.getElementById("consultant_Id").value,c=document.getElementById("password").value,h=document.getElementById("passwordConfirmation").value;if(!r||!i||!a||!c||!h){H("Please fill in all fields.","alert");return}if(c!==h){H("Passwords do not match!","alert");return}let g={name:r,email:i,role:a,consultant_id:l,password:c,passwordConfirmation:h,active:!0};try{let f=await fetch("/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),v=await f.json();if(!f.ok){Y(v.message||"Error creating user.");return}le("User created successfully!"),setTimeout(()=>{window.location.href="/users"},1e3)}catch(f){console.error("Error creating user:",f),H("Error creating user.","alert")}};var Ni=async n=>{let r=document.getElementById("passwordCurrent").value,i=document.getElementById("password").value,a=document.getElementById("passwordConfirmation").value;if(i!==a){H("Passwords do not match!","alert");return}try{let l=await fetch("/api/v1/users/updateMyPassword",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({passwordCurrent:r,password:i,passwordConfirmation:a})}),c=await l.json();if(!l.ok){H(c.message||"Error updating password.","alert");return}H("Password updated successfully!","alert"),n.reset()}catch(l){console.error("Error updating password:",l),H("Something went wrong. Please try again!","alert")}};var lr=null,cr=(...n)=>{n.forEach(r=>{let i=document.getElementsByClassName(r);Array.from(i).forEach(a=>a.classList.remove("hidden"))})},Ai=async()=>{if(lr)return lr;try{let i=(await(await fetch("/api/v1/users/me")).json()).data.data;if(i?.role&&i?.name)return sessionStorage.setItem("userRole",i.role),sessionStorage.setItem("userName",i.name),lr=i,i;throw new Error("User info not found in response")}catch(n){return console.error("Failed to fetch user info:",n),null}},dr=async()=>{let n=sessionStorage.getItem("userRole");return n||(await Ai())?.role||null},Ti=async()=>{let n=sessionStorage.getItem("userName");return n||(await Ai())?.name||null};document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("loginForm"),r=document.getElementById("logout");n&&Zr(),r&&r.addEventListener("click",Yr)});document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("consultant"),r=document.getElementById("project"),i=document.getElementById("milestone"),a=document.getElementById("timesheet"),l=document.getElementById("user"),c=document.getElementById("profile"),h=document.getElementById("consultantContainer"),g=document.getElementById("projectContainer"),f=document.getElementById("milestoneContainer"),v=document.getElementById("timesheetContainer"),D=document.getElementById("userContainer"),s=document.getElementById("profileContainer"),E=document.getElementById("consultantUpArrow"),F=document.getElementById("consultantDownArrow"),P=document.getElementById("projectUpArrow"),O=document.getElementById("projectDownArrow"),_=document.getElementById("milestoneUpArrow"),I=document.getElementById("milestoneDownArrow"),j=document.getElementById("timesheetUpArrow"),L=document.getElementById("timesheetDownArrow"),M=document.getElementById("userUpArrow"),$=document.getElementById("userDownArrow"),K=document.getElementById("profileUpArrow"),U=document.getElementById("profileDownArrow");n&&n.addEventListener("click",()=>{Ve(h,E,F)}),r&&r.addEventListener("click",()=>{Ve(g,P,O)}),i&&i.addEventListener("click",()=>{Ve(f,_,I)}),a&&a.addEventListener("click",()=>{Ve(v,j,L)}),l&&l.addEventListener("click",()=>{Ve(D,M,$)}),c&&c.addEventListener("click",()=>{Ve(s,K,U)}),st("toggleActiveConsultants","toggleInactiveConsultants","showAllConsultants","consultantTableBody",5),st("toggleActiveProjects","toggleInactiveProjects","showAllProjects","projectTableBody",5),st("toggleActiveMilestones","toggleInactiveMilestones","showAllMilestones","milestoneTableBody",5),st("toggleActiveUsers","toggleInactiveUsers","showAllUsers","userTableBody",5),ut("consultantTable"),ut("projectTable"),ut("milestoneTable"),ut("userTable"),lt("searchInputConsultants","consultantTableBody"),lt("searchInputProjects","projectTableBody"),lt("searchInputMilestones","milestoneTableBody"),lt("searchInputUsers","userTableBody")});document.addEventListener("DOMContentLoaded",function(){document.getElementById("dashbaord")&&qr()});document.addEventListener("DOMContentLoaded",function(){document.getElementById("consultantForm")&&Vr()});document.addEventListener("DOMContentLoaded",function(){document.getElementById("updateConsultant")&&Mr()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("updateConsultant");document.getElementById("consultantForm")&&n&&jr()});document.addEventListener("DOMContentLoaded",function(){Rr()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("projectForm"),r=document.getElementById("createProject");n&&r&&Ur()});document.addEventListener("DOMContentLoaded",function(){document.getElementById("updateProject")&&$r()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("updateProject");document.getElementById("projectForm")&&n&&Wr()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("milestoneForm"),r=document.getElementById("createMilestone");n&&r&&Kr()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("milestoneForm"),r=document.getElementById("updateMilestone");n&&r&&Gr()});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("timesheet-module"),r=document.getElementById("timesheetApprovalView-module"),i=document.getElementById("timesheetProcessView-module");if(n||r){let a=document.getElementById("month"),l=document.getElementById("year"),c=document.getElementById("viewCalendarBtn"),h=document.getElementById("year");if(Qr(),c&&c.addEventListener("click",()=>Je(a,l)),!h)return;let g=new Date().getFullYear(),f=g;h.innerHTML="";for(let v=g-5;v<=f;v++){let D=document.createElement("option");D.value=v,D.textContent=v,v===g&&(D.selected=!0),h.appendChild(D)}eo()}});document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("timesheetApprovalView-module")){let r=document.getElementById("year");if(!r)return;let i=new Date().getFullYear(),a=i;r.innerHTML="";for(let l=i-5;l<=a;l++){let c=document.createElement("option");c.value=l,c.textContent=l,l===i&&(c.selected=!0),r.appendChild(c)}if(no(),viewCalendarBtn){let l=document.getElementById("month"),c=document.getElementById("year");viewCalendarBtn.addEventListener("click",()=>$t(l,c))}}});document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("timesheetSummaryView-module")){let r=document.getElementById("year");if(!r)return;let i=new Date().getFullYear(),a=i;r.innerHTML="";for(let l=i-5;l<=a;l++){let c=document.createElement("option");c.value=l,c.textContent=l,l===i&&(c.selected=!0),r.appendChild(c)}document.getElementById("year").addEventListener("change",Pn),document.getElementById("month").addEventListener("change",Pn),document.getElementById("printTableBtn").addEventListener("click",function(){oo()})}});document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("timesheetProcessView-module")){let r=document.getElementById("year");if(!r)return;let i=new Date().getFullYear(),a=i;r.innerHTML="";for(let c=i-5;c<=a;c++){let h=document.createElement("option");h.value=c,h.textContent=c,c===i&&(h.selected=!0),r.appendChild(h)}let l=document.getElementById("timesheet-Process-consultant");if(l&&l.addEventListener("change",async()=>{await Oi()}),viewCalendarBtn){let c=document.getElementById("month"),h=document.getElementById("year");viewCalendarBtn.addEventListener("click",()=>cn(c,h))}}});document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("timesheetReportView-module")){let r=document.getElementById("reportType"),i=document.getElementById("milestoneList"),a=document.getElementById("fromYear"),l=document.getElementById("toYear");if(!a||!l)return;let c=new Date().getFullYear(),h=c-5,g=c;a.innerHTML="",l.innerHTML="";for(let f=h;f<=g;f++){let v=document.createElement("option");v.value=f,v.textContent=f,f===c&&(v.selected=!0);let D=document.createElement("option");D.value=f,D.textContent=f,f===c&&(D.selected=!0),a.appendChild(v),l.appendChild(D)}r.addEventListener("change",()=>{r.value==="milestoneHours"?(Pi(),i.classList.remove("hidden")):i.classList.add("hidden")}),document.getElementById("viewReportBtn").addEventListener("click",Fi),document.getElementById("printReportTableBtn").addEventListener("click",async function(){await Ci()})}});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("userCreateForm");n&&n.addEventListener("submit",async r=>{r.preventDefault(),Bi()})});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("UserForm");n&&n.addEventListener("submit",async r=>{r.preventDefault(),await xi()})});document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("passwordChangeForm");n&&n.addEventListener("submit",async r=>{r.preventDefault(),await Ni(n)})});document.addEventListener("DOMContentLoaded",async function(){let n=await dr();n==="leader"&&cr("timesheet-approve"),(n==="admin"||n==="super admin")&&cr("consultants","consultant-create","projects","project-create","timesheet-approve","timesheet-operations","timesheet-report","user")});var Ul=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"";document.addEventListener("DOMContentLoaded",async function(){if(document.getElementById("dashboard")){let r=await Ti(),i=await dr(),a=document.getElementById("welcome-tag"),l=document.getElementById("tagline");a.innerText=`Welcome to HRIS, ${Ul(r)}!`,i==="leader"&&(l.innerText="Here, you can manage your own timesheets and approve your team\u2019s timesheets."),(i==="admin"||i==="super admin")&&(l.innerText="Here, you can manage all your consultants, projects, deliverables, timesheets and more."),i==="user"&&(l.innerText="Here, you can manage your own timesheets.")}});})();
//# sourceMappingURL=script.js.map
